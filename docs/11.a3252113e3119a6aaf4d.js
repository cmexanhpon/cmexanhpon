(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{LojI:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n("mrSG"),r=n("ECBP"),a=n("6MAI"),o=n("fXoL"),s=n("da3i"),l=n("3Pt+"),c=n("QH85"),u=n("neZC"),b=n("QlUG"),d=n("8+11"),m=n("ofXK"),g=n("gyL+");function h(t,e){if(1&t){const t=o.Ub();o.Tb(0,"app-button-create",5),o.ac("onClick",function(){return o.sc(t),o.dc(2).goToCreate()}),o.Sb()}}function p(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",2),o.Tb(1,"app-button-base",3),o.ac("onClick",function(){return o.sc(t),o.dc().goToList()}),o.Ec(2,"T\xecm ki\u1ebfm"),o.Sb(),o.Cc(3,h,1,0,"app-button-create",4),o.Sb()}if(2&t){const t=o.dc();o.zb(3),o.jc("ngIf",t.isSuperAdmin)}}let f=(()=>{class t extends r.a{constructor(t,e,n,i){super(t),this.ngControl=e,this.modalService=n,this.titleService=i,this.labelContent="Ch\u1ee9c danh",this.span=4,this.required=!1,this.labelHorizontal=!0,this.onChange=new o.n,this.listData=[],this.loading=!1,null!=this.ngControl&&(this.ngControl.valueAccessor=this)}ngOnInit(){this.fetchList()}writeValue(t){}registerOnChange(t){}registerOnTouched(t){}setDisabledState(t){}handleChange(t){this.onChange.emit(t)}fetchList(){this.titleService.getList().toPromise().then(t=>{this.loading=!1,t&&t.success?this.listData=t.data.content:this.message.error(t.message)})}goToList(){this.modalService.openListModal(s.a).afterClose.toPromise().then(t=>Object(i.a)(this,void 0,void 0,function*(){t&&(this.ngControl.control.setValue(t.id),this.listData.find(e=>e.id==t.id)||(this.listData=[...this.listData,t]))}))}goToCreate(){this.modalService.openCreateModal(a.a).afterClose.toPromise().then(t=>Object(i.a)(this,void 0,void 0,function*(){t&&(this.listData=[...this.listData,t],this.ngControl.control.setValue(t.id),this.onChange.emit(t))}))}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(o.r),o.Nb(l.m,10),o.Nb(c.a),o.Nb(u.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-select-title"]],inputs:{labelContent:"labelContent",span:"span",required:"required",labelHorizontal:"labelHorizontal"},outputs:{onChange:"onChange"},features:[o.wb],decls:3,vars:8,consts:[["type","select","labelField","name",3,"labelHorizontal","selectData","span","labelContent","formControl","required","footerSelectTemplate","loading","onChange"],["footer",""],[1,"container","m-5"],["iconType","search",3,"onClick"],[3,"onClick",4,"ngIf"],[3,"onClick"]],template:function(t,e){if(1&t&&(o.Tb(0,"app-input",0),o.ac("onChange",function(t){return e.handleChange(t)}),o.Sb(),o.Cc(1,p,4,1,"ng-template",null,1,o.Dc)),2&t){const t=o.rc(2);o.jc("labelHorizontal",e.labelHorizontal)("selectData",e.listData)("span",e.span)("labelContent",e.labelContent)("formControl",e.ngControl.control)("required",e.required)("footerSelectTemplate",t)("loading",e.loading)}},directives:[b.a,l.n,l.g,l.s,d.a,m.n,g.a],styles:[""]}),t})()},Lxo8:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n("mrSG"),r=n("ECBP"),a=n("dI7A"),o=n("Z+4V"),s=n("fXoL"),l=n("3Pt+"),c=n("QH85"),u=n("FQ+V"),b=n("QlUG"),d=n("8+11"),m=n("ofXK"),g=n("gyL+");function h(t,e){if(1&t){const t=s.Ub();s.Tb(0,"app-button-create",5),s.ac("onClick",function(){return s.sc(t),s.dc(2).goToCreate()}),s.Sb()}}function p(t,e){if(1&t){const t=s.Ub();s.Tb(0,"div",2),s.Tb(1,"app-button-base",3),s.ac("onClick",function(){return s.sc(t),s.dc().goToList()}),s.Ec(2,"T\xecm ki\u1ebfm"),s.Sb(),s.Cc(3,h,1,0,"app-button-create",4),s.Sb()}if(2&t){const t=s.dc();s.zb(3),s.jc("ngIf",t.isSuperAdmin)}}let f=(()=>{class t extends r.a{constructor(t,e,n,i){super(t),this.ngControl=e,this.modalService=n,this.departmentService=i,this.labelContent="Khoa ph\xf2ng",this.span=4,this.required=!1,this.labelHorizontal=!0,this.selectMode="default",this.onChange=new s.n,this.listData=[],this.firstLoad=!0,null!=this.ngControl&&(this.ngControl.valueAccessor=this)}ngOnInit(){}ngOnChanges(t){t.organizationId&&(this.organizationId?(this.fetchList(),this.firstLoad?this.firstLoad=!1:this.ngControl.control.reset()):(this.listData=[],this.ngControl.control.reset()))}writeValue(t){}registerOnChange(t){}registerOnTouched(t){}setDisabledState(t){}handleChange(t){this.onChange.emit(t)}fetchList(){const t=JSON.stringify({ListTextSearch:this.request.listTextSearch});this.departmentService.getList(1,1e3,this.request.sort,t,this.organizationId).toPromise().then(t=>{this.loading=!1,t&&t.success?this.listData=t.data.content:this.message.error(t.message)})}goToList(){this.modalService.openListModal(a.a).afterClose.toPromise().then(t=>Object(i.a)(this,void 0,void 0,function*(){t&&(this.ngControl.control.setValue(t.id),this.onChange.emit(t))}))}goToCreate(){this.modalService.openCreateModal(o.a).afterClose.toPromise().then(t=>Object(i.a)(this,void 0,void 0,function*(){t&&(this.listData=[...this.listData,t],this.ngControl.control.setValue(t.id),this.onChange.emit(t))}))}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(s.r),s.Nb(l.m,10),s.Nb(c.a),s.Nb(u.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-select-department"]],inputs:{labelContent:"labelContent",span:"span",required:"required",organizationId:"organizationId",labelHorizontal:"labelHorizontal",selectMode:"selectMode"},outputs:{onChange:"onChange"},features:[s.wb,s.xb],decls:3,vars:8,consts:[["type","select","labelField","name",3,"selectMode","labelHorizontal","selectData","span","labelContent","formControl","required","footerSelectTemplate","onChange"],["footer",""],[1,"container","m-5"],["iconType","search",3,"onClick"],[3,"onClick",4,"ngIf"],[3,"onClick"]],template:function(t,e){if(1&t&&(s.Tb(0,"app-input",0),s.ac("onChange",function(t){return e.handleChange(t)}),s.Sb(),s.Cc(1,p,4,1,"ng-template",null,1,s.Dc)),2&t){const t=s.rc(2);s.jc("selectMode",e.selectMode)("labelHorizontal",e.labelHorizontal)("selectData",e.listData)("span",e.span)("labelContent",e.labelContent)("formControl",e.ngControl.control)("required",e.required)("footerSelectTemplate",t)}},directives:[b.a,l.n,l.g,l.s,d.a,m.n,g.a],styles:[""]}),t})()},kk3Z:function(t,e,n){"use strict";n.r(e),n.d(e,"ClientModule",function(){return gt});var i=n("Hgu+"),r=n("OpKh"),a=n("uRpX"),o=n("ofXK"),s=n("PCNd"),l=n("3Pt+"),c=n("tyNb"),u=n("mrSG"),b=n("1XBi"),d=n("AytR"),m=n("fXoL"),g=n("tk/3");let h=(()=>{class t{constructor(t){this.httpClient=t,this.serviceUrl=d.a.BASE_API_URL+"/api/clienttrainingprogram"}create(t){return this.httpClient.post(this.serviceUrl,t)}uploadFile(t){let e=new FormData;return e.append("File",t),this.httpClient.post(this.serviceUrl+"/upload-file-training-program",e)}}return t.\u0275fac=function(e){return new(e||t)(m.Xb(g.c))},t.\u0275prov=m.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=n("CFL1"),f=n("2I5R"),S=n("AVD9"),T=n("n/iK"),v=n("QlUG"),C=n("1Uxm"),z=n("IiJ/"),y=n("UQmu");function N(t,e){if(1&t&&(m.Tb(0,"div",18),m.Tb(1,"div",9),m.Ob(2,"app-autocomplete-training-program-subject",19),m.Sb(),m.Tb(3,"div",9),m.Ob(4,"app-input",20),m.Sb(),m.Sb()),2&t){const t=e.index,n=m.dc();m.jc("formGroupName",t),m.zb(2),m.jc("listData",n.listSubject)}}let w=(()=>{class t extends b.a{constructor(t,e,n){super(t),this.clientTrainingProgramService=e,this.userService=n,this.listSubject=[]}ngOnInit(){this.form=this.formBuilder.group({trainingFormId:[null,l.t.required],name:[null,l.t.required],code:[null],fromDate:[null],toDate:[null,l.t.required],organizationId:[null],organizationInput:[null],address:[null],note:[null],metaDataObject:this.formBuilder.group({trainingSubjects:this.formBuilder.array([])}),trainingProgram_Users:this.formBuilder.array([])}),this.addTrainingProgram_UserRow()}get trainingSubjects(){return this.form.get("metaDataObject.trainingSubjects")}addTrainingSubjectRow(t){this.trainingSubjects.push(this.createTrainingSubjectItem(t))}deleteTrainingSubjectRow(t){this.trainingSubjects.removeAt(t)}createTrainingSubjectItem(t){return this.formBuilder.group({name:[t?t.name:null,[l.t.required]],code:[t?t.code:null],order:[t?t.order:null],amount:[t?t.amount:null,[l.t.required]]})}get trainingProgram_Users(){return this.form.controls.trainingProgram_Users}addTrainingProgram_UserRow(t){this.trainingProgram_Users.push(this.createTrainingProgram_UserItem(t))}deleteTrainingProgram_UserRow(t){this.trainingProgram_Users.removeAt(t)}createTrainingProgram_UserItem(t){return this.formBuilder.group({userId:[this.tokenUser.id,[l.t.required]],trainingSubjectName:[null],pathToUploadFile:[null],amount:[4,[l.t.required]],active:[!1],hidden:[null]})}onChangeFile(t){this.uploadFile=t}onSave(){return Object(u.a)(this,void 0,void 0,function*(){for(const t in this.form.controls)this.form.controls[t].markAsDirty(),this.form.controls[t].updateValueAndValidity();for(const t in this.trainingProgram_Users.controls){const e=this.trainingProgram_Users.controls[t];for(const t in e.controls)e.controls[t].markAsDirty(),e.controls[t].updateValueAndValidity()}this.uploadFile?this.form.valid&&(this.loading=!0,yield this.clientTrainingProgramService.uploadFile(this.uploadFile).toPromise().then(t=>{if(!t||!t.success)return this.loading=!1,void this.message.error("L\u1ed7i: "+t.message);this.trainingProgram_Users.at(0).controls.pathToUploadFile.setValue(t.data),this.clientTrainingProgramService.create(this.form.value).toPromise().then(t=>{this.loading=!1,t&&t.success?this.isModal&&(this.message.success("G\u1eedi y\xeau c\u1ea7u th\xe0nh c\xf4ng, Qu\u1ea3n tr\u1ecb vi\xean s\u1ebd duy\u1ec7t trong th\u1eddi gian s\u1edbm nh\u1ea5t",{nzDuration:1e4}),this.modal.destroy(t.data)):this.message.error("L\u1ed7i: "+t.message)})})):this.message.error("Vui l\xf2ng cung c\u1ea5p file minh ch\u1ee9ng")})}get internalOrganizationId(){return d.a.INTERNAL_ORGANIZATION_ID}onCancel(){this.isModal&&this.modal.destroy()}onTrainingFormChange(t){for(this.listSubject=t.trainingSubjects;this.trainingSubjects.length;)this.trainingSubjects.removeAt(0);t&&t.trainingSubjects&&t.trainingSubjects.forEach(t=>{this.addTrainingSubjectRow(t)})}onChangeTrainingSubject(t,e){this.trainingProgram_Users.at(e).controls.amount.setValue(t.amount)}onChooseTrainingSubject(t){if(t){this.chooseForm.controls.trainingSubject.reset();for(const e in this.trainingProgram_Users.controls)this.trainingProgram_Users.controls[e].controls.trainingSubjectName.setValue(t.name)}}onDuplicateOrganization(t){this.form.controls.organizationId.setValue(t?t.id:null)}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(m.r),m.Nb(h),m.Nb(p.a))},t.\u0275cmp=m.Hb({type:t,selectors:[["app-client-create-training-program"]],features:[m.wb],decls:26,vars:7,consts:[[1,"page-header"],[3,"loading","onClick"],[3,"onClick"],[3,"formGroup","keydown.enter"],[1,"row","m-t-30"],[1,"col-md-12"],["formControlName","trainingFormId","required","",3,"span","onChange"],[1,"row"],["type","text","labelContent","N\u1ed9i dung","formControlName","name","required","",3,"span"],[1,"col-md-6"],["type","datepicker","labelContent","T\u1eeb ng\xe0y","formControlName","fromDate"],["type","datepicker","labelContent","\u0110\u1ebfn ng\xe0y","formControlName","toDate","required",""],["formArrayName","trainingProgram_Users"],["class","row",3,"formGroupName",4,"ngFor","ngForOf"],["formControlName","organizationInput",3,"span","onDuplicate"],["type","textarea","labelContent","\u0110\u1ecba \u0111i\u1ec3m t\u1ed5 ch\u1ee9c","formControlName","address"],["type","textarea","labelContent","Ghi ch\xfa","formControlName","note"],[3,"required","onChange"],[1,"row",3,"formGroupName"],["labelContent","\u0110\u1ed1i t\u01b0\u1ee3ng","formControlName","trainingSubjectName",3,"listData"],["type","number","labelContent","S\u1ed1 ti\u1ebft quy \u0111\u1ed5i","formControlName","amount","required",""]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"app-button-save",1),m.ac("onClick",function(){return e.onSave()}),m.Sb(),m.Tb(2,"app-button-cancel",2),m.ac("onClick",function(){return e.onCancel()}),m.Sb(),m.Sb(),m.Tb(3,"form",3),m.ac("keydown.enter",function(t){return t.preventDefault()}),m.Tb(4,"div",4),m.Tb(5,"div",5),m.Tb(6,"app-select-training-form",6),m.ac("onChange",function(t){return e.onTrainingFormChange(t)}),m.Sb(),m.Sb(),m.Sb(),m.Tb(7,"div",7),m.Tb(8,"div",5),m.Ob(9,"app-input",8),m.Sb(),m.Sb(),m.Tb(10,"div",7),m.Tb(11,"div",9),m.Ob(12,"app-input",10),m.Sb(),m.Tb(13,"div",9),m.Ob(14,"app-input",11),m.Sb(),m.Sb(),m.Tb(15,"form",12),m.Cc(16,N,5,2,"div",13),m.Sb(),m.Tb(17,"div",7),m.Tb(18,"div",5),m.Tb(19,"app-autocomplete-organization",14),m.ac("onDuplicate",function(t){return e.onDuplicateOrganization(t)}),m.Sb(),m.Sb(),m.Sb(),m.Tb(20,"div",7),m.Tb(21,"div",9),m.Ob(22,"app-input",15),m.Sb(),m.Tb(23,"div",9),m.Ob(24,"app-input",16),m.Sb(),m.Sb(),m.Sb(),m.Tb(25,"app-dnd-upload",17),m.ac("onChange",function(t){return e.onChangeFile(t)}),m.Sb()),2&t&&(m.zb(1),m.jc("loading",e.loading),m.zb(2),m.jc("formGroup",e.form),m.zb(3),m.jc("span",2),m.zb(3),m.jc("span",2),m.zb(7),m.jc("ngForOf",e.trainingProgram_Users.controls),m.zb(3),m.jc("span",2),m.zb(6),m.jc("required",!0))},directives:[f.a,S.a,l.u,l.o,l.i,T.a,l.n,l.h,l.s,v.a,l.p,l.e,o.m,C.a,z.a,l.j,y.a],styles:[""]}),t})();var j=n("GHWL"),P=n("ri4K"),D=n("D9mS"),I=n("ZE2D"),O=n("5vDB"),k=n("AvTa"),U=n("Lxo8"),F=n("LojI"),L=n("TqlK");function E(t,e){if(1&t){const t=m.Ub();m.Tb(0,"app-button-edit",28),m.ac("onClick",function(){return m.sc(t),m.dc().onEdit()}),m.Sb()}}function x(t,e){if(1&t){const t=m.Ub();m.Tb(0,"app-button-save",29),m.ac("onClick",function(){return m.sc(t),m.dc().onSave()}),m.Sb()}if(2&t){const t=m.dc();m.jc("loading",t.loading)}}const M=function(){return{label:"Nam",value:1}},q=function(){return{label:"N\u1eef",value:0}},_=function(t,e){return[t,e]},G=function(){return{label:"Trong \u0111\u01a1n v\u1ecb Xanhpon",value:"internal"}},A=function(){return{label:"Ngo\xe0i \u0111\u01a1n v\u1ecb",value:"external"}};let V=(()=>{class t extends b.a{constructor(t,e,n){super(t),this.authenticationService=e,this.userService=n}ngOnInit(){this.form=this.formBuilder.group({username:[null],fullname:[null,l.t.required],code:[null],certificateNumber:[null,l.t.required],issueDate:[null,l.t.required],birthDate:[null],gender:[null],email:[null,l.t.email],phoneNumber:[null,l.t.pattern(j.b)],organizationId:[null],departmentId:[null],titleId:[null],avatarUrl:[null],address:[null],identificationNumber:[null],type:["internal",l.t.required]}),this.fetchDetail()}fetchDetail(){this.userService.getById(this.id).toPromise().then(t=>{t&&t.success?(this.form.patchValue(t.data),this.isEdit||setTimeout(()=>this.form.disable(),300),t.data.type||this.form.controls.type.setValue("internal"),this.avatarFileUrl=j.a+"/"+t.data.avatarUrl):this.message.error("L\u1ed7i: "+t.message)})}handleChange(t){this.avatarFile=t.file.originFileObj,this.getBase64(t.file.originFileObj,t=>{this.avatarFileUrl=t})}getBase64(t,e){const n=new FileReader;n.addEventListener("load",()=>e(n.result)),n.readAsDataURL(t)}onChangeType(t){"internal"==t?(this.form.controls.organizationId.setValue("00000000-0000-0000-0000-000000000001"),this.form.controls.organizationId.disable()):"external"==t&&(this.form.controls.organizationId.setValue(null),this.form.controls.organizationId.enable())}onEdit(){this.isEdit=!0,this.form.enable(),"internal"==this.form.value.type&&this.form.controls.organizationId.disable()}onCancel(){this.isModal&&this.modal.destroy()}onSave(){for(const t in this.form.controls)this.form.controls[t].markAsDirty(),this.form.controls[t].updateValueAndValidity();this.form.valid&&(this.loading=!0,this.form.controls.username.setValue(this.form.getRawValue().certificateNumber),this.authenticationService.updateUser(this.form.getRawValue(),this.avatarFile).toPromise().then(t=>{this.loading=!1,t&&t.success?this.isModal&&(this.message.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),this.modal.destroy(t)):this.message.error("L\u1ed7i: "+t.message)}))}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(m.r),m.Nb(P.a),m.Nb(p.a))},t.\u0275cmp=m.Hb({type:t,selectors:[["app-client-edit-user"]],features:[m.wb],decls:50,vars:25,consts:[[1,"container"],[1,"page-header"],[3,"onClick",4,"ngIf"],[3,"loading","onClick",4,"ngIf"],[3,"popConfirm","onClick"],[3,"formGroup"],[1,"row"],[1,"col-xl-3"],[1,"row","m-v-20"],["nzName","avatar",1,"center",3,"nzShowUploadList","nzChange"],["nzIcon","user",3,"nzSize","nzSrc"],[1,"col-xl-9"],[1,"col-md-6"],["type","text","labelContent","H\u1ecd t\xean","formControlName","fullname","required","true"],["type","text","labelContent","M\xe3","formControlName","code"],["type","text","labelContent","S\u1ed1 CCHN","formControlName","certificateNumber","required",""],["type","datepicker","labelContent","Ng\xe0y c\u1ea5p","formControlName","issueDate","required",""],["type","datepicker","labelContent","Ng\xe0y sinh","formControlName","birthDate"],["type","radio","labelContent","Gi\u1edbi t\xednh","formControlName","gender",3,"radioData"],["type","text","labelContent","Email","formControlName","email","errorTip","Sai \u0111\u1ecbnh d\u1ea1ng email"],["type","text","labelContent","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phoneNumber","errorTip","Sai \u0111\u1ecbnh d\u1ea1ng S\u0110T"],["type","text","labelContent","S\u1ed1 CMND","formControlName","identificationNumber"],["type","textarea","labelContent","\u0110\u1ecba ch\u1ec9","formControlName","address"],[1,"col-md-12"],["type","radio","labelContent","\u0110\u1ed1i t\u01b0\u1ee3ng","formControlName","type",3,"span","radioData","onChange"],["formControlName","organizationId","required","true",3,"span"],["formControlName","departmentId",3,"organizationId"],["formControlName","titleId"],[3,"onClick"],[3,"loading","onClick"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"div",1),m.Cc(2,E,1,0,"app-button-edit",2),m.Cc(3,x,1,1,"app-button-save",3),m.Tb(4,"app-button-cancel",4),m.ac("onClick",function(){return e.onCancel()}),m.Sb(),m.Sb(),m.Tb(5,"div"),m.Tb(6,"form",5),m.Tb(7,"div",6),m.Tb(8,"div",7),m.Tb(9,"div",8),m.Tb(10,"nz-upload",9),m.ac("nzChange",function(t){return e.isEdit?e.handleChange(t):null}),m.Ob(11,"nz-avatar",10),m.Sb(),m.Sb(),m.Sb(),m.Tb(12,"div",11),m.Tb(13,"div",6),m.Tb(14,"div",12),m.Ob(15,"app-input",13),m.Sb(),m.Tb(16,"div",12),m.Ob(17,"app-input",14),m.Sb(),m.Sb(),m.Tb(18,"div",6),m.Tb(19,"div",12),m.Ob(20,"app-input",15),m.Sb(),m.Tb(21,"div",12),m.Ob(22,"app-input",16),m.Sb(),m.Sb(),m.Tb(23,"div",6),m.Tb(24,"div",12),m.Ob(25,"app-input",17),m.Sb(),m.Tb(26,"div",12),m.Ob(27,"app-input",18),m.Sb(),m.Sb(),m.Tb(28,"div",6),m.Tb(29,"div",12),m.Ob(30,"app-input",19),m.Sb(),m.Tb(31,"div",12),m.Ob(32,"app-input",20),m.Sb(),m.Sb(),m.Tb(33,"div",6),m.Tb(34,"div",12),m.Ob(35,"app-input",21),m.Sb(),m.Tb(36,"div",12),m.Ob(37,"app-input",22),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(38,"nz-divider"),m.Tb(39,"div",6),m.Tb(40,"div",23),m.Tb(41,"app-input",24),m.ac("onChange",function(t){return e.onChangeType(t)}),m.Sb(),m.Sb(),m.Sb(),m.Tb(42,"div",6),m.Tb(43,"div",23),m.Ob(44,"app-select-organization",25),m.Sb(),m.Sb(),m.Tb(45,"div",6),m.Tb(46,"div",12),m.Ob(47,"app-select-department",26),m.Sb(),m.Tb(48,"div",12),m.Ob(49,"app-select-title",27),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t&&(m.zb(2),m.jc("ngIf",!e.isEdit),m.zb(1),m.jc("ngIf",e.isEdit),m.zb(1),m.jc("popConfirm",!!e.isEdit),m.zb(1),m.Bb(e.isModal?"m-t-30":""),m.zb(1),m.jc("formGroup",e.form),m.zb(4),m.jc("nzShowUploadList",!1),m.zb(1),m.jc("nzSize",200)("nzSrc",e.avatarFileUrl),m.zb(16),m.jc("radioData",m.nc(17,_,m.lc(15,M),m.lc(16,q))),m.zb(14),m.jc("span",2)("radioData",m.nc(22,_,m.lc(20,G),m.lc(21,A))),m.zb(3),m.jc("span",2),m.zb(3),m.jc("organizationId",e.form.getRawValue().organizationId))},directives:[o.n,S.a,l.u,l.o,l.i,D.a,I.a,v.a,l.n,l.h,l.s,O.a,k.a,U.a,F.a,L.a,f.a],styles:[""]}),t})();var H=n("Y9CB"),R=n("ECBP"),B=n("dEAy"),Y=n("QH85"),Q=n("JA5x"),K=n("C2AL"),X=n("FwiY"),J=n("nJia"),Z=n("Nqz0"),W=n("Q8cG"),$=n("k8vQ"),tt=n("gyL+"),et=n("zAKX"),nt=n("rMZv"),it=n("W9fG");function rt(t,e){if(1&t&&(m.Tb(0,"tr",60),m.Tb(1,"td",61),m.Ec(2),m.Sb(),m.Tb(3,"td"),m.Ec(4),m.Sb(),m.Tb(5,"td",52),m.Ec(6),m.Sb(),m.Tb(7,"td"),m.Ec(8),m.Sb(),m.Tb(9,"td"),m.Ec(10),m.ec(11,"date"),m.Sb(),m.Tb(12,"td"),m.Ec(13),m.ec(14,"date"),m.Sb(),m.Tb(15,"td"),m.Ec(16),m.Sb(),m.Tb(17,"td",62),m.Ec(18),m.Sb(),m.Sb()),2&t){const t=e.$implicit,n=e.index;m.jc("formGroupName",n)("hidden",t.value.hidden),m.zb(2),m.Gc(" ",n+1," "),m.zb(2),m.Gc(" ",t.value.trainingFormName," "),m.zb(2),m.Gc(" ",t.value.trainingProgramName," "),m.zb(2),m.Gc(" ",t.value.organizationName," "),m.zb(2),m.Gc(" ",m.gc(11,10,t.value.fromDate,"dd/MM/yyyy")," "),m.zb(3),m.Gc(" ",m.gc(14,13,t.value.toDate,"dd/MM/yyyy")," "),m.zb(3),m.Gc(" ",t.value.trainingSubjectName," "),m.zb(2),m.Gc(" ",t.value.amount," ")}}function at(t,e){}const ot=function(t){return{color:t}};function st(t,e){if(1&t&&(m.Rb(0),m.Ob(1,"nz-progress",63),m.Tb(2,"strong"),m.Ec(3),m.Sb(),m.Ec(4,"/24 - "),m.Tb(5,"span",64),m.Ec(6),m.Sb(),m.Ob(7,"span",65),m.Qb()),2&t){const t=m.dc();m.zb(1),m.jc("nzPercent",t.amoutInYear/24*100)("nzShowInfo",t.userService.showInfo(t.amoutInYear))("nzStrokeColor",t.userService.getColor(t.amoutInYear))("nzStatus",t.userService.getStatus(t.amoutInYear)),m.zb(2),m.Fc(t.amoutInYear),m.zb(2),m.jc("ngStyle",m.mc(8,ot,t.userService.getColor(t.amoutInYear))),m.zb(1),m.Fc(t.userService.getTextStatus(t.amoutInYear)),m.zb(1),m.jc("innerHTML",t.userService.getHtmlRemain(t.amoutInYear),m.tc)}}const lt=function(){return{standalone:!0}},ct=[{path:"",component:(()=>{class t extends R.a{constructor(t,e,n,i){super(t),this.userService=e,this.nzModalService=n,this.modalService=i,this.user=this.tokenService.get()?this.tokenService.get().user:null,this.user&&(this.avatarPath=j.a+"/"+this.user.avatarUrl),this.searchForm=this.formBuilder.group({year:[new Date]}),this.form=this.formBuilder.group({trainingProgram_Users:this.formBuilder.array([])}),this.fetchList()}get trainingProgram_Users(){return this.form.controls.trainingProgram_Users}addTrainingProgram_UserRow(t){this.trainingProgram_Users.push(this.createTrainingProgram_UserItem(t))}createTrainingProgram_UserItem(t){return this.formBuilder.group({trainingProgramName:[t?t.trainingProgramName:null,[l.t.required]],trainingFormName:[{value:t?t.trainingFormName:null,disabled:!0}],fromDate:[{value:t?t.fromDate:null,disabled:!0}],toDate:[{value:t?t.toDate:null,disabled:!0}],trainingSubjectName:[{value:t?t.trainingSubjectName:null,disabled:!0}],organizationName:[{value:t?t.organizationName:null,disabled:!0}],amount:[t?t.amount:null,[l.t.required]],hidden:[!1]})}fetchList(){if(!this.user.id)return;for(;0!==this.trainingProgram_Users.length;)this.trainingProgram_Users.removeAt(0);let t;this.searchForm.value.year&&(t=this.searchForm.value.year.getFullYear()),this.loading=!0,this.userService.getTrainingPrograms(this.user.id,t).toPromise().then(t=>{this.loading=!1,t&&t.success?(t.data.forEach(t=>{this.addTrainingProgram_UserRow({trainingProgramName:t.trainingProgram.name,trainingFormName:t.trainingProgram.trainingForm.name,fromDate:t.trainingProgram.fromDate,toDate:t.trainingProgram.toDate,trainingSubjectName:t.trainingSubjectName,amount:t.amount,organizationName:t.trainingProgram.organization?t.trainingProgram.organization.name:null})}),this.form.disable()):this.message.error("L\u1ed7i: "+t.message)})}onSearch(t){this.loading=!0;for(const e in this.trainingProgram_Users.controls){const n=this.trainingProgram_Users.controls[e],i=n.getRawValue();if(t.length>0){let e=!0;t.forEach(t=>{i.trainingProgramName&&i.trainingProgramName.toLowerCase().includes(t.toLowerCase())||i.trainingFormName&&i.trainingFormName.toLowerCase().includes(t.toLowerCase())||i.trainingSubjectName&&i.trainingSubjectName.toLowerCase().includes(t.toLowerCase())||i.amount&&i.amount.toString().toLowerCase().includes(t.toLowerCase())||(e=!1)}),n.controls.hidden.setValue(!e)}else n.controls.hidden.setValue(!1)}this.loading=!1}get year(){return(new Date).getFullYear()}get amoutInYear(){let t=0;return this.trainingProgram_Users.value.forEach(e=>{t+=e.amount}),t}getDepartmentAndOrganization(t,e){let n=t?t+", ":"";return n+=e||"",n}goToEdit(){this.modalService.openDetailModal(V,this.user.id,!0,"1000px","20px").afterClose.toPromise().then(t=>{t&&(this.tokenService.updateUser(t.data),this.user=t.data,this.avatarPath=j.a+"/"+this.user.avatarUrl)})}updateUserInfo(){this.userService.updateUserInfo(this.user.id,this.form.getRawValue(),this.avatarFile).toPromise().then(t=>{t&&t.success?(this.message.remove(),this.message.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),this.tokenService.updateUser(t.data)):this.message.error("L\u1ed7i: "+t.message)})}goToCreate(){this.modalService.openCreateModal(w,"1000px","20px",!0).afterClose.toPromise().then(t=>{})}changePassword(){return this.nzModalService.create({nzTitle:"\u0110\u1ed5i m\u1eadt kh\u1ea9u",nzContent:H.a,nzComponentParams:{isModal:!0},nzFooter:null})}logout(){this.tokenService.set(null),this.router.navigateByUrl(this.tokenService.login_url)}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(m.r),m.Nb(p.a),m.Nb(B.d),m.Nb(Y.a))},t.\u0275cmp=m.Hb({type:t,selectors:[["ng-component"]],features:[m.wb],decls:114,vars:24,consts:[[1,"container-fluid","p-h-0","p-v-20","h-100","bg",2,"background-image","url('assets/images/others/login-3.png')","background-repeat","no-repeat","background-attachment","fixed"],[1,"d-flex","flex-column","justify-content-between","h-100"],[1,"d-none","d-md-block"],[1,"container",2,"margin","auto"],["id","invoice",1,"p-h-30"],[1,"m-t-15","lh-2"],[1,"row"],[1,"col-md-10"],[1,"col-md-3","center"],["nzIcon","user",3,"nzSize","nzSrc"],[1,"col-md-9"],[1,"p-l-10","m-t-20"],[1,"font-weight-bold","font-size-20","text-highlight"],["nz-icon","","nzType","edit","nzTheme","outline","nzTooltipTitle","S\u1eeda","nzTooltipPlacement","topCenter","nz-tooltip","",1,"icon-edit",3,"click"],[1,"col-md-2"],[1,"float-right"],["nz-dropdown","","nzTooltipPlacement","bottomRight","nzPlacement","bottomRight","nzTrigger","click",1,"text-gray","font-size-18",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis","theme","outline"],["projectListSetting","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],["nz-icon","","nzType","key","theme","outline"],[1,"m-l-10"],["nz-menu-divider",""],["nz-menu-item","",2,"color","red",3,"click"],["nz-icon","","nzType","logout","theme","outline"],[1,"row","m-t-20","lh-2","justify-content-between"],[1,"p-l-10","m-t-10"],[3,"onClick"],[3,"formGroup"],[1,"row","m-b-10"],[1,"col-md-8"],["nzMode","tags","nzPlaceHolder","T\xecm ki\u1ebfm...",1,"w-100",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-md-4"],["type","datepicker","dateMode","year","formControlName","year","labelContent","N\u0103m x\xe9t",3,"onChange"],[1,"row","m-t-20"],[1,"col-sm-12"],[1,"w-100",3,"nzLoading","nzNoResult"],["dynamicTable",""],["width","30px",1,"center"],["width","170px"],["width","100px"],["width","150px"],["width","70px"],["formArrayName","trainingProgram_Users"],[3,"formGroupName","hidden",4,"ngFor","ngForOf"],["class","no-result"],["nzNoResult",""],[1,"row","m-t-30","lh-1-8"],[1,"float-right","text-right"],[4,"ngIf"],[1,"font-weight-semibold","text-dark","m-t-5","m-r-10"],[1,"text-highlight"],[1,"row","m-t-30","lh-2"],[1,"row","m-v-20"],[1,"col-sm-1"],["alt","","src","assets/images/logo/logo-xanhpon.png",1,"img-fluid","text-opacity","m-t-5",2,"width","50px","height","50px"],[1,"col-sm-5","center"],[1,"m-b-0","float-left"],[1,"col-sm-6","text-right"],[3,"formGroupName","hidden"],[1,"text-center"],[1,"text-right","font-weight-semibold"],[3,"nzPercent","nzShowInfo","nzStrokeColor","nzStatus"],[3,"ngStyle"],[1,"m-l-5",3,"innerHTML"]],template:function(t,e){if(1&t&&(m.Tb(0,"div",0),m.Tb(1,"div",1),m.Ob(2,"div",2),m.Tb(3,"div",3),m.Tb(4,"nz-card"),m.Tb(5,"div",4),m.Tb(6,"div",5),m.Tb(7,"div",6),m.Tb(8,"div",7),m.Tb(9,"div",6),m.Tb(10,"div",8),m.Ob(11,"nz-avatar",9),m.Sb(),m.Tb(12,"div",10),m.Tb(13,"address",11),m.Tb(14,"span",12),m.Ec(15),m.ec(16,"uppercase"),m.Sb(),m.Tb(17,"i",13),m.ac("click",function(){return e.goToEdit()}),m.Sb(),m.Ob(18,"br"),m.Tb(19,"span"),m.Ec(20,"S\u1ed1 CCHN: "),m.Tb(21,"strong"),m.Ec(22),m.Sb(),m.Sb(),m.Ob(23,"br"),m.Tb(24,"span"),m.Ec(25,"N\u0103m c\u1ea5p: "),m.Tb(26,"strong"),m.Ec(27),m.ec(28,"date"),m.Sb(),m.Sb(),m.Ob(29,"br"),m.Tb(30,"span"),m.Ec(31,"Khoa/ph\xf2ng: "),m.Tb(32,"strong"),m.Ec(33),m.Sb(),m.Sb(),m.Ob(34,"br"),m.Tb(35,"span"),m.Ec(36,"Ch\u1ee9c v\u1ee5: "),m.Tb(37,"strong"),m.Ec(38),m.Sb(),m.Sb(),m.Ob(39,"br"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(40,"div",14),m.Tb(41,"div",15),m.Tb(42,"a",16),m.Ob(43,"i",17),m.Sb(),m.Tb(44,"nz-dropdown-menu",null,18),m.Tb(46,"ul",19),m.Tb(47,"li",20),m.ac("click",function(){return e.changePassword()}),m.Ob(48,"i",21),m.Tb(49,"span",22),m.Ec(50," \u0110\u1ed5i m\u1eadt kh\u1ea9u"),m.Sb(),m.Sb(),m.Ob(51,"li",23),m.Tb(52,"li",24),m.ac("click",function(){return e.logout()}),m.Ob(53,"i",25),m.Tb(54,"span",22),m.Ec(55," \u0110\u0103ng xu\u1ea5t"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(56,"div",26),m.Tb(57,"h3",27),m.Ec(58,"Ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o \u0111\xe3 tham gia"),m.Sb(),m.Tb(59,"div"),m.Tb(60,"app-button-reload",28),m.ac("onClick",function(){return e.fetchList()}),m.Sb(),m.Tb(61,"app-button-create",28),m.ac("onClick",function(){return e.goToCreate()}),m.Sb(),m.Sb(),m.Sb(),m.Tb(62,"form",29),m.Tb(63,"div",30),m.Tb(64,"div",31),m.Tb(65,"nz-select",32),m.ac("ngModelChange",function(t){return e.onSearch(t)}),m.Sb(),m.Sb(),m.Tb(66,"div",33),m.Tb(67,"app-input",34),m.ac("onChange",function(){return e.fetchList()}),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(68,"div",35),m.Tb(69,"div",36),m.Tb(70,"form",29),m.Tb(71,"nz-table",37,38),m.Tb(73,"thead"),m.Tb(74,"tr"),m.Tb(75,"th",39),m.Ec(76,"STT"),m.Sb(),m.Tb(77,"th",40),m.Ec(78,"H\xecnh th\u1ee9c \u0111\xe0o t\u1ea1o"),m.Sb(),m.Tb(79,"th"),m.Ec(80,"N\u1ed9i dung"),m.Sb(),m.Tb(81,"th",40),m.Ec(82,"\u0110\u01a1n v\u1ecb t\u1ed5 ch\u1ee9c"),m.Sb(),m.Tb(83,"th",41),m.Ec(84,"T\u1eeb ng\xe0y"),m.Sb(),m.Tb(85,"th",41),m.Ec(86,"\u0110\u1ebfn ng\xe0y"),m.Sb(),m.Tb(87,"th",42),m.Ec(88,"\u0110\u1ed1i t\u01b0\u1ee3ng"),m.Sb(),m.Tb(89,"th",43),m.Ec(90,"Quy \u0111\u1ed5i"),m.Sb(),m.Sb(),m.Sb(),m.Tb(91,"tbody",44),m.Cc(92,rt,19,16,"tr",45),m.Sb(),m.Sb(),m.Cc(93,at,0,0,"ng-template",46,47,m.Dc),m.Sb(),m.Tb(95,"div",48),m.Tb(96,"div",36),m.Tb(97,"div",49),m.Tb(98,"p"),m.Cc(99,st,8,10,"ng-container",50),m.Sb(),m.Tb(100,"h3"),m.Tb(101,"span",51),m.Ec(102,"T\u1ed5ng s\u1ed1 ti\u1ebft:"),m.Sb(),m.Tb(103,"span",52),m.Ec(104),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(105,"div",53),m.Ob(106,"div",36),m.Sb(),m.Tb(107,"div",54),m.Tb(108,"div",55),m.Ob(109,"img",56),m.Sb(),m.Tb(110,"div",57),m.Tb(111,"p",58),m.Ec(112),m.Sb(),m.Sb(),m.Ob(113,"div",59),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t){const t=m.rc(45),n=m.rc(94);m.zb(11),m.jc("nzSize",150)("nzSrc",e.avatarFileUrl?e.avatarFileUrl:e.avatarPath?e.avatarPath:null),m.zb(4),m.Fc(m.fc(16,18,e.user.fullname)),m.zb(7),m.Fc(e.user.certificateNumber),m.zb(5),m.Fc(m.gc(28,20,e.user.issueDate,"dd/MM/yyyy")),m.zb(6),m.Fc(e.getDepartmentAndOrganization(null==e.user.department?null:e.user.department.name,null==e.user.organization?null:e.user.organization.name)),m.zb(5),m.Fc(null==e.user.title?null:e.user.title.name),m.zb(4),m.jc("nzDropdownMenu",t),m.zb(20),m.jc("formGroup",e.searchForm),m.zb(3),m.jc("ngModel",e.listTextSearch)("ngModelOptions",m.lc(23,lt)),m.zb(5),m.jc("formGroup",e.form),m.zb(1),m.jc("nzLoading",e.loading)("nzNoResult",n),m.zb(21),m.jc("ngForOf",e.trainingProgram_Users.controls),m.zb(7),m.jc("ngIf",e.searchForm.value.year),m.zb(5),m.Gc(" ",e.amoutInYear,""),m.zb(8),m.Gc("Copyright \xa9 ",e.year,". All rights reserved.")}},directives:[Q.a,I.a,K.a,X.a,J.d,Z.b,Z.c,Z.e,W.c,W.e,W.d,$.a,tt.a,l.u,l.o,l.i,et.b,l.n,l.q,v.a,l.h,nt.b,nt.j,nt.k,nt.a,nt.h,nt.e,l.e,o.m,o.n,l.j,it.a,o.o],pipes:[o.w,o.e],styles:[".icon-edit[_ngcontent-%COMP%]{margin-left:10px;font-size:18px;color:#72849a}.icon-edit[_ngcontent-%COMP%]:hover{color:#2f54eb;cursor:pointer}"]}),t})()}];let ut=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},imports:[[c.i.forChild(ct)],c.i]}),t})();var bt=n("hMaZ"),dt=n("jdXR"),mt=n("el8y");let gt=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},imports:[[o.c,s.a,l.r,a.a,ut,r.AuthenticationModule,mt.TitleModule,dt.OrganizationModule,bt.DepartmentModule,i.TrainingFormModule]]}),t})()}}]);