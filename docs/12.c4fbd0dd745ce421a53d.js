(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{kk3Z:function(e,t,n){"use strict";n.r(t),n.d(t,"ClientModule",function(){return G});var r=n("OpKh"),a=n("uRpX"),i=n("ofXK"),o=n("PCNd"),s=n("3Pt+"),c=n("tyNb"),b=n("Y9CB"),l=n("ECBP"),u=n("GHWL"),m=n("fXoL"),g=n("hrsj"),d=n("CFL1"),h=n("dEAy"),S=n("JA5x"),p=n("D9mS"),z=n("ZE2D"),T=n("Nqz0"),f=n("C2AL"),v=n("FwiY"),w=n("Q8cG"),y=n("zAKX"),P=n("QlUG"),N=n("rMZv"),C=n("W9fG");function E(e,t){if(1&e&&(m.Tb(0,"tr",58),m.Tb(1,"td",59),m.Ec(2),m.Sb(),m.Tb(3,"td"),m.Ec(4),m.Sb(),m.Tb(5,"td",50),m.Ec(6),m.Sb(),m.Tb(7,"td"),m.Ec(8),m.Sb(),m.Tb(9,"td"),m.Ec(10),m.ec(11,"date"),m.Sb(),m.Tb(12,"td"),m.Ec(13),m.ec(14,"date"),m.Sb(),m.Tb(15,"td"),m.Ec(16),m.Sb(),m.Tb(17,"td",60),m.Ec(18),m.Sb(),m.Sb()),2&e){const e=t.$implicit,n=t.index;m.jc("formGroupName",n)("hidden",e.value.hidden),m.zb(2),m.Gc(" ",n+1," "),m.zb(2),m.Gc(" ",e.value.trainingFormName," "),m.zb(2),m.Gc(" ",e.value.trainingProgramName," "),m.zb(2),m.Gc(" ",e.value.organizationName," "),m.zb(2),m.Gc(" ",m.gc(11,10,e.value.fromDate,"dd/MM/yyyy")," "),m.zb(3),m.Gc(" ",m.gc(14,13,e.value.toDate,"dd/MM/yyyy")," "),m.zb(3),m.Gc(" ",e.value.trainingSubjectName," "),m.zb(2),m.Gc(" ",e.value.amount," ")}}function F(e,t){}const L=function(e){return{color:e}};function U(e,t){if(1&e&&(m.Rb(0),m.Ob(1,"nz-progress",61),m.Tb(2,"strong"),m.Ec(3),m.Sb(),m.Ec(4,"/24 - "),m.Tb(5,"span",62),m.Ec(6),m.Sb(),m.Ob(7,"span",63),m.Qb()),2&e){const e=m.dc();m.zb(1),m.jc("nzPercent",e.amoutInYear/24*100)("nzShowInfo",e.userService.showInfo(e.amoutInYear))("nzStrokeColor",e.userService.getColor(e.amoutInYear))("nzStatus",e.userService.getStatus(e.amoutInYear)),m.zb(2),m.Fc(e.amoutInYear),m.zb(2),m.jc("ngStyle",m.mc(8,L,e.userService.getColor(e.amoutInYear))),m.zb(1),m.Fc(e.userService.getTextStatus(e.amoutInYear)),m.zb(1),m.jc("innerHTML",e.userService.getHtmlRemain(e.amoutInYear),m.tc)}}const j=function(){return{standalone:!0}},k=[{path:"",component:(()=>{class e extends l.a{constructor(e,t,n,r,a){super(e),this.tokenService=t,this.router=n,this.userService=r,this.modalService=a,this.user=this.tokenService.get()?this.tokenService.get().user:null,this.user&&(this.avatarPath=u.a+"/"+this.user.avatarUrl),this.searchForm=this.formBuilder.group({year:[new Date]}),this.form=this.formBuilder.group({trainingProgram_Users:this.formBuilder.array([])}),this.fetchList()}get trainingProgram_Users(){return this.form.controls.trainingProgram_Users}addTrainingProgram_UserRow(e){this.trainingProgram_Users.push(this.createTrainingProgram_UserItem(e))}createTrainingProgram_UserItem(e){return this.formBuilder.group({trainingProgramName:[e?e.trainingProgramName:null,[s.s.required]],trainingFormName:[{value:e?e.trainingFormName:null,disabled:!0}],fromDate:[{value:e?e.fromDate:null,disabled:!0}],toDate:[{value:e?e.toDate:null,disabled:!0}],trainingSubjectName:[{value:e?e.trainingSubjectName:null,disabled:!0}],organizationName:[{value:e?e.organizationName:null,disabled:!0}],amount:[e?e.amount:null,[s.s.required]],hidden:[!1]})}fetchList(){if(!this.user.id)return;for(;0!==this.trainingProgram_Users.length;)this.trainingProgram_Users.removeAt(0);let e;this.searchForm.value.year&&(e=this.searchForm.value.year.getFullYear()),this.loading=!0,this.userService.getTrainingPrograms(this.user.id,e).toPromise().then(e=>{this.loading=!1,e&&e.success?(e.data.forEach(e=>{this.addTrainingProgram_UserRow({trainingProgramName:e.trainingProgram.name,trainingFormName:e.trainingProgram.trainingForm.name,fromDate:e.trainingProgram.fromDate,toDate:e.trainingProgram.toDate,trainingSubjectName:e.trainingSubjectName,amount:e.amount,organizationName:e.trainingProgram.organization?e.trainingProgram.organization.name:null})}),this.form.disable()):this.message.error("L\u1ed7i: "+e.message)})}onSearch(e){this.loading=!0;for(const t in this.trainingProgram_Users.controls){const n=this.trainingProgram_Users.controls[t],r=n.getRawValue();if(e.length>0){let t=!0;e.forEach(e=>{r.trainingProgramName.toLowerCase().includes(e.toLowerCase())||r.trainingFormName.toLowerCase().includes(e.toLowerCase())||r.trainingSubjectName.toLowerCase().includes(e.toLowerCase())||r.amount.toString().toLowerCase().includes(e.toLowerCase())||(t=!1)}),n.controls.hidden.setValue(!t)}else n.controls.hidden.setValue(!1)}this.loading=!1}get year(){return(new Date).getFullYear()}get amoutInYear(){let e=0;return this.trainingProgram_Users.value.forEach(t=>{e+=t.amount}),e}handleChange(e){this.avatarFile=e.file.originFileObj,this.getBase64(e.file.originFileObj,e=>{this.avatarFileUrl=e}),this.updateUserInfo()}getBase64(e,t){const n=new FileReader;n.addEventListener("load",()=>t(n.result)),n.readAsDataURL(e)}updateUserInfo(){this.userService.updateUserInfo(this.user.id,this.form.getRawValue(),this.avatarFile).toPromise().then(e=>{e&&e.success?(this.message.remove(),this.message.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),this.tokenService.updateUser(e.data)):this.message.error("L\u1ed7i: "+e.message)})}changePassword(){return this.modalService.create({nzTitle:"\u0110\u1ed5i m\u1eadt kh\u1ea9u",nzContent:b.a,nzComponentParams:{isModal:!0},nzFooter:null})}logout(){this.tokenService.set(null),this.router.navigateByUrl(this.tokenService.login_url)}}return e.\u0275fac=function(t){return new(t||e)(m.Nb(m.r),m.Nb(g.a),m.Nb(c.e),m.Nb(d.a),m.Nb(h.d))},e.\u0275cmp=m.Hb({type:e,selectors:[["ng-component"]],features:[m.wb],decls:102,vars:26,consts:[[1,"container-fluid","p-h-0","p-v-20","h-100","bg",2,"background-image","url('assets/images/others/login-3.png')"],[1,"container"],["id","invoice",1,"p-h-30"],[1,"m-t-15","lh-2"],[1,"row"],[1,"col-md-10"],[1,"col-md-3","center"],["nzName","avatar",1,"center",3,"nzShowUploadList","nzChange"],["nzIcon","user",3,"nzSize","nzSrc"],[1,"col-md-9"],[1,"p-l-10","m-t-20"],[1,"font-weight-semibold","text-dark","font-size-20"],[1,"col-md-2"],[1,"float-right"],["nz-dropdown","","nzTooltipPlacement","bottomRight","nzPlacement","bottomRight","nzTrigger","click",1,"text-gray","font-size-18",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis","theme","outline"],["projectListSetting","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],["nz-icon","","nzType","key","theme","outline"],[1,"m-l-10"],["nz-menu-divider",""],["nz-menu-item","",2,"color","red",3,"click"],["nz-icon","","nzType","logout","theme","outline"],[1,"row","m-t-20","lh-2"],[1,"col-sm-9"],[1,"p-l-10","m-t-10"],[3,"formGroup"],[1,"row","m-b-10"],[1,"col-md-8"],["nzMode","tags","nzPlaceHolder","T\xecm ki\u1ebfm...",1,"w-100",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-md-4"],["type","datepicker","dateMode","year","formControlName","year","labelContent","N\u0103m x\xe9t",3,"onChange"],[1,"row","m-t-20"],[1,"col-sm-12"],[1,"w-100",3,"nzLoading","nzNoResult"],["dynamicTable",""],["width","30px",1,"center"],["width","170px"],["width","100px"],["width","150px"],["width","70px"],["formArrayName","trainingProgram_Users"],[3,"formGroupName","hidden",4,"ngFor","ngForOf"],["class","no-result"],["nzNoResult",""],[1,"row","m-t-30","lh-1-8"],[1,"float-right","text-right"],[4,"ngIf"],[1,"font-weight-semibold","text-dark","m-t-5","m-r-10"],[1,"text-highlight"],[1,"row","m-t-30","lh-2"],[1,"row","m-v-20"],[1,"col-sm-1"],["alt","","src","assets/images/logo/logo-xanhpon.png",1,"img-fluid","text-opacity","m-t-5",2,"width","50px","height","50px"],[1,"col-sm-5","center"],[1,"m-b-0","float-left"],[1,"col-sm-6","text-right"],[3,"formGroupName","hidden"],[1,"text-center"],[1,"text-right","font-weight-semibold"],[3,"nzPercent","nzShowInfo","nzStrokeColor","nzStatus"],[3,"ngStyle"],[1,"m-l-5",3,"innerHTML"]],template:function(e,t){if(1&e&&(m.Tb(0,"div",0),m.Tb(1,"div",1),m.Tb(2,"nz-card"),m.Tb(3,"div",2),m.Tb(4,"div",3),m.Tb(5,"div",4),m.Tb(6,"div",5),m.Tb(7,"div",4),m.Tb(8,"div",6),m.Tb(9,"nz-upload",7),m.ac("nzChange",function(e){return t.handleChange(e)}),m.Ob(10,"nz-avatar",8),m.Sb(),m.Sb(),m.Tb(11,"div",9),m.Tb(12,"address",10),m.Tb(13,"span",11),m.Ec(14),m.ec(15,"uppercase"),m.Sb(),m.Ob(16,"br"),m.Tb(17,"span"),m.Ec(18),m.Sb(),m.Ob(19,"br"),m.Tb(20,"span"),m.Ec(21),m.ec(22,"date"),m.Sb(),m.Ob(23,"br"),m.Tb(24,"span"),m.Ec(25),m.Sb(),m.Ob(26,"br"),m.Tb(27,"span"),m.Ec(28),m.Sb(),m.Ob(29,"br"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(30,"div",12),m.Tb(31,"div",13),m.Tb(32,"a",14),m.Ob(33,"i",15),m.Sb(),m.Tb(34,"nz-dropdown-menu",null,16),m.Tb(36,"ul",17),m.Tb(37,"li",18),m.ac("click",function(){return t.changePassword()}),m.Ob(38,"i",19),m.Tb(39,"span",20),m.Ec(40," \u0110\u1ed5i m\u1eadt kh\u1ea9u"),m.Sb(),m.Sb(),m.Ob(41,"li",21),m.Tb(42,"li",22),m.ac("click",function(){return t.logout()}),m.Ob(43,"i",23),m.Tb(44,"span",20),m.Ec(45," \u0110\u0103ng xu\u1ea5t"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(46,"div",24),m.Tb(47,"div",25),m.Tb(48,"h3",26),m.Ec(49,"Ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o \u0111\xe3 tham gia"),m.Sb(),m.Sb(),m.Sb(),m.Tb(50,"form",27),m.Tb(51,"div",28),m.Tb(52,"div",29),m.Tb(53,"nz-select",30),m.ac("ngModelChange",function(e){return t.onSearch(e)}),m.Sb(),m.Sb(),m.Tb(54,"div",31),m.Tb(55,"app-input",32),m.ac("onChange",function(){return t.fetchList()}),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(56,"div",33),m.Tb(57,"div",34),m.Tb(58,"form",27),m.Tb(59,"nz-table",35,36),m.Tb(61,"thead"),m.Tb(62,"tr"),m.Tb(63,"th",37),m.Ec(64,"STT"),m.Sb(),m.Tb(65,"th",38),m.Ec(66,"H\xecnh th\u1ee9c \u0111\xe0o t\u1ea1o"),m.Sb(),m.Tb(67,"th"),m.Ec(68,"N\u1ed9i dung"),m.Sb(),m.Tb(69,"th",38),m.Ec(70,"\u0110\u01a1n v\u1ecb t\u1ed5 ch\u1ee9c"),m.Sb(),m.Tb(71,"th",39),m.Ec(72,"T\u1eeb ng\xe0y"),m.Sb(),m.Tb(73,"th",39),m.Ec(74,"\u0110\u1ebfn ng\xe0y"),m.Sb(),m.Tb(75,"th",40),m.Ec(76,"\u0110\u1ed1i t\u01b0\u1ee3ng"),m.Sb(),m.Tb(77,"th",41),m.Ec(78,"Quy \u0111\u1ed5i"),m.Sb(),m.Sb(),m.Sb(),m.Tb(79,"tbody",42),m.Cc(80,E,19,16,"tr",43),m.Sb(),m.Sb(),m.Cc(81,F,0,0,"ng-template",44,45,m.Dc),m.Sb(),m.Tb(83,"div",46),m.Tb(84,"div",34),m.Tb(85,"div",47),m.Tb(86,"p"),m.Cc(87,U,8,10,"ng-container",48),m.Sb(),m.Tb(88,"h3"),m.Tb(89,"span",49),m.Ec(90,"T\u1ed5ng s\u1ed1 ti\u1ebft:"),m.Sb(),m.Tb(91,"span",50),m.Ec(92),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(93,"div",51),m.Ob(94,"div",34),m.Sb(),m.Tb(95,"div",52),m.Tb(96,"div",53),m.Ob(97,"img",54),m.Sb(),m.Tb(98,"div",55),m.Tb(99,"p",56),m.Ec(100),m.Sb(),m.Sb(),m.Ob(101,"div",57),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&e){const e=m.rc(35),n=m.rc(82);m.zb(9),m.jc("nzShowUploadList",!1),m.zb(1),m.jc("nzSize",150)("nzSrc",t.avatarFileUrl?t.avatarFileUrl:t.avatarPath?t.avatarPath:null),m.zb(4),m.Fc(m.fc(15,20,t.user.fullname)),m.zb(4),m.Gc("S\u1ed1 CCHN: ",t.user.certificateNumber,""),m.zb(3),m.Gc("N\u0103m c\u1ea5p: ",m.gc(22,22,t.user.issueDate,"dd/MM/yyyy"),""),m.zb(4),m.Hc("Khoa/ph\xf2ng: ",null==t.user.department?null:t.user.department.name,", ",null==t.user.organization?null:t.user.organization.name,""),m.zb(3),m.Gc("Ch\u1ee9c v\u1ee5: ",null==t.user.title?null:t.user.title.name,""),m.zb(4),m.jc("nzDropdownMenu",e),m.zb(18),m.jc("formGroup",t.searchForm),m.zb(3),m.jc("ngModel",t.listTextSearch)("ngModelOptions",m.lc(25,j)),m.zb(5),m.jc("formGroup",t.form),m.zb(1),m.jc("nzLoading",t.loading)("nzNoResult",n),m.zb(21),m.jc("ngForOf",t.trainingProgram_Users.controls),m.zb(7),m.jc("ngIf",t.searchForm.value.year),m.zb(5),m.Gc(" ",t.amoutInYear,""),m.zb(8),m.Gc("Copyright \xa9 ",t.year,". All rights reserved.")}},directives:[S.a,p.a,z.a,T.b,T.c,f.a,v.a,T.e,w.c,w.e,w.d,s.t,s.o,s.i,y.b,s.n,s.p,P.a,s.h,N.b,N.j,N.k,N.a,N.h,N.e,s.e,i.m,i.n,s.j,C.a,i.o],pipes:[i.w,i.e],encapsulation:2}),e})()}];let x=(()=>{class e{}return e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({factory:function(t){return new(t||e)},imports:[[c.i.forChild(k)],c.i]}),e})(),G=(()=>{class e{}return e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({factory:function(t){return new(t||e)},imports:[[i.c,o.a,s.q,a.a,x,r.AuthenticationModule]]}),e})()}}]);