(window.webpackJsonp=window.webpackJsonp||[]).push([[13,16,17],{XlE4:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i("7VIp"),a=i("ECBP"),s=i("fXoL");let r=(()=>{class e extends a.a{constructor(e){super(e),this.tableType="list",this.listData=[],this.flatList=[],this.mapOfCheckedId=[],this.isLoading=!1,this.selectedIds=[],this.listTextSearch=[]}sortChange(e){this.request.sort=("ascend"===e.value?"+":"-")+e.key,this.fetchList()}checkAll(e){this.listData.forEach(t=>{this.mapOfCheckedId[t.id]=e,t.children&&t.children.forEach(t=>{this.mapOfCheckedId[t.id]=e})}),this.refreshStatus()}refreshStatus(){0===this.listData.length?(this.isAllDisplayDataChecked=!1,this.isIndeterminate=!1):(this.isAllDisplayDataChecked=this.listData.every(e=>this.mapOfCheckedId[e.id]||e.children&&e.children.every(e=>this.mapOfCheckedId[e.id])),this.isIndeterminate=this.listData.some(e=>this.mapOfCheckedId[e.id]||e.children&&e.children.some(e=>this.mapOfCheckedId[e.id]))&&!this.isAllDisplayDataChecked);const e=[];this.listData.filter(e=>this.mapOfCheckedId[e.id]||e.children&&e.children.some(e=>this.mapOfCheckedId[e.id])).forEach(t=>{e.push(t.id)}),this.selectedIds=[...e]}nzOnSearchGroup(e){this.groupBy=e,this.expandable=!!e,this.parseGroup(this.flatList)}nzOnSearch(e){this.request.currentPage=1,this.request.listTextSearch=e.map(e=>(console.log(encodeURIComponent(e)),encodeURIComponent(e))),this.request.currentPage=1,this.fetchList()}parseGroup(e){this.listData=this.expandable&&null!=this.groupBy?Object(n.e)(e,this.groupBy,"children"):[...e]}pageIndexChange(e){this.request.page=e,this.fetchList()}pageSizeChange(e){this.request.pageSize=e,this.fetchList()}currentPageDataChange(e){this.refreshStatus()}onGroupBy(e){this.groupBy=e,this.expandable=!!e,this.parseGroup(this.flatList)}fetchList(){}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(s.r))},e.\u0275cmp=s.Hb({type:e,selectors:[["ng-component"]],features:[s.wb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})()},nWY6:function(e,t,i){"use strict";i.r(t),i.d(t,"SettingModule",function(){return U});var n=i("1XBi"),a=i("fXoL"),s=i("EWJI"),r=i("ofXK"),c=i("AVD9"),o=i("3Pt+"),l=i("QlUG"),d=i("TqlK"),u=i("2I5R"),h=i("B+r4"),b=i("ocnv"),p=i("8PQF"),g=i("CzEO"),f=i("EGpF");function m(e,t){if(1&e){const e=a.Ub();a.Tb(0,"app-button-edit",14),a.ac("onClick",function(){return a.vc(e),a.dc().onEdit()}),a.Sb()}}function S(e,t){if(1&e){const e=a.Ub();a.Tb(0,"app-button-save",15),a.ac("onClick",function(){return a.vc(e),a.dc().onSave()}),a.Sb()}if(2&e){const e=a.dc();a.jc("loading",e.loading)}}const T=function(){return{height:"200px"}};function z(e,t){if(1&e&&(a.Rb(0),a.Tb(1,"nz-form-item"),a.Ob(2,"app-label-horizontal",16),a.Tb(3,"nz-form-control",17),a.Ob(4,"quill-editor",18),a.Sb(),a.Sb(),a.Qb()),2&e){const e=a.dc();a.zb(4),a.jc("readOnly",!e.isEdit)("styles",a.nc(2,T))}}function y(e,t){if(1&e&&(a.Rb(0),a.Ob(1,"app-input",19),a.Qb()),2&e){const e=a.dc();a.zb(1),a.jc("disabled",!e.isEdit)}}function C(e,t){if(1&e&&(a.Rb(0),a.Ob(1,"app-input",19),a.Qb()),2&e){const e=a.dc();a.zb(1),a.jc("disabled",!e.isEdit)}}function v(e,t){if(1&e&&(a.Rb(0),a.Tb(1,"nz-form-item"),a.Ob(2,"app-label-horizontal",16),a.Tb(3,"nz-form-control",17),a.Ob(4,"nz-switch",20),a.Sb(),a.Sb(),a.Qb()),2&e){const e=a.dc();a.zb(4),a.jc("nzDisabled",!e.isEdit)}}function w(e,t){if(1&e&&(a.Rb(0),a.Ob(1,"app-input",21),a.Qb()),2&e){const e=a.dc();a.zb(1),a.jc("disabled",!e.isEdit)}}function D(e,t){if(1&e&&(a.Rb(0),a.Ob(1,"app-input",22),a.Qb()),2&e){const e=a.dc();a.zb(1),a.jc("rows",6)("disabled",!e.isEdit)}}function I(e,t){if(1&e&&(a.Rb(0),a.Ob(1,"app-input",22),a.Qb()),2&e){const e=a.dc();a.zb(1),a.jc("rows",6)("disabled",!e.isEdit)}}var k=function(e){return e[e.String=0]="String",e[e.Int=1]="Int",e[e.Bool=2]="Bool",e[e.Decimal=3]="Decimal",e[e.DateTime=4]="DateTime",e[e.Json=5]="Json",e}({});let x=(()=>{class e extends n.a{constructor(e,t){super(e),this.settingService=t,this.SettingType=k,this.settingType=k.String}ngOnInit(){this.form=this.formBuilder.group({key:[null],name:[null],type:[null],typeLabel:[null],value:[null]}),null==this.isEdit&&(this.isEdit=!1),this.isEdit||this.form.disable(),this.disableFixedFields(),this.fetchDetail()}fetchDetail(){this.settingService.getById(this.id).toPromise().then(e=>{if(e&&!1===e.success)return void this.message.error("Error: "+e.message);const t=e&&e.data?e.data:e;t&&(this.settingType=t.type,this.form.patchValue({key:t.key,name:t.name,type:t.type,typeLabel:this.getTypeLabel(t.type),value:this.parseValue(t.value,t.type)}),this.disableFixedFields())})}onEdit(){this.isEdit=!0,this.form.enable(),this.disableFixedFields()}onCancel(){this.isModal&&this.modal.destroy()}onSave(){for(const e in this.form.controls)this.form.controls[e].markAsDirty(),this.form.controls[e].updateValueAndValidity();if(this.form.valid){const e=this.form.getRawValue(),t={id:this.id,key:e.key,name:e.name,type:this.settingType,value:this.serializeValue(e.value,this.settingType)};this.loading=!0,this.settingService.update(this.id,t).toPromise().then(e=>{this.loading=!1,e&&!1===e.success?this.message.error("Error: "+e.message):this.isModal&&(this.message.success("Update success"),this.modal.destroy({return:e}))})}}getTypeLabel(e){switch(e){case k.String:return"String";case k.Int:return"Int";case k.Bool:return"Bool";case k.Decimal:return"Decimal";case k.DateTime:return"DateTime";case k.Json:return"Json";default:return"Unknown"}}parseValue(e,t){if(null==e||""===e)return null;switch(t){case k.Int:{const t=parseInt(e,10);return Number.isNaN(t)?null:t}case k.Decimal:{const t=Number(e);return Number.isNaN(t)?null:t}case k.Bool:return"true"===e||"True"===e||"1"===e;case k.DateTime:{const t=new Date(e);return Number.isNaN(t.getTime())?null:t}case k.Json:case k.String:default:return e}}serializeValue(e,t){if(null==e||""===e)return null;switch(t){case k.Int:return Number.isFinite(e)?Math.trunc(e).toString():null;case k.Decimal:return Number.isFinite(e)?e.toString():null;case k.Bool:return e?"true":"false";case k.DateTime:{const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?null:t.toISOString()}case k.Json:case k.String:default:return e}}disableFixedFields(){this.form&&this.form.get("type")&&this.form.get("type").disable({emitEvent:!1}),this.form&&this.form.get("typeLabel")&&this.form.get("typeLabel").disable({emitEvent:!1})}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(a.r),a.Nb(s.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-detail-setting"]],features:[a.wb],decls:21,vars:15,consts:[[1,"container"],[1,"page-header"],[3,"onClick",4,"ngIf"],[3,"loading","onClick",4,"ngIf"],[3,"popConfirm","onClick"],[3,"formGroup"],["type","hidden","formControlName","type"],[1,"row"],[1,"col-md-6"],["type","text","labelContent","T\xean","formControlName","name",3,"disabled"],[1,"col-md-12"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"onClick"],[3,"loading","onClick"],["content","Value",1,"col-md-2"],[1,"col-md-10"],["formControlName","value",3,"readOnly","styles"],["type","number","labelContent","Value","formControlName","value",3,"disabled"],["formControlName","value",3,"nzDisabled"],["type","datepicker","labelContent","Value","formControlName","value",3,"disabled"],["type","textarea","labelContent","Value","formControlName","value",3,"rows","disabled"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Fc(2,m,1,0,"app-button-edit",2),a.Fc(3,S,1,1,"app-button-save",3),a.Tb(4,"app-button-cancel",4),a.ac("onClick",function(){return t.onCancel()}),a.Sb(),a.Sb(),a.Tb(5,"div"),a.Tb(6,"form",5),a.Ob(7,"input",6),a.Tb(8,"div",7),a.Tb(9,"div",8),a.Ob(10,"app-input",9),a.Sb(),a.Sb(),a.Tb(11,"div",7),a.Tb(12,"div",10),a.Rb(13,11),a.Fc(14,z,5,3,"ng-container",12),a.Fc(15,y,2,1,"ng-container",12),a.Fc(16,C,2,1,"ng-container",12),a.Fc(17,v,5,1,"ng-container",12),a.Fc(18,w,2,1,"ng-container",12),a.Fc(19,D,2,2,"ng-container",12),a.Fc(20,I,2,2,"ng-container",13),a.Qb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.zb(2),a.jc("ngIf",!t.isEdit),a.zb(1),a.jc("ngIf",t.isEdit),a.zb(1),a.jc("popConfirm",!!t.isEdit),a.zb(1),a.Bb(t.isModal?"m-t-30":""),a.zb(1),a.jc("formGroup",t.form),a.zb(4),a.jc("disabled",!t.isEdit),a.zb(3),a.jc("ngSwitch",t.settingType),a.zb(1),a.jc("ngSwitchCase",t.SettingType.String),a.zb(1),a.jc("ngSwitchCase",t.SettingType.Int),a.zb(1),a.jc("ngSwitchCase",t.SettingType.Decimal),a.zb(1),a.jc("ngSwitchCase",t.SettingType.Bool),a.zb(1),a.jc("ngSwitchCase",t.SettingType.DateTime),a.zb(1),a.jc("ngSwitchCase",t.SettingType.Json))},directives:[r.n,c.a,o.v,o.p,o.i,o.d,o.o,o.h,l.a,r.p,r.q,r.r,d.a,u.a,h.c,b.c,p.a,h.a,b.a,g.a,f.a],styles:[""]}),e})();var P=i("XlE4"),L=i("QH85"),O=i("TAm2"),E=i("k8vQ"),N=i("zAKX"),j=i("3/1E"),F=i("JA5x"),q=i("rMZv"),B=i("/SMA");function M(e,t){if(1&e&&a.Hc(0),2&e){const e=t.$implicit,i=a.dc();a.Lc(" ",i.request.pageSize*(i.request.currentPage-1)+1," -",i.request.pageSize*i.request.currentPage>e?e:i.request.pageSize*i.request.currentPage," /",e," ")}}function H(e,t){if(1&e){const e=a.Ub();a.Tb(0,"tr",17),a.ac("click",function(){a.vc(e);const i=t.$implicit;return a.dc().goToDetail(i.id)}),a.Tb(1,"td",18),a.Hc(2),a.Sb(),a.Tb(3,"td",19),a.Hc(4),a.Sb(),a.Tb(5,"td"),a.Hc(6),a.Sb(),a.Tb(7,"td"),a.Tb(8,"div",20),a.Hc(9),a.Sb(),a.Sb(),a.Tb(10,"td",21),a.ac("click",function(e){return e.stopPropagation()}),a.Tb(11,"app-circle-button-edit",4),a.ac("onClick",function(){a.vc(e);const i=t.$implicit;return a.dc().goToDetail(i.id,!0)}),a.Sb(),a.Sb(),a.Sb()}if(2&e){const e=t.index,i=t.$implicit,n=a.dc();a.zb(2),a.Ic(n.request.pageSize*(n.request.currentPage-1)+(e+1)),a.zb(2),a.Ic(i.key),a.zb(2),a.Ic(i.name),a.zb(3),a.Ic(i.value)}}let R=(()=>{class e extends P.a{constructor(e,t,i){super(e),this.modalService=t,this.settingService=i}ngOnInit(){this.fetchList()}fetchList(){const e=JSON.stringify({ListTextSearch:this.request.listTextSearch});this.isLoading=!0,this.settingService.getList(this.request.currentPage,this.request.pageSize,this.request.sort,e).toPromise().then(e=>{this.isLoading=!1,e&&e.success?(this.listData=e.data.content,this.flatList=e.data.content,this.total=e.data.totalRecords,this.parseGroup(this.listData)):this.message.error(e.message)})}reload(){this.request.currentPage=1,this.request.listTextSearch=[],this.fetchList()}getTypeLabel(e){switch(e){case 0:return"String";case 1:return"Int";case 2:return"Bool";case 3:return"Decimal";case 4:return"DateTime";case 5:return"Json";default:return"Unknown"}}goToDetail(e,t=!1){this.modalService.openDetailModal(x,e,t,"900px").afterClose.toPromise().then(e=>{e&&this.fetchList()})}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(a.r),a.Nb(L.a),a.Nb(s.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-list-setting"]],features:[a.wb],decls:35,vars:15,consts:[[1,"page-header"],[1,"row"],[1,"col-md-5"],["nz-row",""],[3,"onClick"],[1,"col-md-7"],["nzMode","tags","nzPlaceHolder","Search...",1,"w-100",3,"ngModel","ngModelChange"],[1,"col-md-12"],[1,"float-right","mr-2",3,"nzPageSize","nzPageIndex","nzShowTotal","nzTotal","nzPageSizeChange","nzPageIndexChange","nzTotalChange"],["totalTemplate",""],["nzTableLayout","fixed",1,"w-100",3,"nzData","nzFrontPagination","nzLoading","nzCurrentPageDataChange"],["rowSelectionTable",""],["nzWidth","50px",1,"center"],["nzWidth","220px"],["nzWidth","600px"],["width","120px",1,"center"],["ngFor","",3,"ngForOf"],[3,"click"],[1,"center"],[1,"text-highlight"],[1,"setting-value"],[1,"center",3,"click"]],template:function(e,t){if(1&e&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Tb(3,"div",3),a.Tb(4,"app-header-title"),a.Hc(5,"C\xe0i \u0111\u1eb7t"),a.Sb(),a.Sb(),a.Tb(6,"div",3),a.Tb(7,"app-button-reload",4),a.ac("onClick",function(){return t.reload()}),a.Sb(),a.Sb(),a.Sb(),a.Tb(8,"div",5),a.Tb(9,"div",3),a.Tb(10,"nz-select",6),a.ac("ngModelChange",function(e){return t.nzOnSearch(e)}),a.Sb(),a.Sb(),a.Tb(11,"div",1),a.Tb(12,"div",7),a.Tb(13,"nz-pagination",8),a.ac("nzPageSizeChange",function(e){return t.request.pageSize=e})("nzPageIndexChange",function(e){return t.request.currentPage=e})("nzPageIndexChange",function(e){return t.pageIndexChange(e)})("nzTotalChange",function(e){return t.total=e}),a.Sb(),a.Fc(14,M,1,3,"ng-template",null,9,a.Gc),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(16,"div",1),a.Tb(17,"div"),a.Tb(18,"nz-card"),a.Tb(19,"nz-table",10,11),a.ac("nzCurrentPageDataChange",function(e){return t.currentPageDataChange(e)}),a.Tb(21,"thead"),a.Tb(22,"tr"),a.Tb(23,"th",12),a.Hc(24,"STT"),a.Sb(),a.Tb(25,"th",13),a.Hc(26,"M\xe3"),a.Sb(),a.Tb(27,"th"),a.Hc(28,"T\xean"),a.Sb(),a.Tb(29,"th",14),a.Hc(30,"Gi\xe1 tr\u1ecb"),a.Sb(),a.Tb(31,"th",15),a.Hc(32,"Action"),a.Sb(),a.Sb(),a.Sb(),a.Tb(33,"tbody"),a.Fc(34,H,12,4,"ng-template",16),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e){const e=a.tc(15),i=a.tc(20);a.zb(10),a.jc("ngModel",t.listTextSearch),a.zb(3),a.jc("nzPageSize",t.request.pageSize)("nzPageIndex",t.request.currentPage)("nzShowTotal",e)("nzTotal",t.total),a.zb(3),a.Bb(t.isModal?"m-t-30":""),a.zb(1),a.Bb(t.isModal?"w-100 center":"col-lg-11 center"),a.zb(2),a.jc("nzData",t.listData)("nzFrontPagination",!1)("nzLoading",t.isLoading),a.zb(15),a.jc("ngForOf",i.data)}},directives:[h.c,O.a,E.a,N.b,o.o,o.r,j.a,F.a,q.b,q.j,q.k,q.a,q.h,q.e,r.m,B.a],styles:[".setting-value[_ngcontent-%COMP%]{max-width:600px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),e})();var V=i("tyNb");const J=[{path:"",component:R}];let A=(()=>{class e{}return e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({factory:function(t){return new(t||e)},imports:[[V.i.forChild(J)],V.i]}),e})();var G=i("uRpX"),Q=i("PCNd");let U=(()=>{class e{}return e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({factory:function(t){return new(t||e)},imports:[[r.c,Q.a,G.a,A,g.b]]}),e})()}}]);