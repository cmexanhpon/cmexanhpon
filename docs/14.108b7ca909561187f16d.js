(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{kk3Z:function(t,n,e){"use strict";e.r(n),e.d(n,"ClientModule",function(){return It});var i=e("Hgu+"),r=e("OpKh"),a=e("uRpX"),o=e("ofXK"),c=e("PCNd"),s=e("3Pt+"),l=e("tyNb"),b=e("mrSG"),u=e("1XBi"),d=e("AytR"),g=e("fXoL"),m=e("7VIp"),h=e("tk/3");let p=(()=>{class t{constructor(t){this.httpClient=t,this.serviceUrl=d.a.BASE_API_URL+"/api/clienttrainingprogram"}create(t){return t=Object.assign(Object.assign({},t),{fromDate:t.fromDate?Object(m.b)(t.fromDate):null,toDate:t.toDate?Object(m.b)(t.toDate):null}),this.httpClient.post(this.serviceUrl,t)}uploadFile(t){let n=new FormData;return n.append("File",t),this.httpClient.post(this.serviceUrl+"/upload-file-training-program",n)}}return t.\u0275fac=function(n){return new(n||t)(g.Xb(h.c))},t.\u0275prov=g.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=e("CFL1"),S=e("2I5R"),T=e("AVD9"),v=e("n/iK"),z=e("QlUG"),C=e("1Uxm"),y=e("IiJ/"),N=e("UQmu"),P=e("OzZK"),j=e("RwU8"),w=e("C2AL"),O=e("+oEP"),I=e("FwiY");function H(t,n){if(1&t&&(g.Tb(0,"div",19),g.Tb(1,"div",9),g.Ob(2,"app-autocomplete-training-program-subject",20),g.Sb(),g.Tb(3,"div",9),g.Ob(4,"app-input",21),g.Tb(5,"button",22),g.Hc(6,"H\u01b0\u1edbng d\u1eabn quy \u0111\u1ed5i "),g.Ob(7,"i",23),g.Sb(),g.Sb(),g.Sb()),2&t){const t=n.index,e=g.dc(),i=g.tc(18);g.jc("formGroupName",t),g.zb(2),g.jc("listData",e.listSubject),g.zb(3),g.jc("nzPopoverContent",i)}}function F(t,n){1&t&&(g.Tb(0,"div",24),g.Hc(1," 1) H\u1ed9i th\u1ea3o, h\u1ed9i ngh\u1ecb, t\u1ecda \u0111\xe0m khoa h\u1ecdc trong v\xe0 ngo\xe0i n\u01b0\u1edbc v\u1ec1 l\u0129nh v\u1ef1c chuy\xean m\xf4n y t\u1ebf c\xf3 x\xe1c nh\u1eadn c\u1ee7a \u0111\u01a1n v\u1ecb ch\u1ee7 tr\xec t\u1ed5 ch\u1ee9c c\u0103n c\u1ee9 v\xe0o ch\u01b0\u01a1ng tr\xecnh c\u1ee7a h\u1ed9i th\u1ea3o, h\u1ed9i ngh\u1ecb, t\u1ecda \u0111\xe0m: th\u1eddi gian tham gia \u0111\xe0o t\u1ea1o \u0111\u01b0\u1ee3c t\xednh cho ng\u01b0\u1eddi ch\u1ee7 tr\xec ho\u1eb7c c\xf3 b\xe0i tr\xecnh b\xe0y t\u1ed1i \u0111a 8 ti\u1ebft h\u1ecdc v\xe0 ng\u01b0\u1eddi tham d\u1ef1 t\u1ed1i \u0111a 4 ti\u1ebft h\u1ecdc cho m\u1ed7i h\u1ed9i th\u1ea3o/h\u1ed9i ngh\u1ecb/t\u1ecda \u0111\xe0m."),g.Ob(2,"br"),g.Ob(3,"br"),g.Hc(4," 2) Th\u1ef1c hi\u1ec7n nghi\xean c\u1ee9u khoa h\u1ecdc: \u0111\u01b0\u1ee3c t\xednh t\u1ed1i \u0111a 12 ti\u1ebft h\u1ecdc cho ng\u01b0\u1eddi h\u01b0\u1edbng d\u1eabn lu\u1eadn \xe1n, ch\u1ee7 tr\xec/th\u01b0 k\xfd \u0111\u1ec1 t\xe0i c\u1ea5p Nh\xe0 n\u01b0\u1edbc ho\u1eb7c c\u1ea5p B\u1ed9; 8 ti\u1ebft h\u1ecdc cho h\u01b0\u1edbng d\u1eabn lu\u1eadn v\u0103n ho\u1eb7c ch\u1ee7 tr\xec/th\u01b0 k\xfd \u0111\u1ec1 t\xe0i c\u1ea5p c\u01a1 s\u1edf (t\xednh t\u1ea1i th\u1eddi \u0111i\u1ec3m lu\u1eadn v\u0103n \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7 th\xe0nh c\xf4ng ho\u1eb7c \u0111\u1ec1 t\xe0i \u0111\u01b0\u1ee3c nghi\u1ec7m thu \u0111\u1ea1t)"),g.Ob(5,"br"),g.Ob(6,"br"),g.Hc(7," 3) Vi\u1ebft b\xe0i b\xe1o khoa h\u1ecdc \u0111\xe3 \u0111\u01b0\u1ee3c c\xf4ng b\u1ed1: \u0111\u01b0\u1ee3c t\xednh t\u1ed1i \u0111a 8 ti\u1ebft"),g.Ob(8,"br"),g.Ob(9,"br"),g.Hc(10," 4) Bi\xean so\u1ea1n gi\xe1o tr\xecnh chuy\xean m\xf4n \u0111\u01b0\u1ee3c t\xednh t\u1ed1i \u0111a kh\xf4ng qu\xe1 8 ti\u1ebft \u0111\u1ed1i v\u1edbi 1 t\xe0i li\u1ec7u do ng\u01b0\u1eddi \u0111\u1ee9ng \u0111\u1ea7u \u0111\u01a1n v\u1ecb xem x\xe9t (t\xednh v\xe0o th\u1eddi \u0111i\u1ec3m xu\u1ea5t b\u1ea3n); c\xe1n b\u1ed9 y t\u1ebf kh\xf4ng ph\u1ea3i l\xe0 gi\u1ea3ng vi\xean c\u1ee7a c\u01a1 s\u1edf gi\xe1o d\u1ee5c tham gia gi\u1ea3ng d\u1ea1y li\xean quan \u0111\u1ebfn chuy\xean m\xf4n nghi\u1ec7p v\u1ee5 \u0111\u01b0\u1ee3c t\xednh theo th\u1eddi gian th\u1ef1c t\u1ebf. "),g.Sb())}let k=(()=>{class t extends u.a{constructor(t,n,e){super(t),this.clientTrainingProgramService=n,this.userService=e,this.listSubject=[]}ngOnInit(){this.form=this.formBuilder.group({trainingFormId:[null,s.t.required],name:[null,s.t.required],code:[null],fromDate:[null],toDate:[null,s.t.required],organizationId:[null],organizationInput:[null],address:[null],note:[null],metaDataObject:this.formBuilder.group({trainingSubjects:this.formBuilder.array([])}),trainingProgram_Users:this.formBuilder.array([])}),this.addTrainingProgram_UserRow()}get trainingSubjects(){return this.form.get("metaDataObject.trainingSubjects")}addTrainingSubjectRow(t){this.trainingSubjects.push(this.createTrainingSubjectItem(t))}deleteTrainingSubjectRow(t){this.trainingSubjects.removeAt(t)}createTrainingSubjectItem(t){return this.formBuilder.group({name:[t?t.name:null,[s.t.required]],code:[t?t.code:null],order:[t?t.order:null],amount:[t?t.amount:null,[s.t.required]]})}get trainingProgram_Users(){return this.form.controls.trainingProgram_Users}addTrainingProgram_UserRow(t){this.trainingProgram_Users.push(this.createTrainingProgram_UserItem(t))}deleteTrainingProgram_UserRow(t){this.trainingProgram_Users.removeAt(t)}createTrainingProgram_UserItem(t){return this.formBuilder.group({userId:[this.tokenUser.id,[s.t.required]],trainingSubjectName:[null],pathToUploadFile:[null],amount:[4,[s.t.required]],active:[!1],hidden:[null]})}onChangeFile(t){this.uploadFile=t}onSave(){return Object(b.a)(this,void 0,void 0,function*(){for(const t in this.form.controls)this.form.controls[t].markAsDirty(),this.form.controls[t].updateValueAndValidity();for(const t in this.trainingProgram_Users.controls){const n=this.trainingProgram_Users.controls[t];for(const t in n.controls)n.controls[t].markAsDirty(),n.controls[t].updateValueAndValidity()}this.uploadFile?this.form.valid&&(this.loading=!0,yield this.clientTrainingProgramService.uploadFile(this.uploadFile).toPromise().then(t=>{if(!t||!t.success)return this.loading=!1,void this.message.error("L\u1ed7i: "+t.message);this.trainingProgram_Users.at(0).controls.pathToUploadFile.setValue(t.data),this.clientTrainingProgramService.create(this.form.value).toPromise().then(t=>{this.loading=!1,t&&t.success?this.isModal&&(this.message.success("G\u1eedi y\xeau c\u1ea7u th\xe0nh c\xf4ng, Ph\xf2ng C\u0110T s\u1ebd duy\u1ec7t trong th\u1eddi gian s\u1edbm nh\u1ea5t",{nzDuration:1e4}),this.modal.destroy(t.data)):this.message.error("L\u1ed7i: "+t.message)})})):this.message.error("Vui l\xf2ng cung c\u1ea5p file minh ch\u1ee9ng")})}get internalOrganizationId(){return d.a.INTERNAL_ORGANIZATION_ID}onCancel(){this.isModal&&this.modal.destroy()}onTrainingFormChange(t){for(this.listSubject=t.trainingSubjects;this.trainingSubjects.length;)this.trainingSubjects.removeAt(0);t&&t.trainingSubjects&&t.trainingSubjects.forEach(t=>{this.addTrainingSubjectRow(t)})}onChangeTrainingSubject(t,n){this.trainingProgram_Users.at(n).controls.amount.setValue(t.amount)}onChooseTrainingSubject(t){if(t){this.chooseForm.controls.trainingSubject.reset();for(const n in this.trainingProgram_Users.controls)this.trainingProgram_Users.controls[n].controls.trainingSubjectName.setValue(t.name)}}onDuplicateOrganization(t){this.form.controls.organizationId.setValue(t?t.id:null)}}return t.\u0275fac=function(n){return new(n||t)(g.Nb(g.r),g.Nb(p),g.Nb(f.a))},t.\u0275cmp=g.Hb({type:t,selectors:[["app-client-create-training-program"]],features:[g.wb],decls:28,vars:7,consts:[[1,"page-header"],[3,"loading","onClick"],[3,"onClick"],[3,"formGroup","keydown.enter"],[1,"row","m-t-30"],[1,"col-md-12"],["formControlName","trainingFormId","required","",3,"span","onChange"],[1,"row"],["type","text","labelContent","N\u1ed9i dung","formControlName","name","required","",3,"span"],[1,"col-md-6"],["type","datepicker","labelContent","T\u1eeb ng\xe0y","formControlName","fromDate"],["type","datepicker","labelContent","\u0110\u1ebfn ng\xe0y","formControlName","toDate","required",""],["formArrayName","trainingProgram_Users"],["class","row",3,"formGroupName",4,"ngFor","ngForOf"],["contentTemplate",""],["formControlName","organizationInput",3,"span","onDuplicate"],["type","textarea","labelContent","\u0110\u1ecba \u0111i\u1ec3m t\u1ed5 ch\u1ee9c","formControlName","address"],["type","textarea","labelContent","Ghi ch\xfa","formControlName","note"],[3,"required","onChange"],[1,"row",3,"formGroupName"],["labelContent","\u0110\u1ed1i t\u01b0\u1ee3ng","formControlName","trainingSubjectName",3,"listData"],["type","number","labelContent","S\u1ed1 ti\u1ebft quy \u0111\u1ed5i","formControlName","amount","required",""],["nz-button","","nz-popover","","nzPopoverTitle","H\u01b0\u1edbng d\u1eabn quy \u0111\u1ed5i","nzPopoverTrigger","focus",1,"float-right","m-r-10",2,"font-style","italic","color","#1890ff",3,"nzPopoverContent"],["nz-icon","","nzType","info-circle","nzTheme","outline",1,"m-l-5"],[1,"row",2,"width","500px","padding","10px"]],template:function(t,n){1&t&&(g.Tb(0,"div",0),g.Tb(1,"app-button-save",1),g.ac("onClick",function(){return n.onSave()}),g.Sb(),g.Tb(2,"app-button-cancel",2),g.ac("onClick",function(){return n.onCancel()}),g.Sb(),g.Sb(),g.Tb(3,"form",3),g.ac("keydown.enter",function(t){return t.preventDefault()}),g.Tb(4,"div",4),g.Tb(5,"div",5),g.Tb(6,"app-select-training-form",6),g.ac("onChange",function(t){return n.onTrainingFormChange(t)}),g.Sb(),g.Sb(),g.Sb(),g.Tb(7,"div",7),g.Tb(8,"div",5),g.Ob(9,"app-input",8),g.Sb(),g.Sb(),g.Tb(10,"div",7),g.Tb(11,"div",9),g.Ob(12,"app-input",10),g.Sb(),g.Tb(13,"div",9),g.Ob(14,"app-input",11),g.Sb(),g.Sb(),g.Tb(15,"form",12),g.Fc(16,H,8,3,"div",13),g.Sb(),g.Fc(17,F,11,0,"ng-template",null,14,g.Gc),g.Tb(19,"div",7),g.Tb(20,"div",5),g.Tb(21,"app-autocomplete-organization",15),g.ac("onDuplicate",function(t){return n.onDuplicateOrganization(t)}),g.Sb(),g.Sb(),g.Sb(),g.Tb(22,"div",7),g.Tb(23,"div",9),g.Ob(24,"app-input",16),g.Sb(),g.Tb(25,"div",9),g.Ob(26,"app-input",17),g.Sb(),g.Sb(),g.Sb(),g.Tb(27,"app-dnd-upload",18),g.ac("onChange",function(t){return n.onChangeFile(t)}),g.Sb()),2&t&&(g.zb(1),g.jc("loading",n.loading),g.zb(2),g.jc("formGroup",n.form),g.zb(3),g.jc("span",2),g.zb(3),g.jc("span",2),g.zb(7),g.jc("ngForOf",n.trainingProgram_Users.controls),g.zb(5),g.jc("span",2),g.zb(6),g.jc("required",!0))},directives:[S.a,T.a,s.u,s.o,s.i,v.a,s.n,s.h,s.s,z.a,s.p,s.e,o.m,C.a,y.a,s.j,N.a,P.a,j.a,w.a,O.a,I.a],styles:[""]}),t})();var D=e("GHWL"),U=e("ri4K"),x=e("D9mS"),M=e("ZE2D"),A=e("5vDB"),L=e("AvTa"),_=e("Lxo8"),q=e("LojI"),R=e("TqlK");function V(t,n){if(1&t){const t=g.Ub();g.Tb(0,"app-button-edit",28),g.ac("onClick",function(){return g.vc(t),g.dc().onEdit()}),g.Sb()}}function Y(t,n){if(1&t){const t=g.Ub();g.Tb(0,"app-button-save",29),g.ac("onClick",function(){return g.vc(t),g.dc().onSave()}),g.Sb()}if(2&t){const t=g.dc();g.jc("loading",t.loading)}}const B=function(){return{label:"Nam",value:1}},G=function(){return{label:"N\u1eef",value:0}},E=function(t,n){return[t,n]},J=function(){return{label:"Trong \u0111\u01a1n v\u1ecb Xanhpon",value:"internal"}},K=function(t){return[t]};let Q=(()=>{class t extends u.a{constructor(t,n,e){super(t),this.authenticationService=n,this.userService=e}ngOnInit(){this.form=this.formBuilder.group({username:[null],fullname:[null,s.t.required],code:[null],certificateNumber:[null,s.t.required],issueDate:[null,s.t.required],birthDate:[null],gender:[null],email:[null,s.t.email],phoneNumber:[null,s.t.pattern(D.b)],organizationId:[null],departmentId:[null],titleId:[null],avatarUrl:[null],address:[null],identificationNumber:[null],type:["internal",s.t.required]}),this.fetchDetail()}fetchDetail(){this.userService.getById(this.id).toPromise().then(t=>{t&&t.success?(this.form.patchValue(t.data),this.isEdit||setTimeout(()=>this.form.disable(),300),t.data.type||this.form.controls.type.setValue("internal"),this.avatarFileUrl=D.a+"/"+t.data.avatarUrl):this.message.error("L\u1ed7i: "+t.message)})}handleChange(t){this.avatarFile=t.file.originFileObj,this.getBase64(t.file.originFileObj,t=>{this.avatarFileUrl=t})}getBase64(t,n){const e=new FileReader;e.addEventListener("load",()=>n(e.result)),e.readAsDataURL(t)}onChangeType(t){"internal"==t?(this.form.controls.organizationId.setValue("00000000-0000-0000-0000-000000000001"),this.form.controls.organizationId.disable()):"external"==t&&(this.form.controls.organizationId.setValue(null),this.form.controls.organizationId.enable())}onEdit(){this.isEdit=!0,this.form.enable(),"internal"==this.form.value.type&&this.form.controls.organizationId.disable()}onCancel(){this.isModal&&this.modal.destroy()}onSave(){for(const t in this.form.controls)this.form.controls[t].markAsDirty(),this.form.controls[t].updateValueAndValidity();this.form.valid&&(this.loading=!0,this.form.controls.username.setValue(this.form.getRawValue().certificateNumber),this.authenticationService.updateUser(this.form.getRawValue(),this.avatarFile).toPromise().then(t=>{this.loading=!1,t&&t.success?this.isModal&&(this.message.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),this.modal.destroy(t)):this.message.error("L\u1ed7i: "+t.message)}))}}return t.\u0275fac=function(n){return new(n||t)(g.Nb(g.r),g.Nb(U.a),g.Nb(f.a))},t.\u0275cmp=g.Hb({type:t,selectors:[["app-client-edit-user"]],features:[g.wb],decls:50,vars:23,consts:[[1,"container"],[1,"page-header"],[3,"onClick",4,"ngIf"],[3,"loading","onClick",4,"ngIf"],[3,"popConfirm","onClick"],[3,"formGroup"],[1,"row"],[1,"col-xl-3"],[1,"row","m-v-20"],["nzName","avatar",1,"center",3,"nzShowUploadList","nzChange"],["nzIcon","user",3,"nzSize","nzSrc"],[1,"col-xl-9"],[1,"col-md-6"],["type","text","labelContent","H\u1ecd t\xean","formControlName","fullname","required","true"],["type","text","labelContent","M\xe3","formControlName","code"],["type","text","labelContent","S\u1ed1 CCHN","formControlName","certificateNumber","required",""],["type","datepicker","labelContent","Ng\xe0y c\u1ea5p","formControlName","issueDate","required",""],["type","datepicker","labelContent","Ng\xe0y sinh","formControlName","birthDate"],["type","radio","labelContent","Gi\u1edbi t\xednh","formControlName","gender",3,"radioData"],["type","text","labelContent","Email","formControlName","email","errorTip","Sai \u0111\u1ecbnh d\u1ea1ng email"],["type","text","labelContent","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phoneNumber","errorTip","Sai \u0111\u1ecbnh d\u1ea1ng S\u0110T"],["type","text","labelContent","S\u1ed1 CMND","formControlName","identificationNumber"],["type","textarea","labelContent","\u0110\u1ecba ch\u1ec9","formControlName","address"],[1,"col-md-12"],["type","radio","labelContent","\u0110\u1ed1i t\u01b0\u1ee3ng","formControlName","type",3,"span","radioData","onChange"],["formControlName","organizationId","required","true",3,"span"],["formControlName","departmentId",3,"organizationId"],["formControlName","titleId"],[3,"onClick"],[3,"loading","onClick"]],template:function(t,n){1&t&&(g.Tb(0,"div",0),g.Tb(1,"div",1),g.Fc(2,V,1,0,"app-button-edit",2),g.Fc(3,Y,1,1,"app-button-save",3),g.Tb(4,"app-button-cancel",4),g.ac("onClick",function(){return n.onCancel()}),g.Sb(),g.Sb(),g.Tb(5,"div"),g.Tb(6,"form",5),g.Tb(7,"div",6),g.Tb(8,"div",7),g.Tb(9,"div",8),g.Tb(10,"nz-upload",9),g.ac("nzChange",function(t){return n.isEdit?n.handleChange(t):null}),g.Ob(11,"nz-avatar",10),g.Sb(),g.Sb(),g.Sb(),g.Tb(12,"div",11),g.Tb(13,"div",6),g.Tb(14,"div",12),g.Ob(15,"app-input",13),g.Sb(),g.Tb(16,"div",12),g.Ob(17,"app-input",14),g.Sb(),g.Sb(),g.Tb(18,"div",6),g.Tb(19,"div",12),g.Ob(20,"app-input",15),g.Sb(),g.Tb(21,"div",12),g.Ob(22,"app-input",16),g.Sb(),g.Sb(),g.Tb(23,"div",6),g.Tb(24,"div",12),g.Ob(25,"app-input",17),g.Sb(),g.Tb(26,"div",12),g.Ob(27,"app-input",18),g.Sb(),g.Sb(),g.Tb(28,"div",6),g.Tb(29,"div",12),g.Ob(30,"app-input",19),g.Sb(),g.Tb(31,"div",12),g.Ob(32,"app-input",20),g.Sb(),g.Sb(),g.Tb(33,"div",6),g.Tb(34,"div",12),g.Ob(35,"app-input",21),g.Sb(),g.Tb(36,"div",12),g.Ob(37,"app-input",22),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Ob(38,"nz-divider"),g.Tb(39,"div",6),g.Tb(40,"div",23),g.Tb(41,"app-input",24),g.ac("onChange",function(t){return n.onChangeType(t)}),g.Sb(),g.Sb(),g.Sb(),g.Tb(42,"div",6),g.Tb(43,"div",23),g.Ob(44,"app-select-organization",25),g.Sb(),g.Sb(),g.Tb(45,"div",6),g.Tb(46,"div",12),g.Ob(47,"app-select-department",26),g.Sb(),g.Tb(48,"div",12),g.Ob(49,"app-select-title",27),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Sb()),2&t&&(g.zb(2),g.jc("ngIf",!n.isEdit),g.zb(1),g.jc("ngIf",n.isEdit),g.zb(1),g.jc("popConfirm",!!n.isEdit),g.zb(1),g.Bb(n.isModal?"m-t-30":""),g.zb(1),g.jc("formGroup",n.form),g.zb(4),g.jc("nzShowUploadList",!1),g.zb(1),g.jc("nzSize",200)("nzSrc",n.avatarFileUrl),g.zb(16),g.jc("radioData",g.pc(17,E,g.nc(15,B),g.nc(16,G))),g.zb(14),g.jc("span",2)("radioData",g.oc(21,K,g.nc(20,J))),g.zb(3),g.jc("span",2),g.zb(3),g.jc("organizationId",n.form.getRawValue().organizationId))},directives:[o.n,T.a,s.u,s.o,s.i,x.a,M.a,z.a,s.n,s.h,s.s,A.a,L.a,_.a,q.a,R.a,S.a],styles:[""]}),t})();var X=e("Y9CB"),Z=e("ECBP"),W=e("dEAy"),$=e("QH85"),tt=e("JA5x"),nt=e("nJia"),et=e("8+11"),it=e("k8vQ"),rt=e("gyL+"),at=e("zAKX"),ot=e("0lU3"),ct=e("rMZv"),st=e("W9fG"),lt=e("N6wO"),bt=e("b8ej"),ut=e("K143");function dt(t,n){1&t&&(g.Rb(0),g.Tb(1,"app-tag-done"),g.Hc(2,"X\xe1c nh\u1eadn"),g.Sb(),g.Qb())}function gt(t,n){1&t&&(g.Rb(0),g.Tb(1,"app-tag-danger"),g.Hc(2,"H\u1ee7y b\u1ecf"),g.Sb(),g.Qb())}function mt(t,n){1&t&&(g.Rb(0),g.Tb(1,"app-tag-not-done"),g.Hc(2,"Ch\u01b0a duy\u1ec7t"),g.Sb(),g.Qb())}function ht(t,n){if(1&t&&(g.Tb(0,"tr"),g.Tb(1,"td"),g.Hc(2),g.ec(3,"date"),g.Sb(),g.Tb(4,"td"),g.Hc(5),g.Sb(),g.Tb(6,"td"),g.Fc(7,dt,3,0,"ng-container",6),g.Fc(8,gt,3,0,"ng-container",6),g.Fc(9,mt,3,0,"ng-container",6),g.Sb(),g.Tb(10,"td"),g.Hc(11),g.Sb(),g.Sb()),2&t){const t=n.$implicit;g.zb(2),g.Ic(g.gc(3,6,t.createdOnDate,"dd/MM/yyyy")),g.zb(3),g.Ic(t.trainingProgram.name),g.zb(2),g.jc("ngIf","done"==t.trainingProgram.status||1==t.active),g.zb(1),g.jc("ngIf","cancel"==t.trainingProgram.status),g.zb(1),g.jc("ngIf",0==t.active&&"initial"==t.trainingProgram.status),g.zb(2),g.Ic(t.note)}}function pt(t,n){if(1&t&&(g.Rb(0),g.Tb(1,"nz-table",3,4),g.Tb(3,"thead"),g.Tb(4,"tr"),g.Tb(5,"th"),g.Hc(6,"Ng\xe0y g\u1eedi"),g.Sb(),g.Tb(7,"th"),g.Hc(8,"N\u1ed9i dung"),g.Sb(),g.Tb(9,"th"),g.Hc(10,"Tr\u1ea1ng th\xe1i"),g.Sb(),g.Tb(11,"th"),g.Hc(12,"L\xfd do"),g.Sb(),g.Sb(),g.Sb(),g.Tb(13,"tbody"),g.Fc(14,ht,12,9,"tr",5),g.Sb(),g.Sb(),g.Qb()),2&t){const t=g.tc(2),n=g.dc();g.zb(1),g.jc("nzData",n.listData),g.zb(13),g.jc("ngForOf",t.data)}}function ft(t,n){if(1&t){const t=g.Ub();g.Rb(0),g.Tb(1,"button",7),g.ac("click",function(){return g.vc(t),g.dc().onCancel.emit()}),g.Hc(2,"\u0110\xf3ng"),g.Sb(),g.Qb()}}let St=(()=>{class t{constructor(){this.visible=!1,this.listData=[],this.onCancel=new g.n}ngOnInit(){}openModal(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=g.Hb({type:t,selectors:[["app-client-history-request"]],inputs:{visible:"visible",listData:"listData"},outputs:{onCancel:"onCancel"},decls:3,vars:1,consts:[["nzTitle","L\u1ecbch s\u1eed g\u1eedi y\xeau c\u1ea7u",3,"nzVisible","nzVisibleChange","nzOnCancel","nzAfterOpen"],[4,"nzModalContent"],[4,"nzModalFooter"],[3,"nzData"],["basicTable",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-button","","nzType","default",3,"click"]],template:function(t,n){1&t&&(g.Tb(0,"nz-modal",0),g.ac("nzVisibleChange",function(t){return n.visible=t})("nzOnCancel",function(){return n.onCancel.emit()})("nzAfterOpen",function(){return n.openModal()}),g.Fc(1,pt,15,2,"ng-container",1),g.Fc(2,ft,3,0,"ng-container",2),g.Sb()),2&t&&g.jc("nzVisible",n.visible)},directives:[W.a,W.b,W.c,ct.b,ct.j,ct.k,ct.a,ct.h,ct.e,o.m,o.n,lt.a,bt.a,ut.a,P.a,j.a,w.a],pipes:[o.e],styles:[""]}),t})();function Tt(t,n){if(1&t&&(g.Tb(0,"tr",56),g.Tb(1,"td",57),g.Hc(2),g.Sb(),g.Tb(3,"td"),g.Hc(4),g.Sb(),g.Tb(5,"td",47),g.Hc(6),g.Sb(),g.Tb(7,"td"),g.Hc(8),g.Sb(),g.Tb(9,"td"),g.Hc(10),g.ec(11,"date"),g.Sb(),g.Tb(12,"td"),g.Hc(13),g.ec(14,"date"),g.Sb(),g.Tb(15,"td"),g.Hc(16),g.Sb(),g.Tb(17,"td",58),g.Hc(18),g.Sb(),g.Sb()),2&t){const t=n.$implicit,e=n.index;g.jc("formGroupName",e)("hidden",t.value.hidden),g.zb(2),g.Jc(" ",e+1," "),g.zb(2),g.Jc(" ",t.value.trainingFormName," "),g.zb(2),g.Jc(" ",t.value.trainingProgramName," "),g.zb(2),g.Jc(" ",t.value.organizationName," "),g.zb(2),g.Jc(" ",g.gc(11,10,t.value.fromDate,"dd/MM/yyyy")," "),g.zb(3),g.Jc(" ",g.gc(14,13,t.value.toDate,"dd/MM/yyyy")," "),g.zb(3),g.Jc(" ",t.value.trainingSubjectName," "),g.zb(2),g.Jc(" ",t.value.amount," ")}}function vt(t,n){}const zt=function(){return{standalone:!0}},Ct=function(){return["T\u1eeb n\u0103m","\u0110\u1ebfn n\u0103m"]},yt=function(t){return{color:t}},Nt=[{path:"",component:(()=>{class t extends Z.a{constructor(t,n,e,i){super(t),this.userService=n,this.nzModalService=e,this.modalService=i,this.visibleHistory=!1,this.listTrainingProgram=[],this.user=this.tokenService.get()?this.tokenService.get().user:null,this.user&&(this.avatarPath=D.a+"/"+this.user.avatarUrl),this.searchForm=this.formBuilder.group({rangeYear:[[new Date,new Date]]}),this.form=this.formBuilder.group({trainingProgram_Users:this.formBuilder.array([])}),this.fetchList()}get trainingProgram_Users(){return this.form.controls.trainingProgram_Users}addTrainingProgram_UserRow(t){this.trainingProgram_Users.push(this.createTrainingProgram_UserItem(t))}createTrainingProgram_UserItem(t){return this.formBuilder.group({trainingProgramName:[t?t.trainingProgramName:null,[s.t.required]],trainingFormName:[{value:t?t.trainingFormName:null,disabled:!0}],fromDate:[{value:t?t.fromDate:null,disabled:!0}],toDate:[{value:t?t.toDate:null,disabled:!0}],trainingSubjectName:[{value:t?t.trainingSubjectName:null,disabled:!0}],organizationName:[{value:t?t.organizationName:null,disabled:!0}],amount:[t?this.userService.calculateAmountTrainingProgram(t,this.fromYear,this.toYear):null,[s.t.required]],hidden:[!1]})}fetchList(){if(this.user.id){for(;0!==this.trainingProgram_Users.length;)this.trainingProgram_Users.removeAt(0);this.loading=!0,this.userService.getTrainingPrograms(this.user.id,this.fromYear,this.toYear).toPromise().then(t=>{this.loading=!1,t&&t.success?(this.listTrainingProgram=t.data,t.data.filter(t=>1==t.active).forEach(t=>{this.addTrainingProgram_UserRow({trainingProgramName:t.trainingProgram.name,trainingProgramCode:t.trainingProgram.trainingForm.code,trainingFormName:t.trainingProgram.trainingForm.name,fromDate:t.trainingProgram.fromDate,toDate:t.trainingProgram.toDate,trainingSubjectName:t.trainingSubjectName,amount:t.amount,organizationName:t.trainingProgram.organization?t.trainingProgram.organization.name:t.trainingProgram.organizationInput})}),this.form.disable()):this.message.error("L\u1ed7i: "+t.message)})}}onSearch(t){this.loading=!0;for(const n in this.trainingProgram_Users.controls){const e=this.trainingProgram_Users.controls[n],i=e.getRawValue();if(t.length>0){let n=!0;t.forEach(t=>{i.trainingProgramName&&i.trainingProgramName.toLowerCase().includes(t.toLowerCase())||i.trainingFormName&&i.trainingFormName.toLowerCase().includes(t.toLowerCase())||i.trainingSubjectName&&i.trainingSubjectName.toLowerCase().includes(t.toLowerCase())||i.amount&&i.amount.toString().toLowerCase().includes(t.toLowerCase())||(n=!1)}),e.controls.hidden.setValue(!n)}else e.controls.hidden.setValue(!1)}this.loading=!1}get year(){return(new Date).getFullYear()}get amoutInYear(){let t=0;return this.trainingProgram_Users.value.forEach(n=>{t+=n.amount}),t}getDepartmentAndOrganization(t,n){let e=t?t+", ":"";return e+=n||"",e}goToEdit(){this.modalService.openDetailModal(Q,this.user.id,!0,"1000px","20px").afterClose.toPromise().then(t=>{t&&(this.tokenService.updateUser(t.data),this.user=t.data,this.avatarPath=D.a+"/"+this.user.avatarUrl)})}updateUserInfo(){this.userService.updateUserInfo(this.user.id,this.form.getRawValue(),this.avatarFile).toPromise().then(t=>{t&&t.success?(this.message.remove(),this.message.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),this.tokenService.updateUser(t.data)):this.message.error("L\u1ed7i: "+t.message)})}goToCreate(){this.modalService.openCreateModal(k,"1000px","20px",!0).afterClose.toPromise().then(t=>{})}changePassword(){return this.nzModalService.create({nzTitle:"\u0110\u1ed5i m\u1eadt kh\u1ea9u",nzContent:X.a,nzComponentParams:{isModal:!0},nzFooter:null})}logout(){this.tokenService.set(null),this.router.navigateByUrl(this.tokenService.login_url)}get fromYear(){return this.searchForm.value.rangeYear[0].getFullYear()}get toYear(){return this.searchForm.value.rangeYear[1].getFullYear()}get totalAmount(){return this.searchForm.value.rangeYear?24*(this.toYear-this.fromYear+1):null}}return t.\u0275fac=function(n){return new(n||t)(g.Nb(g.r),g.Nb(f.a),g.Nb(W.f),g.Nb($.a))},t.\u0275cmp=g.Hb({type:t,selectors:[["ng-component"]],features:[g.wb],decls:118,vars:38,consts:[[1,"container-fluid","p-h-0","p-v-20","h-100","bg",2,"background-image","url('assets/images/others/login-3.png')","background-repeat","no-repeat","background-attachment","fixed"],[1,"d-flex","flex-column","justify-content-between","h-100"],[1,"d-none","d-md-block"],[1,"container",2,"margin","auto"],["id","invoice",1,"p-h-30"],[1,"m-t-15","lh-2"],[1,"row"],[1,"col-md-8"],[1,"col-md-3","center"],["nzIcon","user",3,"nzSize","nzSrc"],[1,"col-md-9"],[1,"p-l-10","m-t-20"],[1,"font-weight-bold","font-size-20","text-highlight"],[1,"icon-edit",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline","nzTooltipTitle","Thay \u0111\u1ed5i th\xf4ng tin","nzTooltipPlacement","topCenter","nz-tooltip",""],[1,"col-md-4"],[1,"float-right"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","logout","nzTheme","outline"],["nz-icon","","nzType","key","nzTheme","outline"],[1,"row","m-t-20","lh-2","justify-content-between"],[1,"p-l-10","m-t-10"],["iconType","history",3,"onClick"],[3,"onClick"],[3,"formGroup"],[1,"row","m-b-10"],["nzMode","tags","nzPlaceHolder","T\xecm ki\u1ebfm...",1,"w-100",3,"ngModel","ngModelOptions","ngModelChange"],["nzMode","year","formControlName","rangeYear",1,"w-100",3,"nzPlaceHolder","nzAllowClear","ngModelChange"],[1,"row","m-t-20"],[1,"col-sm-12"],[1,"w-100",3,"nzLoading","nzNoResult"],["dynamicTable",""],["width","30px",1,"center"],["width","170px"],["width","100px"],["width","150px"],["width","70px"],["formArrayName","trainingProgram_Users"],[3,"formGroupName","hidden",4,"ngFor","ngForOf"],["class","no-result"],["nzNoResult",""],[1,"row","m-t-30","lh-1-8"],[1,"float-right","text-right"],[3,"nzPercent","nzShowInfo","nzStrokeColor","nzStatus"],[3,"ngStyle"],[1,"m-l-5",3,"innerHTML"],[1,"font-weight-semibold","text-dark","m-t-5","m-r-10"],[1,"text-highlight"],[1,"row","m-t-30","lh-2"],[1,"row","m-v-20"],[1,"col-sm-1"],["alt","","src","assets/images/logo/logo-xanhpon.png",1,"img-fluid","text-opacity","m-t-5",2,"width","50px","height","50px"],[1,"col-sm-5","center"],[1,"m-b-0","float-left"],[1,"col-sm-6","text-right"],[3,"visible","listData","onCancel"],[3,"formGroupName","hidden"],[1,"text-center"],[1,"text-right","font-weight-semibold"]],template:function(t,n){if(1&t&&(g.Tb(0,"div",0),g.Tb(1,"div",1),g.Ob(2,"div",2),g.Tb(3,"div",3),g.Tb(4,"nz-card"),g.Tb(5,"div",4),g.Tb(6,"div",5),g.Tb(7,"div",6),g.Tb(8,"div",7),g.Tb(9,"div",6),g.Tb(10,"div",8),g.Ob(11,"nz-avatar",9),g.Sb(),g.Tb(12,"div",10),g.Tb(13,"address",11),g.Tb(14,"span",12),g.Hc(15),g.ec(16,"uppercase"),g.Sb(),g.Tb(17,"span",13),g.ac("click",function(){return n.goToEdit()}),g.Ob(18,"i",14),g.Hc(19," Ch\u1ec9nh s\u1eeda "),g.Sb(),g.Ob(20,"br"),g.Tb(21,"span"),g.Hc(22,"S\u1ed1 CCHN: "),g.Tb(23,"strong"),g.Hc(24),g.Sb(),g.Sb(),g.Ob(25,"br"),g.Tb(26,"span"),g.Hc(27,"N\u0103m c\u1ea5p: "),g.Tb(28,"strong"),g.Hc(29),g.ec(30,"date"),g.Sb(),g.Sb(),g.Ob(31,"br"),g.Tb(32,"span"),g.Hc(33,"Khoa/ph\xf2ng: "),g.Tb(34,"strong"),g.Hc(35),g.Sb(),g.Sb(),g.Ob(36,"br"),g.Tb(37,"span"),g.Hc(38,"Ch\u1ee9c v\u1ee5: "),g.Tb(39,"strong"),g.Hc(40),g.Sb(),g.Sb(),g.Ob(41,"br"),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Tb(42,"div",15),g.Tb(43,"div",16),g.Tb(44,"button",17),g.ac("click",function(){return n.logout()}),g.Ob(45,"i",18),g.Hc(46," \u0110\u0103ng xu\u1ea5t"),g.Sb(),g.Sb(),g.Tb(47,"div",16),g.Tb(48,"button",17),g.ac("click",function(){return n.changePassword()}),g.Ob(49,"i",19),g.Hc(50," \u0110\u1ed5i m\u1eadt kh\u1ea9u"),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Tb(51,"div",20),g.Tb(52,"h3",21),g.Hc(53,"Ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o \u0111\xe3 tham gia"),g.Sb(),g.Tb(54,"div"),g.Tb(55,"app-button-base",22),g.ac("onClick",function(){return n.visibleHistory=!0}),g.Hc(56,"L\u1ecbch s\u1eed"),g.Sb(),g.Tb(57,"app-button-reload",23),g.ac("onClick",function(){return n.fetchList()}),g.Sb(),g.Tb(58,"app-button-create",23),g.ac("onClick",function(){return n.goToCreate()}),g.Sb(),g.Sb(),g.Sb(),g.Tb(59,"form",24),g.Tb(60,"div",25),g.Tb(61,"div",7),g.Tb(62,"nz-select",26),g.ac("ngModelChange",function(t){return n.onSearch(t)}),g.Sb(),g.Sb(),g.Tb(63,"div",15),g.Tb(64,"nz-range-picker",27),g.ac("ngModelChange",function(){return n.fetchList()}),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Tb(65,"div",28),g.Tb(66,"div",29),g.Tb(67,"form",24),g.Tb(68,"nz-table",30,31),g.Tb(70,"thead"),g.Tb(71,"tr"),g.Tb(72,"th",32),g.Hc(73,"STT"),g.Sb(),g.Tb(74,"th",33),g.Hc(75,"H\xecnh th\u1ee9c \u0111\xe0o t\u1ea1o"),g.Sb(),g.Tb(76,"th"),g.Hc(77,"N\u1ed9i dung"),g.Sb(),g.Tb(78,"th",33),g.Hc(79,"\u0110\u01a1n v\u1ecb t\u1ed5 ch\u1ee9c"),g.Sb(),g.Tb(80,"th",34),g.Hc(81,"T\u1eeb ng\xe0y"),g.Sb(),g.Tb(82,"th",34),g.Hc(83,"\u0110\u1ebfn ng\xe0y"),g.Sb(),g.Tb(84,"th",35),g.Hc(85,"\u0110\u1ed1i t\u01b0\u1ee3ng"),g.Sb(),g.Tb(86,"th",36),g.Hc(87,"Quy \u0111\u1ed5i"),g.Sb(),g.Sb(),g.Sb(),g.Tb(88,"tbody",37),g.Fc(89,Tt,19,16,"tr",38),g.Sb(),g.Sb(),g.Fc(90,vt,0,0,"ng-template",39,40,g.Gc),g.Sb(),g.Tb(92,"div",41),g.Tb(93,"div",29),g.Tb(94,"div",42),g.Tb(95,"p"),g.Ob(96,"nz-progress",43),g.Tb(97,"strong"),g.Hc(98),g.Sb(),g.Hc(99),g.Tb(100,"span",44),g.Hc(101),g.Sb(),g.Ob(102,"span",45),g.Sb(),g.Tb(103,"h3"),g.Tb(104,"span",46),g.Hc(105,"T\u1ed5ng s\u1ed1 ti\u1ebft:"),g.Sb(),g.Tb(106,"span",47),g.Hc(107),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Tb(108,"div",48),g.Ob(109,"div",29),g.Sb(),g.Tb(110,"div",49),g.Tb(111,"div",50),g.Ob(112,"img",51),g.Sb(),g.Tb(113,"div",52),g.Tb(114,"p",53),g.Hc(115),g.Sb(),g.Sb(),g.Ob(116,"div",54),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Tb(117,"app-client-history-request",55),g.ac("onCancel",function(){return n.visibleHistory=!1}),g.Sb()),2&t){const t=g.tc(91);g.zb(11),g.jc("nzSize",150)("nzSrc",n.avatarFileUrl?n.avatarFileUrl:n.avatarPath?n.avatarPath:null),g.zb(4),g.Ic(g.fc(16,29,n.user.fullname)),g.zb(9),g.Ic(n.user.certificateNumber),g.zb(5),g.Ic(g.gc(30,31,n.user.issueDate,"dd/MM/yyyy")),g.zb(6),g.Ic(n.getDepartmentAndOrganization(null==n.user.department?null:n.user.department.name,null==n.user.organization?null:n.user.organization.name)),g.zb(5),g.Ic(null==n.user.title?null:n.user.title.name),g.zb(19),g.jc("formGroup",n.searchForm),g.zb(3),g.jc("ngModel",n.listTextSearch)("ngModelOptions",g.nc(34,zt)),g.zb(2),g.jc("nzPlaceHolder",g.nc(35,Ct))("nzAllowClear",!1),g.zb(3),g.jc("formGroup",n.form),g.zb(1),g.jc("nzLoading",n.loading)("nzNoResult",t),g.zb(21),g.jc("ngForOf",n.trainingProgram_Users.controls),g.zb(7),g.jc("nzPercent",n.amoutInYear/n.totalAmount*100)("nzShowInfo",n.userService.showInfo(n.amoutInYear,n.totalAmount))("nzStrokeColor",n.userService.getColor(n.amoutInYear,n.totalAmount))("nzStatus",n.userService.getStatus(n.amoutInYear,n.totalAmount)),g.zb(2),g.Ic(n.amoutInYear),g.zb(1),g.Jc("/",n.totalAmount," - "),g.zb(1),g.jc("ngStyle",g.oc(36,yt,n.userService.getColor(n.amoutInYear,n.totalAmount))),g.zb(1),g.Ic(n.userService.getTextStatus(n.amoutInYear,n.totalAmount)),g.zb(1),g.jc("innerHTML",n.userService.getHtmlRemain(n.amoutInYear,n.totalAmount),g.wc),g.zb(5),g.Jc(" ",n.amoutInYear,""),g.zb(8),g.Jc("Copyright \xa9 ",n.year,". All rights reserved."),g.zb(2),g.jc("visible",n.visibleHistory)("listData",n.listTrainingProgram)}},directives:[tt.a,M.a,w.a,I.a,nt.d,P.a,j.a,et.a,it.a,rt.a,s.u,s.o,s.i,at.b,s.n,s.q,ot.b,ot.d,s.h,ct.b,ct.j,ct.k,ct.a,ct.h,ct.e,s.e,o.m,st.a,o.o,St,s.j],pipes:[o.w,o.e],styles:[".icon-edit[_ngcontent-%COMP%]{margin-left:10px;color:#72849a}.icon-edit[_ngcontent-%COMP%]:hover{color:#2f54eb;cursor:pointer}"]}),t})()}];let Pt=(()=>{class t{}return t.\u0275mod=g.Lb({type:t}),t.\u0275inj=g.Kb({factory:function(n){return new(n||t)},imports:[[l.i.forChild(Nt)],l.i]}),t})();var jt=e("hMaZ"),wt=e("jdXR"),Ot=e("el8y");let It=(()=>{class t{}return t.\u0275mod=g.Lb({type:t}),t.\u0275inj=g.Kb({factory:function(n){return new(n||t)},imports:[[o.c,c.a,s.r,a.a,Pt,r.AuthenticationModule,Ot.TitleModule,wt.OrganizationModule,jt.DepartmentModule,i.TrainingFormModule]]}),t})()}}]);