"use strict";(self.webpackChunkcme_management=self.webpackChunkcme_management||[]).push([[333],{43333:(Mt,C,r)=>{r.r(C),r.d(C,{ClientModule:()=>Jt});var N=r(19802),P=r(84998),S=r(42979),g=r(38583),B=r(76231),a=r(90665),T=r(63423),F=r(64762),v=r(78545),A=r(92340),t=r(37716),_=r(16157),I=r(91841);let x=(()=>{class o{constructor(n){this.httpClient=n,this.serviceUrl=A.N.BASE_API_URL+"/api/clienttrainingprogram"}create(n){return n=Object.assign(Object.assign({},n),{fromDate:n.fromDate?(0,_.kB)(n.fromDate):null,toDate:n.toDate?(0,_.kB)(n.toDate):null}),this.httpClient.post(this.serviceUrl,n)}uploadFile(n){let e=new FormData;return e.append("File",n),this.httpClient.post(this.serviceUrl+"/upload-file-training-program",e)}}return o.\u0275fac=function(n){return new(n||o)(t.LFG(I.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var h=r(9709),U=r(76122),D=r(75930),J=r(53371),z=r(40228),M=r(62507),O=r(32833),j=r(63654),Z=r(14453),E=r(29374),f=r(84514),Y=r(52496),q=r(66630);function Q(o,u){if(1&o&&(t.TgZ(0,"div",19),t.TgZ(1,"div",9),t._UZ(2,"app-autocomplete-training-program-subject",20),t.qZA(),t.TgZ(3,"div",9),t._UZ(4,"app-input",21),t.TgZ(5,"button",22),t._uU(6,"H\u01b0\u1edbng d\u1eabn quy \u0111\u1ed5i "),t._UZ(7,"i",23),t.qZA(),t.qZA(),t.qZA()),2&o){const n=u.index,e=t.oxw(),i=t.MAs(18);t.Q6J("formGroupName",n),t.xp6(2),t.Q6J("listData",e.listSubject),t.xp6(3),t.Q6J("nzPopoverContent",i)}}function R(o,u){1&o&&(t.TgZ(0,"div",24),t._uU(1," 1) H\u1ed9i th\u1ea3o, h\u1ed9i ngh\u1ecb, t\u1ecda \u0111\xe0m khoa h\u1ecdc trong v\xe0 ngo\xe0i n\u01b0\u1edbc v\u1ec1 l\u0129nh v\u1ef1c chuy\xean m\xf4n y t\u1ebf c\xf3 x\xe1c nh\u1eadn c\u1ee7a \u0111\u01a1n v\u1ecb ch\u1ee7 tr\xec t\u1ed5 ch\u1ee9c c\u0103n c\u1ee9 v\xe0o ch\u01b0\u01a1ng tr\xecnh c\u1ee7a h\u1ed9i th\u1ea3o, h\u1ed9i ngh\u1ecb, t\u1ecda \u0111\xe0m: th\u1eddi gian tham gia \u0111\xe0o t\u1ea1o \u0111\u01b0\u1ee3c t\xednh cho ng\u01b0\u1eddi ch\u1ee7 tr\xec ho\u1eb7c c\xf3 b\xe0i tr\xecnh b\xe0y t\u1ed1i \u0111a 8 ti\u1ebft h\u1ecdc v\xe0 ng\u01b0\u1eddi tham d\u1ef1 t\u1ed1i \u0111a 4 ti\u1ebft h\u1ecdc cho m\u1ed7i h\u1ed9i th\u1ea3o/h\u1ed9i ngh\u1ecb/t\u1ecda \u0111\xe0m."),t._UZ(2,"br"),t._UZ(3,"br"),t._uU(4," 2) Th\u1ef1c hi\u1ec7n nghi\xean c\u1ee9u khoa h\u1ecdc: \u0111\u01b0\u1ee3c t\xednh t\u1ed1i \u0111a 12 ti\u1ebft h\u1ecdc cho ng\u01b0\u1eddi h\u01b0\u1edbng d\u1eabn lu\u1eadn \xe1n, ch\u1ee7 tr\xec/th\u01b0 k\xfd \u0111\u1ec1 t\xe0i c\u1ea5p Nh\xe0 n\u01b0\u1edbc ho\u1eb7c c\u1ea5p B\u1ed9; 8 ti\u1ebft h\u1ecdc cho h\u01b0\u1edbng d\u1eabn lu\u1eadn v\u0103n ho\u1eb7c ch\u1ee7 tr\xec/th\u01b0 k\xfd \u0111\u1ec1 t\xe0i c\u1ea5p c\u01a1 s\u1edf (t\xednh t\u1ea1i th\u1eddi \u0111i\u1ec3m lu\u1eadn v\u0103n \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7 th\xe0nh c\xf4ng ho\u1eb7c \u0111\u1ec1 t\xe0i \u0111\u01b0\u1ee3c nghi\u1ec7m thu \u0111\u1ea1t)"),t._UZ(5,"br"),t._UZ(6,"br"),t._uU(7," 3) Vi\u1ebft b\xe0i b\xe1o khoa h\u1ecdc \u0111\xe3 \u0111\u01b0\u1ee3c c\xf4ng b\u1ed1: \u0111\u01b0\u1ee3c t\xednh t\u1ed1i \u0111a 8 ti\u1ebft"),t._UZ(8,"br"),t._UZ(9,"br"),t._uU(10," 4) Bi\xean so\u1ea1n gi\xe1o tr\xecnh chuy\xean m\xf4n \u0111\u01b0\u1ee3c t\xednh t\u1ed1i \u0111a kh\xf4ng qu\xe1 8 ti\u1ebft \u0111\u1ed1i v\u1edbi 1 t\xe0i li\u1ec7u do ng\u01b0\u1eddi \u0111\u1ee9ng \u0111\u1ea7u \u0111\u01a1n v\u1ecb xem x\xe9t (t\xednh v\xe0o th\u1eddi \u0111i\u1ec3m xu\u1ea5t b\u1ea3n); c\xe1n b\u1ed9 y t\u1ebf kh\xf4ng ph\u1ea3i l\xe0 gi\u1ea3ng vi\xean c\u1ee7a c\u01a1 s\u1edf gi\xe1o d\u1ee5c tham gia gi\u1ea3ng d\u1ea1y li\xean quan \u0111\u1ebfn chuy\xean m\xf4n nghi\u1ec7p v\u1ee5 \u0111\u01b0\u1ee3c t\xednh theo th\u1eddi gian th\u1ef1c t\u1ebf. "),t.qZA())}let L=(()=>{class o extends v.l{constructor(n,e,i){super(n),this.clientTrainingProgramService=e,this.userService=i,this.listSubject=[]}ngOnInit(){this.form=this.formBuilder.group({trainingFormId:[null,a.kI.required],name:[null,a.kI.required],code:[null],fromDate:[null],toDate:[null,a.kI.required],organizationId:[null],organizationInput:[null],address:[null],note:[null],metaDataObject:this.formBuilder.group({trainingSubjects:this.formBuilder.array([])}),trainingProgram_Users:this.formBuilder.array([])}),this.addTrainingProgram_UserRow()}get trainingSubjects(){return this.form.get("metaDataObject.trainingSubjects")}addTrainingSubjectRow(n){this.trainingSubjects.push(this.createTrainingSubjectItem(n))}deleteTrainingSubjectRow(n){this.trainingSubjects.removeAt(n)}createTrainingSubjectItem(n){return this.formBuilder.group({name:[n?n.name:null,[a.kI.required]],code:[n?n.code:null],order:[n?n.order:null],amount:[n?n.amount:null,[a.kI.required]]})}get trainingProgram_Users(){return this.form.controls.trainingProgram_Users}addTrainingProgram_UserRow(n){this.trainingProgram_Users.push(this.createTrainingProgram_UserItem(n))}deleteTrainingProgram_UserRow(n){this.trainingProgram_Users.removeAt(n)}createTrainingProgram_UserItem(n){return this.formBuilder.group({userId:[this.tokenUser.id,[a.kI.required]],trainingSubjectName:[null],pathToUploadFile:[null],amount:[4,[a.kI.required]],active:[!1],hidden:[null]})}onChangeFile(n){this.uploadFile=n}onSave(){return(0,F.mG)(this,void 0,void 0,function*(){this.message.error("Service b\u1ecb l\u1ed7i. H\xe3y li\xean h\u1ec7 qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng \u0111\u1ec3 x\u1eed l\xfd")})}get internalOrganizationId(){return A.N.INTERNAL_ORGANIZATION_ID}onCancel(){this.isModal&&this.modal.destroy()}onTrainingFormChange(n){for(this.listSubject=n.trainingSubjects;this.trainingSubjects.length;)this.trainingSubjects.removeAt(0);n&&n.trainingSubjects&&n.trainingSubjects.forEach(e=>{this.addTrainingSubjectRow(e)})}onChangeTrainingSubject(n,e){this.trainingProgram_Users.at(e).controls.amount.setValue(n.amount)}onChooseTrainingSubject(n){if(n){this.chooseForm.controls.trainingSubject.reset();for(const e in this.trainingProgram_Users.controls)this.trainingProgram_Users.controls[e].controls.trainingSubjectName.setValue(n.name)}}onDuplicateOrganization(n){this.form.controls.organizationId.setValue(n?n.id:null)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(t.zs3),t.Y36(x),t.Y36(h.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-client-create-training-program"]],features:[t.qOj],decls:28,vars:7,consts:[[1,"page-header"],[3,"loading","onClick"],[3,"onClick"],[3,"formGroup","keydown.enter"],[1,"row","m-t-30"],[1,"col-md-12"],["formControlName","trainingFormId","required","",3,"span","onChange"],[1,"row"],["type","text","labelContent","N\u1ed9i dung","formControlName","name","required","",3,"span"],[1,"col-md-6"],["type","datepicker","labelContent","T\u1eeb ng\xe0y","formControlName","fromDate"],["type","datepicker","labelContent","\u0110\u1ebfn ng\xe0y","formControlName","toDate","required",""],["formArrayName","trainingProgram_Users"],["class","row",3,"formGroupName",4,"ngFor","ngForOf"],["contentTemplate",""],["formControlName","organizationInput",3,"span","onDuplicate"],["type","textarea","labelContent","\u0110\u1ecba \u0111i\u1ec3m t\u1ed5 ch\u1ee9c","formControlName","address"],["type","textarea","labelContent","Ghi ch\xfa","formControlName","note"],[3,"required","onChange"],[1,"row",3,"formGroupName"],["labelContent","\u0110\u1ed1i t\u01b0\u1ee3ng","formControlName","trainingSubjectName",3,"listData"],["type","number","labelContent","S\u1ed1 ti\u1ebft quy \u0111\u1ed5i","formControlName","amount","required",""],["nz-button","","nz-popover","","nzPopoverTitle","H\u01b0\u1edbng d\u1eabn quy \u0111\u1ed5i","nzPopoverTrigger","focus",1,"float-right","m-r-10",2,"font-style","italic","color","#1890ff",3,"nzPopoverContent"],["nz-icon","","nzType","info-circle","nzTheme","outline",1,"m-l-5"],[1,"row",2,"width","500px","padding","10px"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"app-button-save",1),t.NdJ("onClick",function(){return e.onSave()}),t.qZA(),t.TgZ(2,"app-button-cancel",2),t.NdJ("onClick",function(){return e.onCancel()}),t.qZA(),t.qZA(),t.TgZ(3,"form",3),t.NdJ("keydown.enter",function(l){return l.preventDefault()}),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"app-select-training-form",6),t.NdJ("onChange",function(l){return e.onTrainingFormChange(l)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",7),t.TgZ(8,"div",5),t._UZ(9,"app-input",8),t.qZA(),t.qZA(),t.TgZ(10,"div",7),t.TgZ(11,"div",9),t._UZ(12,"app-input",10),t.qZA(),t.TgZ(13,"div",9),t._UZ(14,"app-input",11),t.qZA(),t.qZA(),t.TgZ(15,"form",12),t.YNc(16,Q,8,3,"div",13),t.qZA(),t.YNc(17,R,11,0,"ng-template",null,14,t.W1O),t.TgZ(19,"div",7),t.TgZ(20,"div",5),t.TgZ(21,"app-autocomplete-organization",15),t.NdJ("onDuplicate",function(l){return e.onDuplicateOrganization(l)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",7),t.TgZ(23,"div",9),t._UZ(24,"app-input",16),t.qZA(),t.TgZ(25,"div",9),t._UZ(26,"app-input",17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"app-dnd-upload",18),t.NdJ("onChange",function(l){return e.onChangeFile(l)}),t.qZA()),2&n&&(t.xp6(1),t.Q6J("loading",e.loading),t.xp6(2),t.Q6J("formGroup",e.form),t.xp6(3),t.Q6J("span",2),t.xp6(3),t.Q6J("span",2),t.xp6(7),t.Q6J("ngForOf",e.trainingProgram_Users.controls),t.xp6(5),t.Q6J("span",2),t.xp6(6),t.Q6J("required",!0))},directives:[U.U,D.x,a._Y,a.JL,a.sg,J.g,a.JJ,a.u,a.Q7,z.a,a.F,a.CE,g.sg,M.T,O.J,a.x0,j.P,Z.ix,E.dQ,f.w,Y.lU,q.Ls],styles:[""]}),o})();var m=r(69526),w=r(97020),H=r(44788),y=r(55329),V=r(83385),G=r(31136),X=r(21454),K=r(65354),$=r(30462);function W(o,u){if(1&o){const n=t.EpF();t.TgZ(0,"app-button-edit",28),t.NdJ("onClick",function(){return t.CHM(n),t.oxw().onEdit()}),t.qZA()}}function tt(o,u){if(1&o){const n=t.EpF();t.TgZ(0,"app-button-save",29),t.NdJ("onClick",function(){return t.CHM(n),t.oxw().onSave()}),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("loading",n.loading)}}const nt=function(){return{label:"Nam",value:1}},et=function(){return{label:"N\u1eef",value:0}},ot=function(o,u){return[o,u]},rt=function(){return{label:"Trong \u0111\u01a1n v\u1ecb Xanhpon",value:"internal"}},it=function(o){return[o]};let at=(()=>{class o extends v.l{constructor(n,e,i){super(n),this.authenticationService=e,this.userService=i,this.beforeUpload=l=>(this.avatarFile=l,this.getBase64(l,d=>{this.avatarFileUrl=d}),!1)}ngOnInit(){this.form=this.formBuilder.group({username:[null],fullname:[null,a.kI.required],code:[null],certificateNumber:[null,a.kI.required],issueDate:[null,a.kI.required],birthDate:[null],gender:[null],email:[null,a.kI.email],phoneNumber:[null,a.kI.pattern(m.d0)],organizationId:[null],departmentId:[null],titleId:[null],avatarUrl:[null],address:[null],identificationNumber:[null],type:["internal",a.kI.required]}),this.fetchDetail()}fetchDetail(){this.userService.getById(this.id).toPromise().then(n=>{n&&n.success?(this.form.patchValue(n.data),this.isEdit||setTimeout(()=>this.form.disable(),300),n.data.type||this.form.controls.type.setValue("internal"),this.avatarFileUrl=m.I+"/"+n.data.avatarUrl):this.message.error("L\u1ed7i: "+n.message)})}getBase64(n,e){const i=new FileReader;i.addEventListener("load",()=>e(i.result)),i.readAsDataURL(n)}onChangeType(n){"internal"==n?(this.form.controls.organizationId.setValue("00000000-0000-0000-0000-000000000001"),this.form.controls.organizationId.disable()):"external"==n&&(this.form.controls.organizationId.setValue(null),this.form.controls.organizationId.enable())}onEdit(){this.isEdit=!0,this.form.enable(),"internal"==this.form.value.type&&this.form.controls.organizationId.disable()}onCancel(){this.isModal&&this.modal.destroy()}onSave(){for(const n in this.form.controls)this.form.controls[n].markAsDirty(),this.form.controls[n].updateValueAndValidity();this.form.valid&&(this.loading=!0,this.form.controls.username.setValue(this.form.getRawValue().certificateNumber),this.authenticationService.updateUser(this.form.getRawValue(),this.avatarFile).toPromise().then(n=>{this.loading=!1,n&&n.success?this.isModal&&(this.message.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),this.modal.destroy(n)):this.message.error("L\u1ed7i: "+n.message)}))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(t.zs3),t.Y36(w.$),t.Y36(h.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-client-edit-user"]],features:[t.qOj],decls:50,vars:24,consts:[[1,"container"],[1,"page-header"],[3,"onClick",4,"ngIf"],[3,"loading","onClick",4,"ngIf"],[3,"popConfirm","onClick"],[3,"formGroup"],[1,"row"],[1,"col-xl-3"],[1,"row","m-v-20"],["nzName","avatar",1,"center",3,"nzShowUploadList","nzBeforeUpload"],["nzIcon","user",3,"nzSize","nzSrc"],[1,"col-xl-9"],[1,"col-md-6"],["type","text","labelContent","H\u1ecd t\xean","formControlName","fullname","required","true"],["type","text","labelContent","M\xe3","formControlName","code"],["type","text","labelContent","S\u1ed1 CCHN","formControlName","certificateNumber","required",""],["type","datepicker","labelContent","Ng\xe0y c\u1ea5p","formControlName","issueDate","required",""],["type","datepicker","labelContent","Ng\xe0y sinh","formControlName","birthDate"],["type","radio","labelContent","Gi\u1edbi t\xednh","formControlName","gender",3,"radioData"],["type","text","labelContent","Email","formControlName","email","errorTip","Sai \u0111\u1ecbnh d\u1ea1ng email"],["type","text","labelContent","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phoneNumber","errorTip","Sai \u0111\u1ecbnh d\u1ea1ng S\u0110T"],["type","text","labelContent","S\u1ed1 CMND","formControlName","identificationNumber"],["type","textarea","labelContent","\u0110\u1ecba ch\u1ec9","formControlName","address"],[1,"col-md-12"],["type","radio","labelContent","\u0110\u1ed1i t\u01b0\u1ee3ng","formControlName","type",3,"span","radioData","onChange"],["formControlName","organizationId","required","true",3,"span"],["formControlName","departmentId",3,"organizationId"],["formControlName","titleId"],[3,"onClick"],[3,"loading","onClick"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,W,1,0,"app-button-edit",2),t.YNc(3,tt,1,1,"app-button-save",3),t.TgZ(4,"app-button-cancel",4),t.NdJ("onClick",function(){return e.onCancel()}),t.qZA(),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"form",5),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"nz-upload",9),t._UZ(11,"nz-avatar",10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",11),t.TgZ(13,"div",6),t.TgZ(14,"div",12),t._UZ(15,"app-input",13),t.qZA(),t.TgZ(16,"div",12),t._UZ(17,"app-input",14),t.qZA(),t.qZA(),t.TgZ(18,"div",6),t.TgZ(19,"div",12),t._UZ(20,"app-input",15),t.qZA(),t.TgZ(21,"div",12),t._UZ(22,"app-input",16),t.qZA(),t.qZA(),t.TgZ(23,"div",6),t.TgZ(24,"div",12),t._UZ(25,"app-input",17),t.qZA(),t.TgZ(26,"div",12),t._UZ(27,"app-input",18),t.qZA(),t.qZA(),t.TgZ(28,"div",6),t.TgZ(29,"div",12),t._UZ(30,"app-input",19),t.qZA(),t.TgZ(31,"div",12),t._UZ(32,"app-input",20),t.qZA(),t.qZA(),t.TgZ(33,"div",6),t.TgZ(34,"div",12),t._UZ(35,"app-input",21),t.qZA(),t.TgZ(36,"div",12),t._UZ(37,"app-input",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(38,"nz-divider"),t.TgZ(39,"div",6),t.TgZ(40,"div",23),t.TgZ(41,"app-input",24),t.NdJ("onChange",function(l){return e.onChangeType(l)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",6),t.TgZ(43,"div",23),t._UZ(44,"app-select-organization",25),t.qZA(),t.qZA(),t.TgZ(45,"div",6),t.TgZ(46,"div",12),t._UZ(47,"app-select-department",26),t.qZA(),t.TgZ(48,"div",12),t._UZ(49,"app-select-title",27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngIf",!e.isEdit),t.xp6(1),t.Q6J("ngIf",e.isEdit),t.xp6(1),t.Q6J("popConfirm",!!e.isEdit),t.xp6(1),t.Tol(e.isModal?"m-t-30":""),t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(4),t.Q6J("nzShowUploadList",!1)("nzBeforeUpload",e.beforeUpload),t.xp6(1),t.Q6J("nzSize",200)("nzSrc",e.avatarFileUrl),t.xp6(16),t.Q6J("radioData",t.WLB(18,ot,t.DdM(16,nt),t.DdM(17,et))),t.xp6(14),t.Q6J("span",2)("radioData",t.VKq(22,it,t.DdM(21,rt))),t.xp6(3),t.Q6J("span",2),t.xp6(3),t.Q6J("organizationId",e.form.getRawValue().organizationId))},directives:[g.O5,D.x,a._Y,a.JL,a.sg,H.FY,y.Dz,z.a,a.JJ,a.u,a.Q7,V.g,G.m,X._,K.W,$.D,U.U],styles:[""]}),o})();var ut=r(7330),lt=r(97013),c=r(26214),st=r(19493),gt=r(17018),mt=r(47420),ct=r(40308),dt=r(55039),pt=r(4079),ht=r(80269),b=r(99418),s=r(31618),Zt=r(82281),Et=r(85928),ft=r(58966),Ct=r(92019);function Tt(o,u){1&o&&(t.ynx(0),t.TgZ(1,"app-tag-done"),t._uU(2,"X\xe1c nh\u1eadn"),t.qZA(),t.BQk())}function vt(o,u){1&o&&(t.ynx(0),t.TgZ(1,"app-tag-danger"),t._uU(2,"H\u1ee7y b\u1ecf"),t.qZA(),t.BQk())}function At(o,u){1&o&&(t.ynx(0),t.TgZ(1,"app-tag-not-done"),t._uU(2,"Ch\u01b0a duy\u1ec7t"),t.qZA(),t.BQk())}function _t(o,u){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t.YNc(7,Tt,3,0,"ng-container",6),t.YNc(8,vt,3,0,"ng-container",6),t.YNc(9,At,3,0,"ng-container",6),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.qZA()),2&o){const n=u.$implicit;t.xp6(2),t.Oqu(t.xi3(3,6,n.createdOnDate,"dd/MM/yyyy")),t.xp6(3),t.Oqu(n.trainingProgram.name),t.xp6(2),t.Q6J("ngIf","done"==n.trainingProgram.status||1==n.active),t.xp6(1),t.Q6J("ngIf","cancel"==n.trainingProgram.status),t.xp6(1),t.Q6J("ngIf",0==n.active&&"initial"==n.trainingProgram.status),t.xp6(2),t.Oqu(n.note)}}function Ut(o,u){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-table",3,4),t.TgZ(3,"thead"),t.TgZ(4,"tr"),t.TgZ(5,"th"),t._uU(6,"Ng\xe0y g\u1eedi"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"N\u1ed9i dung"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Tr\u1ea1ng th\xe1i"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"L\xfd do"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"tbody"),t.YNc(14,_t,12,9,"tr",5),t.qZA(),t.qZA(),t.BQk()),2&o){const n=t.MAs(2),e=t.oxw();t.xp6(1),t.Q6J("nzData",e.listData),t.xp6(13),t.Q6J("ngForOf",n.data)}}function Dt(o,u){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(n),t.oxw().onCancel.emit()}),t._uU(2,"\u0110\xf3ng"),t.qZA(),t.BQk()}}let zt=(()=>{class o{constructor(){this.visible=!1,this.listData=[],this.onCancel=new t.vpe}ngOnInit(){}openModal(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-client-history-request"]],inputs:{visible:"visible",listData:"listData"},outputs:{onCancel:"onCancel"},decls:3,vars:1,consts:[["nzTitle","L\u1ecbch s\u1eed g\u1eedi y\xeau c\u1ea7u",3,"nzVisible","nzVisibleChange","nzOnCancel","nzAfterOpen"],[4,"nzModalContent"],[4,"nzModalFooter"],[3,"nzData"],["basicTable",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-button","","nzType","default",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"nz-modal",0),t.NdJ("nzVisibleChange",function(l){return e.visible=l})("nzOnCancel",function(){return e.onCancel.emit()})("nzAfterOpen",function(){return e.openModal()}),t.YNc(1,Ut,15,2,"ng-container",1),t.YNc(2,Dt,3,0,"ng-container",2),t.qZA()),2&n&&t.Q6J("nzVisible",e.visible)},directives:[c.du,c.Hf,c.Uh,s.N8,s.Om,s.$Z,s.Uo,s._C,s.p0,g.sg,g.O5,Et.i,ft.s,Ct.g,Z.ix,E.dQ,f.w],pipes:[g.uU],styles:[""]}),o})();function qt(o,u){if(1&o&&(t.TgZ(0,"tr",56),t.TgZ(1,"td",57),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",47),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td",58),t._uU(18),t.qZA(),t.qZA()),2&o){const n=u.$implicit,e=u.index;t.Q6J("formGroupName",e)("hidden",n.value.hidden),t.xp6(2),t.hij(" ",e+1," "),t.xp6(2),t.hij(" ",n.value.trainingFormName," "),t.xp6(2),t.hij(" ",n.value.trainingProgramName," "),t.xp6(2),t.hij(" ",n.value.organizationName," "),t.xp6(2),t.hij(" ",t.xi3(11,10,n.value.fromDate,"dd/MM/yyyy")," "),t.xp6(3),t.hij(" ",t.xi3(14,13,n.value.toDate,"dd/MM/yyyy")," "),t.xp6(3),t.hij(" ",n.value.trainingSubjectName," "),t.xp6(2),t.hij(" ",n.value.amount," ")}}function yt(o,u){}const bt=function(){return{standalone:!0}},Nt=function(){return["T\u1eeb n\u0103m","\u0110\u1ebfn n\u0103m"]},Pt=function(o){return{color:o}},St=[{path:"",component:(()=>{class o extends lt.H{constructor(n,e,i,l){super(n),this.userService=e,this.nzModalService=i,this.modalService=l,this.visibleHistory=!1,this.listTrainingProgram=[],this.user=this.tokenService.get()?this.tokenService.get().user:null,this.user&&(this.avatarPath=m.I+"/"+this.user.avatarUrl),this.searchForm=this.formBuilder.group({rangeYear:[[new Date,new Date]]}),this.form=this.formBuilder.group({trainingProgram_Users:this.formBuilder.array([])}),this.fetchList()}get trainingProgram_Users(){return this.form.controls.trainingProgram_Users}addTrainingProgram_UserRow(n){this.trainingProgram_Users.push(this.createTrainingProgram_UserItem(n))}createTrainingProgram_UserItem(n){return this.formBuilder.group({trainingProgramName:[n?n.trainingProgramName:null,[a.kI.required]],trainingFormName:[{value:n?n.trainingFormName:null,disabled:!0}],fromDate:[{value:n?n.fromDate:null,disabled:!0}],toDate:[{value:n?n.toDate:null,disabled:!0}],trainingSubjectName:[{value:n?n.trainingSubjectName:null,disabled:!0}],organizationName:[{value:n?n.organizationName:null,disabled:!0}],amount:[n?this.userService.calculateAmountTrainingProgram(n,this.fromYear,this.toYear):null,[a.kI.required]],hidden:[!1]})}fetchList(){if(this.user.id){for(;0!==this.trainingProgram_Users.length;)this.trainingProgram_Users.removeAt(0);this.loading=!0,this.userService.getTrainingPrograms(this.user.id,this.fromYear,this.toYear).toPromise().then(n=>{this.loading=!1,n&&n.success?(this.listTrainingProgram=n.data,n.data.filter(e=>1==e.active).forEach(e=>{this.addTrainingProgram_UserRow({trainingProgramName:e.trainingProgram.name,trainingProgramCode:e.trainingProgram.trainingForm.code,trainingFormName:e.trainingProgram.trainingForm.name,fromDate:e.trainingProgram.fromDate,toDate:e.trainingProgram.toDate,trainingSubjectName:e.trainingSubjectName,amount:e.amount,organizationName:e.trainingProgram.organization?e.trainingProgram.organization.name:e.trainingProgram.organizationInput})}),this.form.disable()):this.message.error("L\u1ed7i: "+n.message)})}}onSearch(n){this.loading=!0;for(const e in this.trainingProgram_Users.controls){const i=this.trainingProgram_Users.controls[e],l=i.getRawValue();if(n.length>0){let d=!0;n.forEach(p=>{l.trainingProgramName&&l.trainingProgramName.toLowerCase().includes(p.toLowerCase())||l.trainingFormName&&l.trainingFormName.toLowerCase().includes(p.toLowerCase())||l.trainingSubjectName&&l.trainingSubjectName.toLowerCase().includes(p.toLowerCase())||l.amount&&l.amount.toString().toLowerCase().includes(p.toLowerCase())||(d=!1)}),i.controls.hidden.setValue(!d)}else i.controls.hidden.setValue(!1)}this.loading=!1}get year(){return(new Date).getFullYear()}get amoutInYear(){let n=0;return this.trainingProgram_Users.value.forEach(e=>{n+=e.amount}),n}getDepartmentAndOrganization(n,e){let i=n?n+", ":"";return i+=e||"",i}goToEdit(){this.modalService.openDetailModal(at,this.user.id,!0,"1000px","20px").afterClose.toPromise().then(e=>{e&&(this.tokenService.updateUser(e.data),this.user=e.data,this.avatarPath=m.I+"/"+this.user.avatarUrl)})}updateUserInfo(){this.userService.updateUserInfo(this.user.id,this.form.getRawValue(),this.avatarFile).toPromise().then(n=>{n&&n.success?(this.message.remove(),this.message.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),this.tokenService.updateUser(n.data)):this.message.error("L\u1ed7i: "+n.message)})}goToCreate(){this.modalService.openCreateModal(L,"1000px","20px",!0).afterClose.toPromise().then(e=>{})}changePassword(){return this.nzModalService.create({nzTitle:"\u0110\u1ed5i m\u1eadt kh\u1ea9u",nzContent:ut.p,nzComponentParams:{isModal:!0},nzFooter:null})}logout(){this.tokenService.set(null),this.router.navigateByUrl(this.tokenService.login_url)}get fromYear(){return this.searchForm.value.rangeYear[0].getFullYear()}get toYear(){return this.searchForm.value.rangeYear[1].getFullYear()}get totalAmount(){return this.searchForm.value.rangeYear?24*(this.toYear-this.fromYear+1):null}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(t.zs3),t.Y36(h.K),t.Y36(c.Sf),t.Y36(st.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],features:[t.qOj],decls:118,vars:38,consts:[[1,"container-fluid","p-h-0","p-v-20","h-100","bg",2,"background-image","url('assets/images/others/login-3.png')","background-repeat","no-repeat","background-attachment","fixed"],[1,"d-flex","flex-column","justify-content-between","h-100"],[1,"d-none","d-md-block"],[1,"container",2,"margin","auto"],["id","invoice",1,"p-h-30"],[1,"m-t-15","lh-2"],[1,"row"],[1,"col-md-8"],[1,"col-md-3","center"],["nzIcon","user",3,"nzSize","nzSrc"],[1,"col-md-9"],[1,"p-l-10","m-t-20"],[1,"font-weight-bold","font-size-20","text-highlight"],[1,"icon-edit",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline","nzTooltipTitle","Thay \u0111\u1ed5i th\xf4ng tin","nzTooltipPlacement","topCenter","nz-tooltip",""],[1,"col-md-4"],[1,"float-right"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","logout","nzTheme","outline"],["nz-icon","","nzType","key","nzTheme","outline"],[1,"row","m-t-20","lh-2","justify-content-between"],[1,"p-l-10","m-t-10"],["iconType","history",3,"onClick"],[3,"onClick"],[3,"formGroup"],[1,"row","m-b-10"],["nzMode","tags","nzPlaceHolder","T\xecm ki\u1ebfm...",1,"w-100",3,"ngModel","ngModelOptions","ngModelChange"],["nzMode","year","formControlName","rangeYear",1,"w-100",3,"nzPlaceHolder","nzAllowClear","ngModelChange"],[1,"row","m-t-20"],[1,"col-sm-12"],[1,"w-100",3,"nzLoading","nzNoResult"],["dynamicTable",""],["width","30px",1,"center"],["width","170px"],["width","100px"],["width","150px"],["width","70px"],["formArrayName","trainingProgram_Users"],[3,"formGroupName","hidden",4,"ngFor","ngForOf"],["class","no-result"],["nzNoResult",""],[1,"row","m-t-30","lh-1-8"],[1,"float-right","text-right"],[3,"nzPercent","nzShowInfo","nzStrokeColor","nzStatus"],[3,"ngStyle"],[1,"m-l-5",3,"innerHTML"],[1,"font-weight-semibold","text-dark","m-t-5","m-r-10"],[1,"text-highlight"],[1,"row","m-t-30","lh-2"],[1,"row","m-v-20"],[1,"col-sm-1"],["alt","","src","assets/images/logo/logo-xanhpon.png",1,"img-fluid","text-opacity","m-t-5",2,"width","50px","height","50px"],[1,"col-sm-5","center"],[1,"m-b-0","float-left"],[1,"col-sm-6","text-right"],[3,"visible","listData","onCancel"],[3,"formGroupName","hidden"],[1,"text-center"],[1,"text-right","font-weight-semibold"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"nz-card"),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"div",6),t.TgZ(10,"div",8),t._UZ(11,"nz-avatar",9),t.qZA(),t.TgZ(12,"div",10),t.TgZ(13,"address",11),t.TgZ(14,"span",12),t._uU(15),t.ALo(16,"uppercase"),t.qZA(),t.TgZ(17,"span",13),t.NdJ("click",function(){return e.goToEdit()}),t._UZ(18,"i",14),t._uU(19," Ch\u1ec9nh s\u1eeda "),t.qZA(),t._UZ(20,"br"),t.TgZ(21,"span"),t._uU(22,"S\u1ed1 CCHN: "),t.TgZ(23,"strong"),t._uU(24),t.qZA(),t.qZA(),t._UZ(25,"br"),t.TgZ(26,"span"),t._uU(27,"N\u0103m c\u1ea5p: "),t.TgZ(28,"strong"),t._uU(29),t.ALo(30,"date"),t.qZA(),t.qZA(),t._UZ(31,"br"),t.TgZ(32,"span"),t._uU(33,"Khoa/ph\xf2ng: "),t.TgZ(34,"strong"),t._uU(35),t.qZA(),t.qZA(),t._UZ(36,"br"),t.TgZ(37,"span"),t._uU(38,"Ch\u1ee9c v\u1ee5: "),t.TgZ(39,"strong"),t._uU(40),t.qZA(),t.qZA(),t._UZ(41,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",15),t.TgZ(43,"div",16),t.TgZ(44,"button",17),t.NdJ("click",function(){return e.logout()}),t._UZ(45,"i",18),t._uU(46," \u0110\u0103ng xu\u1ea5t"),t.qZA(),t.qZA(),t.TgZ(47,"div",16),t.TgZ(48,"button",17),t.NdJ("click",function(){return e.changePassword()}),t._UZ(49,"i",19),t._uU(50," \u0110\u1ed5i m\u1eadt kh\u1ea9u"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div",20),t.TgZ(52,"h3",21),t._uU(53,"Ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o \u0111\xe3 tham gia"),t.qZA(),t.TgZ(54,"div"),t.TgZ(55,"app-button-base",22),t.NdJ("onClick",function(){return e.visibleHistory=!0}),t._uU(56,"L\u1ecbch s\u1eed"),t.qZA(),t.TgZ(57,"app-button-reload",23),t.NdJ("onClick",function(){return e.fetchList()}),t.qZA(),t.TgZ(58,"app-button-create",23),t.NdJ("onClick",function(){return e.goToCreate()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"form",24),t.TgZ(60,"div",25),t.TgZ(61,"div",7),t.TgZ(62,"nz-select",26),t.NdJ("ngModelChange",function(l){return e.onSearch(l)}),t.qZA(),t.qZA(),t.TgZ(63,"div",15),t.TgZ(64,"nz-range-picker",27),t.NdJ("ngModelChange",function(){return e.fetchList()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"div",28),t.TgZ(66,"div",29),t.TgZ(67,"form",24),t.TgZ(68,"nz-table",30,31),t.TgZ(70,"thead"),t.TgZ(71,"tr"),t.TgZ(72,"th",32),t._uU(73,"STT"),t.qZA(),t.TgZ(74,"th",33),t._uU(75,"H\xecnh th\u1ee9c \u0111\xe0o t\u1ea1o"),t.qZA(),t.TgZ(76,"th"),t._uU(77,"N\u1ed9i dung"),t.qZA(),t.TgZ(78,"th",33),t._uU(79,"\u0110\u01a1n v\u1ecb t\u1ed5 ch\u1ee9c"),t.qZA(),t.TgZ(80,"th",34),t._uU(81,"T\u1eeb ng\xe0y"),t.qZA(),t.TgZ(82,"th",34),t._uU(83,"\u0110\u1ebfn ng\xe0y"),t.qZA(),t.TgZ(84,"th",35),t._uU(85,"\u0110\u1ed1i t\u01b0\u1ee3ng"),t.qZA(),t.TgZ(86,"th",36),t._uU(87,"Quy \u0111\u1ed5i"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"tbody",37),t.YNc(89,qt,19,16,"tr",38),t.qZA(),t.qZA(),t.YNc(90,yt,0,0,"ng-template",39,40,t.W1O),t.qZA(),t.TgZ(92,"div",41),t.TgZ(93,"div",29),t.TgZ(94,"div",42),t.TgZ(95,"p"),t._UZ(96,"nz-progress",43),t.TgZ(97,"strong"),t._uU(98),t.qZA(),t._uU(99),t.TgZ(100,"span",44),t._uU(101),t.qZA(),t._UZ(102,"span",45),t.qZA(),t.TgZ(103,"h3"),t.TgZ(104,"span",46),t._uU(105,"T\u1ed5ng s\u1ed1 ti\u1ebft:"),t.qZA(),t.TgZ(106,"span",47),t._uU(107),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(108,"div",48),t._UZ(109,"div",29),t.qZA(),t.TgZ(110,"div",49),t.TgZ(111,"div",50),t._UZ(112,"img",51),t.qZA(),t.TgZ(113,"div",52),t.TgZ(114,"p",53),t._uU(115),t.qZA(),t.qZA(),t._UZ(116,"div",54),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(117,"app-client-history-request",55),t.NdJ("onCancel",function(){return e.visibleHistory=!1}),t.qZA()),2&n){const i=t.MAs(91);t.xp6(11),t.Q6J("nzSize",150)("nzSrc",e.avatarFileUrl?e.avatarFileUrl:e.avatarPath?e.avatarPath:null),t.xp6(4),t.Oqu(t.lcZ(16,29,e.user.fullname)),t.xp6(9),t.Oqu(e.user.certificateNumber),t.xp6(5),t.Oqu(t.xi3(30,31,e.user.issueDate,"dd/MM/yyyy")),t.xp6(6),t.Oqu(e.getDepartmentAndOrganization(null==e.user.department?null:e.user.department.name,null==e.user.organization?null:e.user.organization.name)),t.xp6(5),t.Oqu(null==e.user.title?null:e.user.title.name),t.xp6(19),t.Q6J("formGroup",e.searchForm),t.xp6(3),t.Q6J("ngModel",e.listTextSearch)("ngModelOptions",t.DdM(34,bt)),t.xp6(2),t.Q6J("nzPlaceHolder",t.DdM(35,Nt))("nzAllowClear",!1),t.xp6(3),t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("nzLoading",e.loading)("nzNoResult",i),t.xp6(21),t.Q6J("ngForOf",e.trainingProgram_Users.controls),t.xp6(7),t.Q6J("nzPercent",e.amoutInYear/e.totalAmount*100)("nzShowInfo",e.userService.showInfo(e.amoutInYear,e.totalAmount))("nzStrokeColor",e.userService.getColor(e.amoutInYear,e.totalAmount))("nzStatus",e.userService.getStatus(e.amoutInYear,e.totalAmount)),t.xp6(2),t.Oqu(e.amoutInYear),t.xp6(1),t.hij("/",e.totalAmount," - "),t.xp6(1),t.Q6J("ngStyle",t.VKq(36,Pt,e.userService.getColor(e.amoutInYear,e.totalAmount))),t.xp6(1),t.Oqu(e.userService.getTextStatus(e.amoutInYear,e.totalAmount)),t.xp6(1),t.Q6J("innerHTML",e.userService.getHtmlRemain(e.amoutInYear,e.totalAmount),t.oJD),t.xp6(5),t.hij(" ",e.amoutInYear,""),t.xp6(8),t.hij("Copyright \xa9 ",e.year,". All rights reserved."),t.xp6(2),t.Q6J("visible",e.visibleHistory)("listData",e.listTrainingProgram)}},directives:[gt.bd,y.Dz,f.w,q.Ls,mt.SY,Z.ix,E.dQ,ct.f,dt.O,pt.E,a._Y,a.JL,a.sg,ht.Vq,a.JJ,a.On,b.uw,b.wS,a.u,s.N8,s.Om,s.$Z,s.Uo,s._C,s.p0,a.CE,g.sg,Zt.M,g.PC,zt,a.x0],pipes:[g.gd,g.uU],styles:[".icon-edit[_ngcontent-%COMP%]{margin-left:10px;color:#72849a}.icon-edit[_ngcontent-%COMP%]:hover{color:#2f54eb;cursor:pointer}"]}),o})()}];let Bt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[T.Bz.forChild(St)],T.Bz]}),o})();var Ft=r(32564),It=r(13306),xt=r(88194);let Jt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.ez,B.m,a.UX,S.j,Bt,P.AuthenticationModule,xt.TitleModule,It.OrganizationModule,Ft.DepartmentModule,N.TrainingFormModule]]}),o})()}}]);