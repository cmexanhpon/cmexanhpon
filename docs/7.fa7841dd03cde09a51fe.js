(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"259m":function(e,t,n){"use strict";n.d(t,"a",function(){return Be});var a=n("GHWL"),i=n("yrJp"),o=n("XlE4"),r=n("AytR"),c=n("3Pt+"),l=n("1XBi"),s=n("fXoL"),b=n("CFL1"),d=n("ofXK"),u=n("AVD9"),p=n("8+11"),h=n("D9mS"),m=n("ZE2D"),g=n("QlUG"),f=n("5vDB"),S=n("AvTa"),z=n("Lxo8"),C=n("LojI"),T=n("TqlK"),v=n("2I5R");function I(e,t){if(1&e){const e=s.Ub();s.Tb(0,"app-button-edit",30),s.ac("onClick",function(){return s.sc(e),s.dc().onEdit()}),s.Sb()}}function y(e,t){if(1&e){const e=s.Ub();s.Tb(0,"app-button-save",31),s.ac("onClick",function(){return s.sc(e),s.dc().onSave()}),s.Sb()}if(2&e){const e=s.dc();s.jc("loading",e.loading)}}const N=function(){return{label:"Nam",value:1}},x=function(){return{label:"N\u1eef",value:0}},j=function(e,t){return[e,t]},k=function(){return{label:"Trong \u0111\u01a1n v\u1ecb",value:"internal"}},w=function(e){return[e]};let E=(()=>{class e extends l.a{constructor(e,t){super(e),this.userService=t}ngOnInit(){this.form=this.formBuilder.group({username:[null],fullname:[null,c.t.required],code:[null],certificateNumber:[null,c.t.required],issueDate:[null,c.t.required],birthDate:[null],gender:[null],email:[null,c.t.email],phoneNumber:[null,c.t.pattern(a.b)],organizationId:[null],departmentId:[null],titleId:[null],avatarUrl:[null],address:[null],identificationNumber:[null],type:["internal",c.t.required]}),this.fetchDetail()}fetchDetail(){this.userService.getById(this.id).toPromise().then(e=>{e&&e.success?(this.form.patchValue(e.data),this.isEdit||setTimeout(()=>this.form.disable(),300),this.avatarFileUrl=a.a+"/"+e.data.avatarUrl):this.message.error("L\u1ed7i: "+e.message)})}handleChange(e){this.avatarFile=e.file.originFileObj,this.getBase64(e.file.originFileObj,e=>{this.avatarFileUrl=e})}getBase64(e,t){const n=new FileReader;n.addEventListener("load",()=>t(n.result)),n.readAsDataURL(e)}onChangeType(e){"internal"==e?(this.form.controls.organizationId.setValue(r.a.INTERNAL_ORGANIZATION_ID),this.form.controls.organizationId.disable(),this.form.controls.certificateNumber.setValidators([c.t.required]),this.form.controls.issueDate.setValidators([c.t.required])):"external"==e&&(this.form.controls.organizationId.setValue(null),this.form.controls.organizationId.enable(),this.form.controls.certificateNumber.setValidators([]),this.form.controls.issueDate.setValidators([]))}onEdit(){this.isEdit=!0,this.form.enable(),"internal"==this.form.value.type&&this.form.controls.organizationId.disable()}onCancel(){this.isModal&&this.modal.destroy()}onSave(){for(const e in this.form.controls)this.form.controls[e].markAsDirty(),this.form.controls[e].updateValueAndValidity();this.form.valid&&(this.loading=!0,this.form.controls.username.setValue(this.form.getRawValue().certificateNumber),this.userService.update(this.id,this.form.getRawValue(),this.avatarFile).toPromise().then(e=>{this.loading=!1,e&&e.success?this.isModal&&(this.message.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),this.modal.destroy({return:e})):this.message.error("L\u1ed7i: "+e.message)}))}resetPassword(){this.userService.resetPassword(this.id).toPromise().then(e=>{this.loading=!1,e&&e.success?this.isModal&&this.message.success("\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng"):this.message.error("L\u1ed7i: "+e.message)})}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(s.r),s.Nb(b.a))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-detail-user"]],features:[s.wb],decls:55,vars:26,consts:[[1,"container"],[1,"page-header"],[1,"row","justify-content-between"],[3,"onClick",4,"ngIf"],[3,"loading","onClick",4,"ngIf"],[3,"popConfirm","onClick"],["iconType","redo",3,"popConfirm","onClick"],[3,"formGroup"],[1,"row"],[1,"col-xl-3"],[1,"row","m-v-20"],["nzName","avatar",1,"center",3,"nzShowUploadList","nzChange"],["nzIcon","user",3,"nzSize","nzSrc"],[1,"col-xl-9"],[1,"col-md-6"],["type","text","labelContent","H\u1ecd t\xean","formControlName","fullname","required","true"],["type","text","labelContent","M\xe3","formControlName","code"],["type","text","labelContent","S\u1ed1 CCHN","formControlName","certificateNumber",3,"required"],["type","datepicker","labelContent","Ng\xe0y c\u1ea5p","formControlName","issueDate",3,"required"],["type","datepicker","labelContent","Ng\xe0y sinh","formControlName","birthDate"],["type","radio","labelContent","Gi\u1edbi t\xednh","formControlName","gender",3,"radioData"],["type","text","labelContent","Email","formControlName","email","errorTip","Sai \u0111\u1ecbnh d\u1ea1ng email"],["type","text","labelContent","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phoneNumber","errorTip","Sai \u0111\u1ecbnh d\u1ea1ng S\u0110T"],["type","text","labelContent","S\u1ed1 CMND","formControlName","identificationNumber"],["type","textarea","labelContent","\u0110\u1ecba ch\u1ec9","formControlName","address"],[1,"col-md-12"],["type","radio","labelContent","\u0110\u1ed1i t\u01b0\u1ee3ng","formControlName","type",3,"span","radioData","onChange"],["formControlName","organizationId","required","true",3,"span"],["formControlName","departmentId",3,"organizationId"],["formControlName","titleId"],[3,"onClick"],[3,"loading","onClick"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Tb(3,"div"),s.Cc(4,I,1,0,"app-button-edit",3),s.Cc(5,y,1,1,"app-button-save",4),s.Tb(6,"app-button-cancel",5),s.ac("onClick",function(){return t.onCancel()}),s.Sb(),s.Sb(),s.Tb(7,"div"),s.Tb(8,"app-button-base",6),s.ac("onClick",function(){return t.resetPassword()}),s.Ec(9,"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u"),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(10,"div"),s.Tb(11,"form",7),s.Tb(12,"div",8),s.Tb(13,"div",9),s.Tb(14,"div",10),s.Tb(15,"nz-upload",11),s.ac("nzChange",function(e){return t.isEdit?t.handleChange(e):null}),s.Ob(16,"nz-avatar",12),s.Sb(),s.Sb(),s.Sb(),s.Tb(17,"div",13),s.Tb(18,"div",8),s.Tb(19,"div",14),s.Ob(20,"app-input",15),s.Sb(),s.Tb(21,"div",14),s.Ob(22,"app-input",16),s.Sb(),s.Sb(),s.Tb(23,"div",8),s.Tb(24,"div",14),s.Ob(25,"app-input",17),s.Sb(),s.Tb(26,"div",14),s.Ob(27,"app-input",18),s.Sb(),s.Sb(),s.Tb(28,"div",8),s.Tb(29,"div",14),s.Ob(30,"app-input",19),s.Sb(),s.Tb(31,"div",14),s.Ob(32,"app-input",20),s.Sb(),s.Sb(),s.Tb(33,"div",8),s.Tb(34,"div",14),s.Ob(35,"app-input",21),s.Sb(),s.Tb(36,"div",14),s.Ob(37,"app-input",22),s.Sb(),s.Sb(),s.Tb(38,"div",8),s.Tb(39,"div",14),s.Ob(40,"app-input",23),s.Sb(),s.Tb(41,"div",14),s.Ob(42,"app-input",24),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Ob(43,"nz-divider"),s.Tb(44,"div",8),s.Tb(45,"div",25),s.Tb(46,"app-input",26),s.ac("onChange",function(e){return t.onChangeType(e)}),s.Sb(),s.Sb(),s.Sb(),s.Tb(47,"div",8),s.Tb(48,"div",25),s.Ob(49,"app-select-organization",27),s.Sb(),s.Sb(),s.Tb(50,"div",8),s.Tb(51,"div",14),s.Ob(52,"app-select-department",28),s.Sb(),s.Tb(53,"div",14),s.Ob(54,"app-select-title",29),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.zb(4),s.jc("ngIf",!t.isEdit),s.zb(1),s.jc("ngIf",t.isEdit),s.zb(1),s.jc("popConfirm",!!t.isEdit),s.zb(2),s.jc("popConfirm",!0),s.zb(2),s.Bb(t.isModal?"m-t-30":""),s.zb(1),s.jc("formGroup",t.form),s.zb(4),s.jc("nzShowUploadList",!1),s.zb(1),s.jc("nzSize",200)("nzSrc",t.avatarFileUrl),s.zb(9),s.jc("required","internal"==t.form.value.type),s.zb(2),s.jc("required","internal"==t.form.value.type),s.zb(5),s.jc("radioData",s.nc(20,j,s.lc(18,N),s.lc(19,x))),s.zb(14),s.jc("span",2)("radioData",s.mc(24,w,s.lc(23,k))),s.zb(3),s.jc("span",2),s.zb(3),s.jc("organizationId",t.form.getRawValue().organizationId))},directives:[d.n,u.a,p.a,c.u,c.o,c.i,h.a,m.a,g.a,c.n,c.h,c.s,f.a,S.a,z.a,C.a,T.a,v.a],styles:[""]}),e})();var O=n("QH85"),D=n("B+r4"),P=n("TAm2"),F=n("k8vQ"),L=n("zAKX"),M=n("bE2y"),V=n("C2AL"),U=n("FwiY"),q=n("3/1E"),A=n("8X1I"),H=n("7VIp"),G=n("tk/3");let R=(()=>{class e{constructor(e){this.httpClient=e,this.serviceUrl=r.a.BASE_API_URL+"/api/import"}import(e,t){let n=Object(H.e)(e);return t&&n.append("File",t),this.httpClient.post(this.serviceUrl+"/import-user",n)}}return e.\u0275fac=function(t){return new(t||e)(s.Xb(G.c))},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var B=n("dEAy"),Y=n("IiJ/");function _(e,t){if(1&e){const e=s.Ub();s.Tb(0,"form",3),s.Tb(1,"div",4),s.Tb(2,"div",5),s.Ob(3,"app-input",6),s.Sb(),s.Ob(4,"div",7),s.Sb(),s.Tb(5,"app-dnd-upload",8),s.ac("onChangeFile",function(t){return s.sc(e),s.dc().onChangeFile(t)}),s.Sb(),s.Tb(6,"div",4),s.Tb(7,"div",5),s.Tb(8,"span",9),s.Ec(9),s.Sb(),s.Sb(),s.Sb(),s.Sb()}if(2&e){const e=s.dc();s.jc("formGroup",e.form),s.zb(3),s.jc("span",2),s.zb(1),s.jc("nzSpan",8),s.zb(5),s.Fc(e.errorMessage)}}function $(e,t){if(1&e){const e=s.Ub();s.Tb(0,"app-button-base",10),s.ac("onClick",function(){return s.sc(e),s.dc().handleImport()}),s.Ec(1," Import "),s.Sb(),s.Tb(2,"app-button-cancel",11),s.ac("onClick",function(){return s.sc(e),s.dc().handleCancel()}),s.Sb()}if(2&e){const e=s.dc();s.jc("popConfirm",!0)("okText","\u0110\u1ed3ng \xfd")("cancelText","H\u1ee7y b\u1ecf")("confirmTitle","T\u1ea5t c\u1ea3 d\u1eef li\u1ec7u c\u0169 s\u1ebd b\u1ecb thay th\u1ebf! B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n th\u1ef1c hi\u1ec7n")("loading",e.loading),s.zb(2),s.jc("popConfirm",!1)}}let X=(()=>{class e extends A.a{constructor(e,t){super(e),this.importService=t}ngOnInit(){this.form=this.formBuilder.group({sheetName:["2019-2020- 2021 (B\u1ecf h\u1ed9 l\xfd)",[c.t.required]]})}openModal(){this.file=null}onChangeFile(e){this.file=e}handleCancel(){this.onCancel.emit()}handleImport(){for(const e in this.form.controls)this.form.controls[e].markAsDirty(),this.form.controls[e].updateValueAndValidity();this.file?this.form.valid&&(this.loading=!0,this.importService.import(this.form.value,this.file).toPromise().then(e=>{this.loading=!1,e&&e.success?(this.message.success("Import th\xe0nh c\xf4ng"),this.handleCancel()):this.errorMessage="L\u1ed7i: "+e.message})):this.message.error("Ch\u01b0a ch\u1ecdn file")}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(s.r),s.Nb(R))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-import-user"]],features:[s.wb],decls:4,vars:5,consts:[["nzTitle","Import Excel",3,"nzVisible","nzFooter","nzWidth","nzVisibleChange","nzAfterOpen"],[3,"formGroup",4,"ngIf"],["modalFooter",""],[3,"formGroup"],[1,"row"],[1,"col-md-12"],["type","text","labelContent","T\xean Sheet","formControlName","sheetName","required","",3,"span"],["nz-col","",3,"nzSpan"],[3,"onChangeFile"],[2,"color","red"],["buttonType","primary","iconType","import",3,"popConfirm","okText","cancelText","confirmTitle","loading","onClick"],[3,"popConfirm","onClick"]],template:function(e,t){if(1&e&&(s.Tb(0,"nz-modal",0),s.ac("nzVisibleChange",function(e){return t.isVisible=e})("nzAfterOpen",function(){return t.openModal()}),s.Cc(1,_,10,4,"form",1),s.Sb(),s.Cc(2,$,3,6,"ng-template",null,2,s.Dc)),2&e){const e=s.rc(3);s.jc("nzVisible",t.isVisible)("nzFooter",e)("nzWidth",750)("nzFooter",e),s.zb(1),s.jc("ngIf",t.isVisible)}},directives:[B.a,d.n,c.u,c.o,c.i,g.a,c.n,c.h,c.s,D.a,Y.a,p.a,u.a],styles:[""]}),e})();var Q=n("rMZv"),K=n("W9fG");function W(e,t){if(1&e&&(s.Tb(0,"div",25),s.Tb(1,"div",26),s.Tb(2,"div",27),s.Tb(3,"nz-upload",28),s.Tb(4,"nz-avatar",29),s.Ec(5,">"),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(6,"div",30),s.Tb(7,"div",25),s.Tb(8,"div",31),s.Ob(9,"app-input",32),s.Sb(),s.Tb(10,"div",31),s.Ob(11,"app-input",33),s.Sb(),s.Sb(),s.Tb(12,"div",25),s.Tb(13,"div",31),s.Ob(14,"app-input",34),s.Sb(),s.Tb(15,"div",31),s.Ob(16,"app-input",35),s.Sb(),s.Sb(),s.Tb(17,"div",25),s.Tb(18,"div",31),s.Ob(19,"app-input",36),s.Sb(),s.Tb(20,"div",31),s.Ob(21,"app-input",37),s.Sb(),s.Sb(),s.Tb(22,"div",25),s.Tb(23,"div",31),s.Ob(24,"app-input",38),s.Sb(),s.Tb(25,"div",31),s.Ob(26,"app-input",39),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e){const e=s.dc();s.zb(3),s.jc("nzShowUploadList",!1),s.zb(1),s.kc("nzSrc",e.user.avatarUrl?e.avatarPath+"/"+e.user.avatarUrl:""),s.jc("nzSize",150),s.zb(5),s.jc("ngModel",e.user.fullname),s.zb(2),s.jc("ngModel",e.user.code),s.zb(3),s.jc("ngModel",e.user.certificateNumber),s.zb(2),s.jc("ngModel",e.user.issueDate),s.zb(3),s.jc("ngModel",e.user.identificationNumber),s.zb(2),s.jc("ngModel",null==e.user.organization?null:e.user.organization.name),s.zb(3),s.jc("ngModel",e.user.department?e.user.department.name:null),s.zb(2),s.jc("ngModel",e.user.title?e.user.title.name:null)}}function J(e,t){if(1&e&&(s.Tb(0,"tr",40),s.Tb(1,"td",41),s.Ec(2),s.Sb(),s.Tb(3,"td"),s.Ec(4),s.Sb(),s.Tb(5,"td",42),s.Ec(6),s.Sb(),s.Tb(7,"td"),s.Ec(8),s.Sb(),s.Tb(9,"td"),s.Ec(10),s.ec(11,"date"),s.Sb(),s.Tb(12,"td"),s.Ec(13),s.ec(14,"date"),s.Sb(),s.Tb(15,"td"),s.Ec(16),s.Sb(),s.Tb(17,"td",43),s.Ec(18),s.Sb(),s.Sb()),2&e){const e=t.$implicit,n=t.index;s.jc("formGroupName",n)("hidden",e.value.hidden),s.zb(2),s.Gc(" ",n+1," "),s.zb(2),s.Gc(" ",e.value.trainingFormName," "),s.zb(2),s.Gc(" ",e.value.trainingProgramName," "),s.zb(2),s.Gc(" ",e.value.organizationName," "),s.zb(2),s.Gc(" ",s.gc(11,10,e.value.fromDate,"dd/MM/yyyy")," "),s.zb(3),s.Gc(" ",s.gc(14,13,e.value.toDate,"dd/MM/yyyy")," "),s.zb(3),s.Gc(" ",e.value.trainingSubjectName," "),s.zb(2),s.Gc(" ",e.value.amount," ")}}function Z(e,t){if(1&e&&(s.Rb(0),s.Ob(1,"nz-progress",44),s.Qb()),2&e){const e=s.dc();s.zb(1),s.jc("nzPercent",e.amoutInYear/24*100)("nzShowInfo",e.nzShowInfo(e.amoutInYear))("nzStrokeColor",e.getColor(e.amoutInYear))("nzStatus",e.getStatus(e.amoutInYear))}}const ee=function(e){return{color:e}};function te(e,t){if(1&e&&(s.Rb(0),s.Tb(1,"strong"),s.Ec(2),s.Sb(),s.Ec(3,"/24 - "),s.Tb(4,"span",45),s.Ec(5),s.Sb(),s.Ob(6,"span",46),s.Qb()),2&e){const e=s.dc();s.zb(2),s.Fc(e.amoutInYear),s.zb(2),s.jc("ngStyle",s.mc(4,ee,e.userService.getColor(e.amoutInYear))),s.zb(1),s.Fc(e.userService.getTextStatus(e.amoutInYear)),s.zb(1),s.jc("innerHTML",e.userService.getHtmlRemain(e.amoutInYear),s.tc)}}function ne(e,t){}function ae(e,t){}const ie=function(){return{top:"20px"}},oe=function(){return{standalone:!0}};let re=(()=>{class e extends A.a{constructor(e,t){super(e),this.userService=t,this.searchForm=this.formBuilder.group({year:[new Date]}),this.form=this.formBuilder.group({trainingProgram_Users:this.formBuilder.array([])})}ngOnChanges(e){e.year&&this.searchForm.controls.year.setValue(this.year)}ngOnInit(){}openModal(){this.fetchList()}get trainingProgram_Users(){return this.form.controls.trainingProgram_Users}addTrainingProgram_UserRow(e){this.trainingProgram_Users.push(this.createTrainingProgram_UserItem(e))}createTrainingProgram_UserItem(e){return this.formBuilder.group({trainingProgramName:[e?e.trainingProgramName:null,[c.t.required]],trainingFormName:[{value:e?e.trainingFormName:null,disabled:!0}],fromDate:[{value:e?e.fromDate:null,disabled:!0}],toDate:[{value:e?e.toDate:null,disabled:!0}],trainingSubjectName:[{value:e?e.trainingSubjectName:null,disabled:!0}],organizationName:[{value:e?e.organizationName:null,disabled:!0}],amount:[e?e.amount:null,[c.t.required]],hidden:[!1]})}fetchList(){if(!this.id)return;for(;0!==this.trainingProgram_Users.length;)this.trainingProgram_Users.removeAt(0);let e;this.searchForm.value.year&&(e=this.searchForm.value.year.getFullYear()),this.loading=!0,this.userService.getTrainingPrograms(this.id,e).toPromise().then(e=>{this.loading=!1,e&&e.success?(e.data.forEach(e=>{this.addTrainingProgram_UserRow({trainingProgramName:e.trainingProgram.name,trainingFormName:e.trainingProgram.trainingForm.name,fromDate:e.trainingProgram.fromDate,toDate:e.trainingProgram.toDate,trainingSubjectName:e.trainingSubjectName,amount:e.amount,organizationName:e.trainingProgram.organization?e.trainingProgram.organization.name:null})}),this.form.disable()):this.message.error("L\u1ed7i: "+e.message)})}handleCancel(){this.onCancel.emit()}onSearch(e){this.loading=!0;for(const t in this.trainingProgram_Users.controls){const n=this.trainingProgram_Users.controls[t],a=n.getRawValue();if(e.length>0){let t=!0;e.forEach(e=>{a.trainingProgramName&&a.trainingProgramName.toLowerCase().includes(e.toLowerCase())||a.trainingFormName&&a.trainingFormName.toLowerCase().includes(e.toLowerCase())||a.trainingSubjectName&&a.trainingSubjectName.toLowerCase().includes(e.toLowerCase())||a.amount&&a.amount.toString().toLowerCase().includes(e.toLowerCase())||(t=!1)}),n.controls.hidden.setValue(!t)}else n.controls.hidden.setValue(!1)}this.loading=!1}getStatus(e){return e>=24?"success":e<24&&e>=16?null:"exception"}getTextStatus(e){return e>=24?"\u0110\xe3 ho\xe0n th\xe0nh":e<24&&e>=16?"G\u1ea7n \u0111\u1ee7":"Ch\u01b0a \u0111\u1ee7"}getColor(e){return e>=24?"#52C41A":e<24&&e>=16?"#1890FF":"#FF4D4F"}nzShowInfo(e){return e>=24||e<16}get amoutInYear(){let e=0;return this.trainingProgram_Users.value.forEach(t=>{e+=t.amount}),e}get avatarPath(){return a.a}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(s.r),s.Nb(b.a))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-modal-list-training-program"]],inputs:{year:"year",user:"user"},features:[s.wb,s.xb],decls:47,vars:17,consts:[["nzTitle","Danh s\xe1ch ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o",3,"nzStyle","nzVisible","nzFooter","nzWidth","nzVisibleChange","nzAfterOpen","nzOnCancel"],["modal",""],["class","row",4,"ngIf"],[3,"formGroup"],[1,"row","m-b-10"],[1,"col-md-8"],["nzMode","tags","nzPlaceHolder","T\xecm ki\u1ebfm...",1,"w-100",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-md-4"],["type","datepicker","dateMode","year","formControlName","year","labelContent","N\u0103m x\xe9t",3,"onChange"],[1,"w-100",3,"nzNoResult","nzLoading"],["dynamicTable",""],["width","50px",1,"center"],["width","200px"],["width","170px"],["width","100px"],["width","150px"],["width","70px"],["formArrayName","trainingProgram_Users"],[3,"formGroupName","hidden",4,"ngFor","ngForOf"],["colspan","2"],[4,"ngIf"],["colspan","3"],["class","no-result"],["nzNoResult",""],["modalFooter",""],[1,"row"],[1,"col-xl-2"],[1,"row","m-v-20"],["nzName","avatar",1,"center",3,"nzShowUploadList"],["nzIcon","user",3,"nzSize","nzSrc"],[1,"col-xl-10"],[1,"col-md-6"],["type","text","readonly","true","labelContent","H\u1ecd t\xean",3,"ngModel"],["type","text","readonly","true","labelContent","M\xe3",3,"ngModel"],["type","text","readonly","true","labelContent","S\u1ed1 CCHN",3,"ngModel"],["type","datepicker","readonly","true","labelContent","Ng\xe0y c\u1ea5p",3,"ngModel"],["type","text","readonly","true","labelContent","S\u1ed1 CMND",3,"ngModel"],["type","text","readonly","true","labelContent","\u0110\u01a1n v\u1ecb c\xf4ng t\xe1c",3,"ngModel"],["type","text","readonly","true","labelContent","Khoa ph\xf2ng",3,"ngModel"],["type","text","readonly","true","labelContent","Ch\u1ee9c danh",3,"ngModel"],[3,"formGroupName","hidden"],[1,"text-center"],[1,"text-highlight"],[1,"text-right","font-weight-semibold"],[3,"nzPercent","nzShowInfo","nzStrokeColor","nzStatus"],[3,"ngStyle"],[1,"m-l-5",3,"innerHTML"]],template:function(e,t){if(1&e&&(s.Tb(0,"nz-modal",0,1),s.ac("nzVisibleChange",function(e){return t.isVisible=e})("nzAfterOpen",function(){return t.openModal()})("nzOnCancel",function(){return t.handleCancel()}),s.Cc(2,W,27,11,"div",2),s.Ob(3,"nz-divider"),s.Tb(4,"form",3),s.Tb(5,"div",4),s.Tb(6,"div",5),s.Tb(7,"nz-select",6),s.ac("ngModelChange",function(e){return t.onSearch(e)}),s.Sb(),s.Sb(),s.Tb(8,"div",7),s.Tb(9,"app-input",8),s.ac("onChange",function(){return t.fetchList()}),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(10,"form",3),s.Tb(11,"nz-table",9,10),s.Tb(13,"thead"),s.Tb(14,"tr"),s.Tb(15,"th",11),s.Ec(16,"STT"),s.Sb(),s.Tb(17,"th",12),s.Ec(18,"H\xecnh th\u1ee9c \u0111\xe0o t\u1ea1o"),s.Sb(),s.Tb(19,"th"),s.Ec(20,"N\u1ed9i dung"),s.Sb(),s.Tb(21,"th",13),s.Ec(22,"\u0110\u01a1n v\u1ecb t\u1ed5 ch\u1ee9c"),s.Sb(),s.Tb(23,"th",14),s.Ec(24,"T\u1eeb ng\xe0y"),s.Sb(),s.Tb(25,"th",14),s.Ec(26,"\u0110\u1ebfn ng\xe0y"),s.Sb(),s.Tb(27,"th",15),s.Ec(28,"\u0110\u1ed1i t\u01b0\u1ee3ng"),s.Sb(),s.Tb(29,"th",16),s.Ec(30,"Quy \u0111\u1ed5i"),s.Sb(),s.Sb(),s.Sb(),s.Tb(31,"tbody",17),s.Cc(32,J,19,16,"tr",18),s.Tb(33,"tr"),s.Ob(34,"td"),s.Tb(35,"td"),s.Tb(36,"strong"),s.Ec(37,"T\u1ed5ng c\u1ed9ng:"),s.Sb(),s.Sb(),s.Tb(38,"td",19),s.Cc(39,Z,2,4,"ng-container",20),s.Sb(),s.Tb(40,"td",21),s.Cc(41,te,7,6,"ng-container",20),s.Sb(),s.Ob(42,"td"),s.Sb(),s.Sb(),s.Sb(),s.Cc(43,ne,0,0,"ng-template",22,23,s.Dc),s.Sb(),s.Sb(),s.Cc(45,ae,0,0,"ng-template",null,24,s.Dc)),2&e){const e=s.rc(44),n=s.rc(46);s.jc("nzStyle",s.lc(15,ie))("nzVisible",t.isVisible)("nzFooter",n)("nzWidth",1300)("nzFooter",n),s.zb(2),s.jc("ngIf",t.user),s.zb(2),s.jc("formGroup",t.searchForm),s.zb(3),s.jc("ngModel",t.listTextSearch)("ngModelOptions",s.lc(16,oe)),s.zb(3),s.jc("formGroup",t.form),s.zb(1),s.jc("nzNoResult",e)("nzLoading",t.loading),s.zb(21),s.jc("ngForOf",t.trainingProgram_Users.controls),s.zb(7),s.jc("ngIf",t.searchForm.value.year),s.zb(2),s.jc("ngIf",t.searchForm.value.year)}},directives:[B.a,d.n,f.a,c.u,c.o,c.i,L.b,c.n,c.q,g.a,c.h,Q.b,Q.j,Q.k,Q.a,Q.h,Q.e,c.e,d.m,h.a,m.a,c.j,K.a,d.o],pipes:[d.e],styles:[""]}),e})();var ce=n("gyL+"),le=n("eKRx"),se=n("Gvdd"),be=n("TIPB"),de=n("JA5x"),ue=n("lhEo"),pe=n("nJia"),he=n("/SMA"),me=n("r7RV"),ge=n("J6Ek"),fe=n("v7J9");function Se(e,t){if(1&e){const e=s.Ub();s.Tb(0,"app-button-create",4),s.ac("onClick",function(){return s.sc(e),s.dc().goToCreate()}),s.Sb()}}function ze(e,t){if(1&e){const e=s.Ub();s.Tb(0,"app-button-choose",4),s.ac("onClick",function(){return s.sc(e),s.dc().chooseItem()}),s.Sb()}}function Ce(e,t){if(1&e){const e=s.Ub();s.Tb(0,"app-button-import",4),s.ac("onClick",function(){return s.sc(e),s.dc().importExcel()}),s.Sb()}}function Te(e,t){if(1&e){const e=s.Ub();s.Tb(0,"app-button-delete",4),s.ac("onClick",function(){s.sc(e);const t=s.dc();return t.deleteMany(t.selectedIds)}),s.Sb()}}function ve(e,t){if(1&e&&s.Ec(0),2&e){const e=t.$implicit,n=s.dc();s.Ic(" ",n.request.pageSize*(n.request.currentPage-1)+1," -",n.request.pageSize*n.request.currentPage>e?e:n.request.pageSize*n.request.currentPage," /",e," ")}}function Ie(e,t){1&e&&s.Ob(0,"th",36)}function ye(e,t){1&e&&s.Ob(0,"th")}function Ne(e,t){if(1&e){const e=s.Ub();s.Tb(0,"td",44),s.ac("nzCheckedChange",function(t){s.sc(e);const n=s.dc().$implicit;return s.dc(2).mapOfCheckedId[n.id]=t})("nzCheckedChange",function(){return s.sc(e),s.dc(3).refreshStatus()})("click",function(e){return e.stopPropagation()}),s.Sb()}if(2&e){const e=s.dc().$implicit,t=s.dc(2);s.jc("nzChecked",t.mapOfCheckedId[e.id])}}function xe(e,t){1&e&&s.Ob(0,"td")}function je(e,t){if(1&e){const e=s.Ub();s.Tb(0,"td",45),s.ac("nzExpandChange",function(t){return s.sc(e),s.dc().$implicit.expand=t}),s.Sb()}if(2&e){const e=s.dc().$implicit;s.jc("nzExpand",e.expand)}}const ke=function(e){return{"col-group-text":e}};function we(e,t){if(1&e&&(s.Tb(0,"td",46),s.Ec(1),s.Sb()),2&e){const e=s.dc().$implicit,t=s.dc(2);s.jc("ngClass",s.mc(2,ke,t.expandable)),s.zb(1),s.Gc(" ",e[t.groupBy]," ")}}function Ee(e,t){if(1&e&&(s.Rb(0),s.Tb(1,"div",47),s.Ob(2,"nz-avatar",48),s.Sb(),s.Tb(3,"div",49),s.Tb(4,"span",50),s.Ec(5),s.Sb(),s.Sb(),s.Qb()),2&e){const e=s.dc().$implicit,t=s.dc(2);s.zb(2),s.kc("nzSrc",e.avatarUrl?t.avatarPath+"/"+e.avatarUrl:""),s.zb(3),s.Fc(e.fullname)}}const Oe=function(e){return{color:e}};function De(e,t){if(1&e&&(s.Rb(0),s.Tb(1,"div",51),s.Ob(2,"nz-progress",52),s.Sb(),s.Tb(3,"strong"),s.Ec(4),s.Sb(),s.Ec(5,"/24 - "),s.Tb(6,"span",53),s.Ec(7),s.Sb(),s.Qb()),2&e){const e=s.dc().$implicit,t=s.dc(2);s.zb(2),s.jc("nzPercent",e.amoutInYear/24*100)("nzShowInfo",t.nzShowInfo(e.amoutInYear))("nzStrokeColor",t.userService.getColor(e.amoutInYear))("nzStatus",t.userService.getStatus(e.amoutInYear)),s.zb(2),s.Fc(e.amoutInYear),s.zb(2),s.jc("ngStyle",s.mc(7,Oe,t.userService.getColor(e.amoutInYear))),s.zb(1),s.Fc(t.userService.getTextStatus(e.amoutInYear))}}function Pe(e,t){if(1&e){const e=s.Ub();s.Tb(0,"app-circle-button-edit",4),s.ac("onClick",function(){s.sc(e);const t=s.dc(2).$implicit;return s.dc(2).goToDetail(t.id,!0)}),s.Sb()}}function Fe(e,t){if(1&e){const e=s.Ub();s.Tb(0,"app-circle-button-delete",4),s.ac("onClick",function(){s.sc(e);const t=s.dc(2).$implicit;return s.dc(2).deleteMany([t.id])}),s.Sb()}}function Le(e,t){if(1&e){const e=s.Ub();s.Rb(0),s.Tb(1,"app-circle-button-base",54),s.ac("onClick",function(){s.sc(e);const t=s.dc().$implicit,n=s.dc(2);return n.selectedUser=t,n.isTrainingProgramVisible=!0}),s.Sb(),s.Cc(2,Pe,1,0,"app-circle-button-edit",5),s.Cc(3,Fe,1,0,"app-circle-button-delete",5),s.Qb()}if(2&e){const e=s.dc(3);s.zb(2),s.jc("ngIf",e.isSuperAdmin),s.zb(1),s.jc("ngIf",!e.isModal)}}function Me(e,t){if(1&e){const e=s.Ub();s.Tb(0,"app-circle-button-delete",4),s.ac("onClick",function(){s.sc(e);const t=s.dc(2).$implicit;return s.dc(2).deleteMany([t.id])}),s.Sb()}}function Ve(e,t){if(1&e){const e=s.Ub();s.Tb(0,"tr",55),s.ac("click",function(){s.sc(e);const n=t.$implicit;return s.dc(3).goToDetail(n.id)}),s.Tb(1,"td",56),s.ac("nzCheckedChange",function(n){s.sc(e);const a=t.$implicit;return s.dc(3).mapOfCheckedId[a.id]=n})("nzCheckedChange",function(){return s.sc(e),s.dc(3).refreshStatus()}),s.Sb(),s.Ob(2,"td"),s.Ob(3,"td"),s.Tb(4,"td",41),s.Ec(5),s.Sb(),s.Tb(6,"td"),s.Ec(7),s.Sb(),s.Tb(8,"td"),s.Ec(9),s.Sb(),s.Tb(10,"td"),s.Ec(11),s.Sb(),s.Tb(12,"td"),s.Ec(13),s.Sb(),s.Tb(14,"td"),s.Ec(15),s.Sb(),s.Tb(16,"td"),s.Tb(17,"div",51),s.Ob(18,"nz-progress",52),s.Sb(),s.Tb(19,"strong"),s.Ec(20),s.Sb(),s.Ec(21,"/24 - "),s.Tb(22,"span",53),s.Ec(23),s.Sb(),s.Sb(),s.Tb(24,"td",42),s.ac("click",function(e){return e.stopPropagation()}),s.Tb(25,"app-circle-button-base",57),s.ac("onClick",function(){s.sc(e);const n=t.$implicit,a=s.dc(3);return a.selectedId=n,a.isTrainingProgramVisible=!0}),s.Sb(),s.Tb(26,"app-circle-button-edit",4),s.ac("onClick",function(){s.sc(e);const n=t.$implicit;return s.dc(3).goToDetail(n.id,!0)}),s.Sb(),s.Cc(27,Me,1,0,"app-circle-button-delete",5),s.Sb(),s.Sb()}if(2&e){const e=t.$implicit,n=t.index,a=s.dc().$implicit,i=s.dc(2);s.jc("nzExpand",a.expand),s.zb(1),s.jc("nzChecked",i.mapOfCheckedId[e.id]),s.zb(4),s.Fc(i.request.pageSize*(i.request.currentPage-1)+(n+1)),s.zb(2),s.Fc(e.fullname),s.zb(2),s.Fc(e.certificateNumber),s.zb(2),s.Fc(e.department?e.organization.name:""),s.zb(2),s.Fc(e.department?e.department.name:""),s.zb(2),s.Fc(e.title?e.title.name:""),s.zb(3),s.jc("nzPercent",e.amoutInYear/24*100)("nzShowInfo",i.nzShowInfo(e.amoutInYear))("nzStrokeColor",i.userService.getColor(e.amoutInYear))("nzStatus",i.userService.getStatus(e.amoutInYear)),s.zb(2),s.Fc(e.amoutInYear),s.zb(2),s.jc("ngStyle",s.mc(16,Oe,i.userService.getColor(e.amoutInYear))),s.zb(1),s.Fc(i.userService.getTextStatus(e.amoutInYear)),s.zb(4),s.jc("ngIf",!i.isModal)}}const Ue=function(e){return{"col-group":e}};function qe(e,t){if(1&e){const e=s.Ub();s.Tb(0,"tr",37),s.ac("click",function(){s.sc(e);const n=t.$implicit,a=s.dc(2);return!a.expandable&&a.goToDetail(n.id)}),s.Cc(1,Ne,1,1,"td",38),s.Cc(2,xe,1,0,"td",22),s.Cc(3,je,1,1,"td",39),s.Cc(4,we,2,4,"td",40),s.Tb(5,"td",41),s.Ec(6),s.Sb(),s.Tb(7,"td"),s.Cc(8,Ee,6,2,"ng-container",22),s.Sb(),s.Tb(9,"td"),s.Ec(10),s.Sb(),s.Tb(11,"td"),s.Ec(12),s.Sb(),s.Tb(13,"td"),s.Ec(14),s.Sb(),s.Tb(15,"td"),s.Ec(16),s.Sb(),s.Tb(17,"td"),s.Cc(18,De,8,9,"ng-container",22),s.Sb(),s.Tb(19,"td",42),s.ac("click",function(e){return e.stopPropagation()}),s.Cc(20,Le,4,2,"ng-container",22),s.Sb(),s.Sb(),s.Cc(21,Ve,28,18,"tr",43)}if(2&e){const e=t.index,n=t.$implicit,a=s.dc(2);s.jc("ngClass",s.mc(14,Ue,a.expandable)),s.zb(1),s.jc("ngIf",!a.expandable),s.zb(1),s.jc("ngIf",a.expandable),s.zb(1),s.jc("ngIf",a.expandable),s.zb(1),s.jc("ngIf",a.expandable),s.zb(2),s.Fc(a.expandable?"":a.request.pageSize*(a.request.currentPage-1)+(e+1)),s.zb(2),s.jc("ngIf",!a.expandable),s.zb(2),s.Fc(a.expandable?"":n.certificateNumber),s.zb(2),s.Fc(a.expandable?"":n.organization?n.organization.name:""),s.zb(2),s.Fc(a.expandable?"":n.department?n.department.name:""),s.zb(2),s.Fc(a.expandable?"":n.title?n.title.name:""),s.zb(2),s.jc("ngIf",!a.expandable),s.zb(2),s.jc("ngIf",!a.expandable),s.zb(1),s.jc("ngForOf",n.children)}}function Ae(e,t){if(1&e){const e=s.Ub();s.Rb(0),s.Tb(1,"nz-card"),s.Tb(2,"nz-table",25,26),s.ac("nzCurrentPageDataChange",function(t){return s.sc(e),s.dc().currentPageDataChange(t)}),s.Tb(4,"thead",27),s.ac("nzSortChange",function(t){return s.sc(e),s.dc().sortChange(t)}),s.Tb(5,"tr"),s.Tb(6,"th",28),s.ac("nzCheckedChange",function(t){return s.sc(e),s.dc().isAllDisplayDataChecked=t})("nzCheckedChange",function(t){return s.sc(e),s.dc().checkAll(t)}),s.Sb(),s.Cc(7,Ie,1,0,"th",29),s.Cc(8,ye,1,0,"th",22),s.Tb(9,"th",30),s.Ec(10,"STT "),s.Sb(),s.Tb(11,"th",31),s.Ec(12," H\u1ecd t\xean "),s.Sb(),s.Tb(13,"th",32),s.Ec(14," S\u1ed1 CCHN "),s.Sb(),s.Tb(15,"th"),s.Ec(16," \u0110\u01a1n v\u1ecb "),s.Sb(),s.Tb(17,"th"),s.Ec(18," Khoa ph\xf2ng "),s.Sb(),s.Tb(19,"th"),s.Ec(20," Ch\u1ee9c danh "),s.Sb(),s.Tb(21,"th",33),s.Ec(22," S\u1ed1 ti\u1ebft quy \u0111\u1ed5i "),s.Sb(),s.Tb(23,"th",34),s.Ec(24," Thao t\xe1c "),s.Sb(),s.Sb(),s.Sb(),s.Tb(25,"tbody"),s.Cc(26,qe,22,16,"ng-template",35),s.Sb(),s.Sb(),s.Sb(),s.Qb()}if(2&e){const e=s.rc(3),t=s.dc();s.zb(2),s.jc("nzData",t.listData)("nzFrontPagination",!1)("nzLoading",t.isLoading),s.zb(4),s.jc("nzChecked",t.isAllDisplayDataChecked)("nzIndeterminate",t.isIndeterminate),s.zb(1),s.jc("ngIf",t.expandable),s.zb(1),s.jc("ngIf",t.expandable),s.zb(18),s.jc("ngForOf",e.data)}}function He(e,t){if(1&e&&(s.Tb(0,"app-card-item",59),s.Tb(1,"div",47),s.Ob(2,"nz-avatar",48),s.Sb(),s.Tb(3,"div",49),s.Tb(4,"span",50),s.Ec(5),s.Sb(),s.Sb(),s.Sb(),s.Tb(6,"app-card-item",60),s.Ec(7),s.Sb(),s.Tb(8,"app-card-item",61),s.Ec(9),s.Sb(),s.Tb(10,"app-card-item",62),s.Ec(11),s.Sb(),s.Tb(12,"app-card-item",63),s.Ec(13),s.Sb(),s.Tb(14,"app-card-item",64),s.Tb(15,"div",51),s.Ob(16,"nz-progress",52),s.Sb(),s.Tb(17,"strong"),s.Ec(18),s.Sb(),s.Ec(19,"/24 - "),s.Tb(20,"span",53),s.Ec(21),s.Sb(),s.Sb()),2&e){const e=t.item,n=s.dc(2);s.zb(2),s.kc("nzSrc",e.avatarUrl?n.avatarPath+"/"+e.avatarUrl:""),s.zb(3),s.Fc(e.fullname),s.zb(2),s.Gc(" ",e.certificateNumber," "),s.zb(2),s.Gc(" ",e.organization?e.organization.name:""," "),s.zb(2),s.Gc(" ",e.department?e.department.name:""," "),s.zb(2),s.Gc(" ",e.title?e.title.name:""," "),s.zb(3),s.jc("nzPercent",e.amoutInYear/24*100)("nzShowInfo",n.nzShowInfo(e.amoutInYear))("nzStrokeColor",n.userService.getColor(e.amoutInYear))("nzStatus",n.userService.getStatus(e.amoutInYear)),s.zb(2),s.Fc(e.amoutInYear),s.zb(2),s.jc("ngStyle",s.mc(13,Oe,n.userService.getColor(e.amoutInYear))),s.zb(1),s.Fc(n.userService.getTextStatus(e.amoutInYear))}}function Ge(e,t){if(1&e){const e=s.Ub();s.Rb(0),s.Tb(1,"app-card-view",58),s.ac("onClick",function(t){return s.sc(e),s.dc().goToDetail(t.id)}),s.Cc(2,He,22,15,"ng-template"),s.Sb(),s.Qb()}if(2&e){const e=s.dc();s.zb(1),s.jc("expandable",e.expandable)("listData",e.listData)("groupBy",e.groupBy)}}const Re=function(){return[10,20,50,100]};let Be=(()=>{class e extends o.a{constructor(e,t,n){super(e),this.modalService=t,this.userService=n,this.request={listTextSearch:[],currentPage:1,pageSize:10,sort:"+FirstName"}}ngOnInit(){this.searchForm=this.formBuilder.group({year:[new Date],organizationId:[r.a.INTERNAL_ORGANIZATION_ID],departmentId:[null],titleId:[null]}),this.fetchList()}fetchList(){const e=JSON.stringify({ListTextSearch:this.request.listTextSearch});let t;this.isLoading=!0,this.searchForm.value.year&&(t=this.searchForm.value.year.getFullYear()),this.userService.getList(this.request.currentPage,this.request.pageSize,this.request.sort,e,this.searchForm.value.organizationId,this.searchForm.value.departmentId,this.searchForm.value.titleId,t).toPromise().then(e=>{this.isLoading=!1,e&&e.success?(this.listData=e.data.content,this.flatList=e.data.content,this.total=e.data.totalRecords,this.parseGroup(this.listData)):this.message.error(e.message)})}reload(){this.request.currentPage=1,this.fetchList()}goToCreate(){this.modalService.openCreateModal(i.a,"1000px","20px").afterClose.toPromise().then(e=>{e&&this.reload()})}goToDetail(e,t=!1){this.modalService.openDetailModal(E,e,t,"1000px","20px").afterClose.toPromise().then(e=>{e&&this.reload()})}chooseItem(){let e=this.listData.find(e=>e.id==this.selectedIds[0]);this.modal.destroy(e)}deleteMany(e){this.isLoading=!0,this.userService.deleteMany(e).toPromise().then(e=>{this.isLoading=!1,e&&e.success?(this.message.success("X\xf3a th\xe0nh c\xf4ng"),this.fetchList()):this.message.error("L\u1ed7i: "+e.message)})}get isProduction(){return r.a.production}get avatarPath(){return a.a}importExcel(){this.isImportVisible=!0}exportExcel(){this.isExportVisible=!0}nzShowInfo(e){return e>=24||e<16}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(s.r),s.Nb(O.a),s.Nb(b.a))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-list-user"]],features:[s.wb],decls:43,vars:32,consts:[[1,"page-header"],[1,"row"],[1,"col-md-5"],["nz-row",""],[3,"onClick"],[3,"onClick",4,"ngIf"],[1,"col-md-7"],["nzMode","tags","nzPlaceHolder","T\xecm ki\u1ebfm...",1,"w-100",3,"ngModel","ngModelChange"],[1,"col-md-12"],[1,"float-right",3,"ngModel","nzButtonStyle","ngModelChange"],["nz-radio-button","","nzValue","list"],["nz-icon","","nzType","bars","nzTheme","outline"],["nz-radio-button","","nzValue","card"],["nz-icon","","nzType","appstore","nzTheme","outline"],["nzShowSizeChanger","",1,"float-right","mr-2",3,"nzPageSize","nzPageSizeOptions","nzPageIndex","nzShowTotal","nzTotal","nzPageSizeChange","nzPageIndexChange","nzTotalChange"],["totalTemplate",""],[3,"formGroup"],[1,"col-md-3"],["type","datepicker","dateMode","year","formControlName","year","labelContent","N\u0103m x\xe9t",3,"labelHorizontal","onChange"],["formControlName","organizationId",3,"labelHorizontal"],["formControlName","departmentId",3,"labelHorizontal","organizationId","onChange"],["formControlName","titleId",3,"labelHorizontal","onChange"],[4,"ngIf"],[3,"isVisible","onCancel"],[3,"user","id","isVisible","year","onCancel"],[1,"w-100",3,"nzData","nzFrontPagination","nzLoading","nzCurrentPageDataChange"],["rowSelectionTable",""],[3,"nzSortChange"],["nzShowCheckbox","","nzWidth","50px",1,"center",3,"nzChecked","nzIndeterminate","nzCheckedChange"],["nzWidth","50px","nzShowExpand","",4,"ngIf"],["nzWidth","50px",1,"center"],["nzWidth","250px","nzShowSort","","nzSortKey","fullname"],["nzWidth","150px","nzShowSort","","nzSortKey","certificateNumber"],["nzWidth","200px"],["width","170px",1,"center"],["ngFor","",3,"ngForOf"],["nzWidth","50px","nzShowExpand",""],[3,"ngClass","click"],["nzShowCheckbox","",3,"nzChecked","nzCheckedChange","click",4,"ngIf"],["class","center","nzShowExpand","",3,"nzExpand","nzExpandChange",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"center"],[1,"center",3,"click"],[3,"nzExpand","click",4,"ngFor","ngForOf"],["nzShowCheckbox","",3,"nzChecked","nzCheckedChange","click"],["nzShowExpand","",1,"center",3,"nzExpand","nzExpandChange"],[3,"ngClass"],[1,"inline-block","mr-2"],["nzIcon","star",3,"nzSrc"],[1,"inline-block"],[1,"text-highlight"],[1,"m-b-5"],[3,"nzPercent","nzShowInfo","nzStrokeColor","nzStatus"],[3,"ngStyle"],["nz-tooltip","","nzTooltipTitle","Ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o","buttonType","primary","iconType","fund-projection-screen",3,"onClick"],[3,"nzExpand","click"],["nzShowCheckbox","",3,"nzChecked","nzCheckedChange"],["iconType","fund-projection-screen",3,"onClick"],[3,"expandable","listData","groupBy","onClick"],["label","H\u1ecd t\xean"],["label","S\u1ed1 ch\u1ee9ng ch\u1ec9 h\xe0nh ngh\u1ec1"],["label","\u0110\u01a1n v\u1ecb"],["label","Khoa ph\xf2ng"],["label","Ch\u1ee9c danh"],["label","S\u1ed1 ti\u1ebft quy \u0111\u1ed5i"]],template:function(e,t){if(1&e&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Tb(3,"div",3),s.Tb(4,"app-header-title"),s.Ec(5,"Danh s\xe1ch c\xe1n b\u1ed9"),s.Sb(),s.Sb(),s.Tb(6,"div",3),s.Tb(7,"app-button-reload",4),s.ac("onClick",function(){return t.reload()}),s.Sb(),s.Cc(8,Se,1,0,"app-button-create",5),s.Cc(9,ze,1,0,"app-button-choose",5),s.Cc(10,Ce,1,0,"app-button-import",5),s.Cc(11,Te,1,0,"app-button-delete",5),s.Sb(),s.Sb(),s.Tb(12,"div",6),s.Tb(13,"div",3),s.Tb(14,"nz-select",7),s.ac("ngModelChange",function(e){return t.nzOnSearch(e)}),s.Sb(),s.Sb(),s.Tb(15,"div",1),s.Tb(16,"div",8),s.Tb(17,"nz-radio-group",9),s.ac("ngModelChange",function(e){return t.tableType=e}),s.Tb(18,"label",10),s.Tb(19,"span"),s.Ob(20,"i",11),s.Sb(),s.Sb(),s.Tb(21,"label",12),s.Tb(22,"span"),s.Ob(23,"i",13),s.Sb(),s.Sb(),s.Sb(),s.Tb(24,"nz-pagination",14),s.ac("nzPageSizeChange",function(e){return t.request.pageSize=e})("nzPageIndexChange",function(e){return t.request.currentPage=e})("nzPageIndexChange",function(e){return t.pageIndexChange(e)})("nzPageSizeChange",function(e){return t.pageSizeChange(e)})("nzTotalChange",function(e){return t.total=e}),s.Sb(),s.Cc(25,ve,1,3,"ng-template",null,15,s.Dc),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(27,"form",16),s.Tb(28,"div",1),s.Tb(29,"div",17),s.Tb(30,"app-input",18),s.ac("onChange",function(){return t.fetchList()}),s.Sb(),s.Sb(),s.Tb(31,"div",17),s.Ob(32,"app-select-organization",19),s.Sb(),s.Tb(33,"div",17),s.Tb(34,"app-select-department",20),s.ac("onChange",function(){return t.fetchList()}),s.Sb(),s.Sb(),s.Tb(35,"div",17),s.Tb(36,"app-select-title",21),s.ac("onChange",function(){return t.fetchList()}),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(37,"div",1),s.Tb(38,"div"),s.Cc(39,Ae,27,8,"ng-container",22),s.Cc(40,Ge,3,3,"ng-container",22),s.Sb(),s.Sb(),s.Tb(41,"app-import-user",23),s.ac("onCancel",function(){return t.isImportVisible=!1,t.reload()}),s.Sb(),s.Tb(42,"app-modal-list-training-program",24),s.ac("onCancel",function(){return t.isTrainingProgramVisible=!1}),s.Sb()),2&e){const e=s.rc(26);s.zb(8),s.jc("ngIf",t.isSuperAdmin),s.zb(1),s.jc("ngIf",t.isModal&&1==t.selectedIds.length),s.zb(1),s.jc("ngIf",!t.isProduction),s.zb(1),s.jc("ngIf",t.isSuperAdmin&&!t.isModal&&t.selectedIds.length>1&&(t.isAllDisplayDataChecked||t.isIndeterminate)),s.zb(3),s.jc("ngModel",t.listTextSearch),s.zb(3),s.jc("ngModel",t.tableType)("nzButtonStyle","solid"),s.zb(7),s.jc("nzPageSize",t.request.pageSize)("nzPageSizeOptions",s.lc(31,Re))("nzPageIndex",t.request.currentPage)("nzShowTotal",e)("nzTotal",t.total),s.zb(3),s.jc("formGroup",t.searchForm),s.zb(3),s.jc("labelHorizontal",!1),s.zb(2),s.jc("labelHorizontal",!1),s.zb(2),s.jc("labelHorizontal",!1)("organizationId",t.searchForm.getRawValue().organizationId),s.zb(2),s.jc("labelHorizontal",!1),s.zb(1),s.Bb(t.isModal?"m-t-30":""),s.zb(1),s.Bb(t.isModal?"w-100 center":"col-lg-12 center"),s.zb(1),s.jc("ngIf","list"==t.tableType),s.zb(1),s.jc("ngIf","card"==t.tableType),s.zb(1),s.jc("isVisible",t.isImportVisible),s.zb(1),s.jc("user",t.selectedUser)("id",t.selectedUser?t.selectedUser.id:null)("isVisible",t.isTrainingProgramVisible)("year",t.searchForm.value.year)}},directives:[D.c,P.a,F.a,d.n,L.b,c.n,c.q,M.c,M.b,M.a,V.a,U.a,q.a,c.u,c.o,c.i,g.a,c.h,S.a,z.a,C.a,X,re,ce.a,le.a,se.a,be.a,de.a,Q.b,Q.j,Q.k,Q.a,Q.h,Q.i,Q.g,Q.e,d.m,d.l,Q.f,m.a,K.a,d.o,ue.a,pe.d,he.a,me.a,Q.l,Q.c,ge.a,fe.a],styles:[""]}),e})()},"7UCR":function(e,t,n){"use strict";n.r(t),n.d(t,"UserModule",function(){return h});var a=n("el8y"),i=n("hMaZ"),o=n("259m"),r=n("tyNb"),c=n("fXoL");const l=[{path:"",component:o.a}];let s=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(t){return new(t||e)},imports:[[r.i.forChild(l)],r.i]}),e})();var b=n("jdXR"),d=n("PCNd"),u=n("ofXK"),p=n("uRpX");let h=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(t){return new(t||e)},imports:[[u.c,d.a,p.a,s,b.OrganizationModule,i.DepartmentModule,a.TitleModule]]}),e})()},"8X1I":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("ECBP"),i=n("fXoL");let o=(()=>{class e extends a.a{constructor(e){super(e),this.isVisible=!1,this.onCancel=new i.n}}return e.\u0275fac=function(t){return new(t||e)(i.Nb(i.r))},e.\u0275cmp=i.Hb({type:e,selectors:[["ng-component"]],inputs:{id:"id",isVisible:"isVisible"},outputs:{onCancel:"onCancel"},features:[i.wb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})()},LojI:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n("mrSG"),i=n("ECBP"),o=n("6MAI"),r=n("fXoL"),c=n("da3i"),l=n("3Pt+"),s=n("QH85"),b=n("neZC"),d=n("QlUG"),u=n("8+11"),p=n("ofXK"),h=n("gyL+");function m(e,t){if(1&e){const e=r.Ub();r.Tb(0,"app-button-create",5),r.ac("onClick",function(){return r.sc(e),r.dc(2).goToCreate()}),r.Sb()}}function g(e,t){if(1&e){const e=r.Ub();r.Tb(0,"div",2),r.Tb(1,"app-button-base",3),r.ac("onClick",function(){return r.sc(e),r.dc().goToList()}),r.Ec(2,"T\xecm ki\u1ebfm"),r.Sb(),r.Cc(3,m,1,0,"app-button-create",4),r.Sb()}if(2&e){const e=r.dc();r.zb(3),r.jc("ngIf",e.isSuperAdmin)}}let f=(()=>{class e extends i.a{constructor(e,t,n,a){super(e),this.ngControl=t,this.modalService=n,this.titleService=a,this.labelContent="Ch\u1ee9c danh",this.span=4,this.required=!1,this.labelHorizontal=!0,this.onChange=new r.n,this.listData=[],this.loading=!1,null!=this.ngControl&&(this.ngControl.valueAccessor=this)}ngOnInit(){this.fetchList()}writeValue(e){}registerOnChange(e){}registerOnTouched(e){}setDisabledState(e){}handleChange(e){this.onChange.emit(e)}fetchList(){this.titleService.getList().toPromise().then(e=>{this.loading=!1,e&&e.success?this.listData=e.data.content:this.message.error(e.message)})}goToList(){this.modalService.openListModal(c.a).afterClose.toPromise().then(e=>Object(a.a)(this,void 0,void 0,function*(){e&&(this.ngControl.control.setValue(e.id),this.listData.find(t=>t.id==e.id)||(this.listData=[...this.listData,e]))}))}goToCreate(){this.modalService.openCreateModal(o.a).afterClose.toPromise().then(e=>Object(a.a)(this,void 0,void 0,function*(){e&&(this.listData=[...this.listData,e],this.ngControl.control.setValue(e.id),this.onChange.emit(e))}))}}return e.\u0275fac=function(t){return new(t||e)(r.Nb(r.r),r.Nb(l.m,10),r.Nb(s.a),r.Nb(b.a))},e.\u0275cmp=r.Hb({type:e,selectors:[["app-select-title"]],inputs:{labelContent:"labelContent",span:"span",required:"required",labelHorizontal:"labelHorizontal"},outputs:{onChange:"onChange"},features:[r.wb],decls:3,vars:8,consts:[["type","select","labelField","name",3,"labelHorizontal","selectData","span","labelContent","formControl","required","footerSelectTemplate","loading","onChange"],["footer",""],[1,"container","m-5"],["iconType","search",3,"onClick"],[3,"onClick",4,"ngIf"],[3,"onClick"]],template:function(e,t){if(1&e&&(r.Tb(0,"app-input",0),r.ac("onChange",function(e){return t.handleChange(e)}),r.Sb(),r.Cc(1,g,4,1,"ng-template",null,1,r.Dc)),2&e){const e=r.rc(2);r.jc("labelHorizontal",t.labelHorizontal)("selectData",t.listData)("span",t.span)("labelContent",t.labelContent)("formControl",t.ngControl.control)("required",t.required)("footerSelectTemplate",e)("loading",t.loading)}},directives:[d.a,l.n,l.g,l.s,u.a,p.n,h.a],styles:[""]}),e})()},Lxo8:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n("mrSG"),i=n("ECBP"),o=n("dI7A"),r=n("Z+4V"),c=n("fXoL"),l=n("3Pt+"),s=n("QH85"),b=n("FQ+V"),d=n("QlUG"),u=n("8+11"),p=n("ofXK"),h=n("gyL+");function m(e,t){if(1&e){const e=c.Ub();c.Tb(0,"app-button-create",5),c.ac("onClick",function(){return c.sc(e),c.dc(2).goToCreate()}),c.Sb()}}function g(e,t){if(1&e){const e=c.Ub();c.Tb(0,"div",2),c.Tb(1,"app-button-base",3),c.ac("onClick",function(){return c.sc(e),c.dc().goToList()}),c.Ec(2,"T\xecm ki\u1ebfm"),c.Sb(),c.Cc(3,m,1,0,"app-button-create",4),c.Sb()}if(2&e){const e=c.dc();c.zb(3),c.jc("ngIf",e.isSuperAdmin)}}let f=(()=>{class e extends i.a{constructor(e,t,n,a){super(e),this.ngControl=t,this.modalService=n,this.departmentService=a,this.labelContent="Khoa ph\xf2ng",this.span=4,this.required=!1,this.labelHorizontal=!0,this.selectMode="default",this.onChange=new c.n,this.listData=[],this.firstLoad=!0,null!=this.ngControl&&(this.ngControl.valueAccessor=this)}ngOnInit(){}ngOnChanges(e){e.organizationId&&(this.organizationId?(this.fetchList(),this.firstLoad?this.firstLoad=!1:this.ngControl.control.reset()):(this.listData=[],this.ngControl.control.reset()))}writeValue(e){}registerOnChange(e){}registerOnTouched(e){}setDisabledState(e){}handleChange(e){this.onChange.emit(e)}fetchList(){const e=JSON.stringify({ListTextSearch:this.request.listTextSearch});this.departmentService.getList(1,1e3,this.request.sort,e,this.organizationId).toPromise().then(e=>{this.loading=!1,e&&e.success?this.listData=e.data.content:this.message.error(e.message)})}goToList(){this.modalService.openListModal(o.a).afterClose.toPromise().then(e=>Object(a.a)(this,void 0,void 0,function*(){e&&(this.ngControl.control.setValue(e.id),this.onChange.emit(e))}))}goToCreate(){this.modalService.openCreateModal(r.a).afterClose.toPromise().then(e=>Object(a.a)(this,void 0,void 0,function*(){e&&(this.listData=[...this.listData,e],this.ngControl.control.setValue(e.id),this.onChange.emit(e))}))}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(c.r),c.Nb(l.m,10),c.Nb(s.a),c.Nb(b.a))},e.\u0275cmp=c.Hb({type:e,selectors:[["app-select-department"]],inputs:{labelContent:"labelContent",span:"span",required:"required",organizationId:"organizationId",labelHorizontal:"labelHorizontal",selectMode:"selectMode"},outputs:{onChange:"onChange"},features:[c.wb,c.xb],decls:3,vars:8,consts:[["type","select","labelField","name",3,"selectMode","labelHorizontal","selectData","span","labelContent","formControl","required","footerSelectTemplate","onChange"],["footer",""],[1,"container","m-5"],["iconType","search",3,"onClick"],[3,"onClick",4,"ngIf"],[3,"onClick"]],template:function(e,t){if(1&e&&(c.Tb(0,"app-input",0),c.ac("onChange",function(e){return t.handleChange(e)}),c.Sb(),c.Cc(1,g,4,1,"ng-template",null,1,c.Dc)),2&e){const e=c.rc(2);c.jc("selectMode",t.selectMode)("labelHorizontal",t.labelHorizontal)("selectData",t.listData)("span",t.span)("labelContent",t.labelContent)("formControl",t.ngControl.control)("required",t.required)("footerSelectTemplate",e)}},directives:[d.a,l.n,l.g,l.s,u.a,p.n,h.a],styles:[""]}),e})()},yrJp:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var a=n("GHWL"),i=n("3Pt+"),o=n("1XBi"),r=n("AytR"),c=n("fXoL"),l=n("CFL1"),s=n("2I5R"),b=n("AVD9"),d=n("D9mS"),u=n("ZE2D"),p=n("QlUG"),h=n("5vDB"),m=n("AvTa"),g=n("Lxo8"),f=n("LojI");const S=function(){return{label:"Nam",value:1}},z=function(){return{label:"N\u1eef",value:0}},C=function(e,t){return[e,t]},T=function(){return{label:"Trong \u0111\u01a1n v\u1ecb",value:"internal"}},v=function(e){return[e]};let I=(()=>{class e extends o.a{constructor(e,t){super(e),this.userService=t}ngOnInit(){this.form=this.formBuilder.group({username:[null],fullname:[null,i.t.required],code:[null],certificateNumber:[null,i.t.required],issueDate:[null,i.t.required],birthDate:[null],gender:[null],email:[null,i.t.email],phoneNumber:[null,i.t.pattern(a.b)],organizationId:[r.a.INTERNAL_ORGANIZATION_ID],departmentId:[null],titleId:[null],avatarUrl:[null],address:[null],identificationNumber:[null],type:["internal",i.t.required]}),this.onChangeType("internal")}handleChange(e){this.avatarFile=e.file.originFileObj,this.getBase64(e.file.originFileObj,e=>{this.avatarFileUrl=e})}getBase64(e,t){const n=new FileReader;n.addEventListener("load",()=>t(n.result)),n.readAsDataURL(e)}onChangeType(e){"internal"==e?(this.form.controls.organizationId.setValue(r.a.INTERNAL_ORGANIZATION_ID),this.form.controls.organizationId.disable(),this.form.controls.certificateNumber.setValidators([i.t.required]),this.form.controls.issueDate.setValidators([i.t.required])):"external"==e&&(this.form.controls.organizationId.setValue(null),this.form.controls.organizationId.enable(),this.form.controls.certificateNumber.setValidators([]),this.form.controls.issueDate.setValidators([]))}onSave(){for(const e in this.form.controls)this.form.controls[e].markAsDirty(),this.form.controls[e].updateValueAndValidity();this.form.valid&&(this.loading=!0,this.form.controls.username.setValue(this.form.getRawValue().certificateNumber),this.userService.create(this.form.getRawValue(),this.avatarFile).toPromise().then(e=>{this.loading=!1,e&&e.success?this.isModal&&(this.message.success("T\u1ea1o m\u1edbi th\xe0nh c\xf4ng"),this.modal.destroy(e.data)):this.message.error("L\u1ed7i: "+e.message)}))}onCancel(){this.isModal&&this.modal.destroy()}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(c.r),c.Nb(l.a))},e.\u0275cmp=c.Hb({type:e,selectors:[["app-create-user"]],features:[c.wb],decls:49,vars:23,consts:[[1,"container"],[1,"page-header"],[3,"loading","onClick"],[3,"onClick"],[3,"formGroup"],[1,"row"],[1,"col-xl-3"],[1,"row","m-v-20"],["nzName","avatar",1,"center",3,"nzShowUploadList","nzChange"],["nzIcon","user",3,"nzSize","nzSrc"],[1,"col-xl-9"],[1,"col-md-6"],["type","text","labelContent","H\u1ecd t\xean","formControlName","fullname","required","true"],["type","text","labelContent","M\xe3","formControlName","code"],["type","text","labelContent","S\u1ed1 CCHN","formControlName","certificateNumber",3,"required"],["type","datepicker","labelContent","Ng\xe0y c\u1ea5p","formControlName","issueDate",3,"required"],["type","datepicker","labelContent","Ng\xe0y sinh","formControlName","birthDate"],["type","radio","labelContent","Gi\u1edbi t\xednh","formControlName","gender",3,"radioData"],["type","text","labelContent","Email","formControlName","email","errorTip","Sai \u0111\u1ecbnh d\u1ea1ng email"],["type","text","labelContent","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phoneNumber","errorTip","Sai \u0111\u1ecbnh d\u1ea1ng S\u0110T"],["type","text","labelContent","S\u1ed1 CMND","formControlName","identificationNumber"],["type","textarea","labelContent","\u0110\u1ecba ch\u1ec9","formControlName","address"],[1,"col-md-12"],["type","radio","labelContent","\u0110\u1ed1i t\u01b0\u1ee3ng","formControlName","type",3,"span","radioData","onChange"],["formControlName","organizationId","required","true",3,"span"],["formControlName","departmentId",3,"organizationId"],["formControlName","titleId"]],template:function(e,t){1&e&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"app-button-save",2),c.ac("onClick",function(){return t.onSave()}),c.Sb(),c.Tb(3,"app-button-cancel",3),c.ac("onClick",function(){return t.onCancel()}),c.Sb(),c.Sb(),c.Tb(4,"div"),c.Tb(5,"form",4),c.Tb(6,"div",5),c.Tb(7,"div",6),c.Tb(8,"div",7),c.Tb(9,"nz-upload",8),c.ac("nzChange",function(e){return t.handleChange(e)}),c.Ob(10,"nz-avatar",9),c.Sb(),c.Sb(),c.Sb(),c.Tb(11,"div",10),c.Tb(12,"div",5),c.Tb(13,"div",11),c.Ob(14,"app-input",12),c.Sb(),c.Tb(15,"div",11),c.Ob(16,"app-input",13),c.Sb(),c.Sb(),c.Tb(17,"div",5),c.Tb(18,"div",11),c.Ob(19,"app-input",14),c.Sb(),c.Tb(20,"div",11),c.Ob(21,"app-input",15),c.Sb(),c.Sb(),c.Tb(22,"div",5),c.Tb(23,"div",11),c.Ob(24,"app-input",16),c.Sb(),c.Tb(25,"div",11),c.Ob(26,"app-input",17),c.Sb(),c.Sb(),c.Tb(27,"div",5),c.Tb(28,"div",11),c.Ob(29,"app-input",18),c.Sb(),c.Tb(30,"div",11),c.Ob(31,"app-input",19),c.Sb(),c.Sb(),c.Tb(32,"div",5),c.Tb(33,"div",11),c.Ob(34,"app-input",20),c.Sb(),c.Tb(35,"div",11),c.Ob(36,"app-input",21),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Ob(37,"nz-divider"),c.Tb(38,"div",5),c.Tb(39,"div",22),c.Tb(40,"app-input",23),c.ac("onChange",function(e){return t.onChangeType(e)}),c.Sb(),c.Sb(),c.Sb(),c.Tb(41,"div",5),c.Tb(42,"div",22),c.Ob(43,"app-select-organization",24),c.Sb(),c.Sb(),c.Tb(44,"div",5),c.Tb(45,"div",11),c.Ob(46,"app-select-department",25),c.Sb(),c.Tb(47,"div",11),c.Ob(48,"app-select-title",26),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&e&&(c.zb(2),c.jc("loading",t.loading),c.zb(2),c.Bb(t.isModal?"m-t-30":""),c.zb(1),c.jc("formGroup",t.form),c.zb(4),c.jc("nzShowUploadList",!1),c.zb(1),c.jc("nzSize",200)("nzSrc",t.avatarFileUrl),c.zb(9),c.jc("required","internal"==t.form.value.type),c.zb(2),c.jc("required","internal"==t.form.value.type),c.zb(5),c.jc("radioData",c.nc(17,C,c.lc(15,S),c.lc(16,z))),c.zb(14),c.jc("span",2)("radioData",c.mc(21,v,c.lc(20,T))),c.zb(3),c.jc("span",2),c.zb(3),c.jc("organizationId",t.form.getRawValue().organizationId))},directives:[s.a,b.a,i.u,i.o,i.i,d.a,u.a,p.a,i.n,i.h,i.s,h.a,m.a,g.a,f.a],styles:[""]}),e})()}}]);