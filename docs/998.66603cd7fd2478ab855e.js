"use strict";(self.webpackChunkcme_management=self.webpackChunkcme_management||[]).push([[998],{84998:(x,E,e)=>{e.r(E),e.d(E,{AuthenticationModule:()=>W});var T=e(88194),D=e(42979),b=e(38583),a=e(76231),u=e(90665),o=e(7330),h=e(97013),t=e(37716),A=e(97020),Z=e(17018),_=e(75887),z=e(40228),M=e(84168),C=e(16704),f=e(57674),d=e(21454),p=e(65354),r=e(63423),n=e(14453),l=e(29374),m=e(84514);const O=function(){return["/authentication/login"]};let L=(()=>{class s extends h.H{constructor(i,c){super(i),this.authenticationService=c}ngOnInit(){this.form=this.formBuilder.group({username:[null],newPassword:[null,[u.kI.required,o.p.checkPassword.bind(this)]],confirmPassword:[null,[u.kI.required,o.p.passwordEquar]],fullname:[null,u.kI.required],certificateNumber1:[null,u.kI.required],certificateNumber2:[null,u.kI.required],issueDate:[null,u.kI.required],birthDate:[null,u.kI.required],departmentId:[null,u.kI.required],titleId:[null,u.kI.required]})}submitForm(){for(const i in this.form.controls)this.form.controls[i].markAsDirty(),this.form.controls[i].updateValueAndValidity();if(this.form.valid){this.loading=!0,this.form.controls.username.setValue(this.form.getRawValue().certificateNumber);const i=this.form.getRawValue();i.certificateNumber=this.form.getRawValue().certificateNumber1+"/"+this.form.getRawValue().certificateNumber2.toUpperCase(),i.username=i.certificateNumber,delete i.certificateNumber1,delete i.certificateNumber2,this.authenticationService.signup(i).toPromise().then(c=>{this.loading=!1,c&&c.success?(this.message.success("\u0110\u0103ng k\xfd t\xe0i kho\u1ea3n th\xe0nh c\xf4ng"),this.router.navigate(["authentication/login"])):this.message.error("L\u1ed7i: "+c.message)})}}}return s.\u0275fac=function(i){return new(i||s)(t.Y36(t.zs3),t.Y36(A.$))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-sign-up"]],features:[t.qOj],decls:44,vars:14,consts:[[1,"container-fluid","p-h-0","p-v-20","h-100","bg",2,"background-image","url('assets/images/others/login-3.png')"],[1,"d-flex","flex-column","justify-content-between","h-100"],[1,"d-none","d-md-block"],[1,"container"],[1,"row","align-items-center"],[1,"col-md-7","col-lg-5","m-h-auto"],[1,"m-b-60","shadow-lg"],[1,"d-flex","align-items-center","justify-content-between","m-b-30"],["alt","","src","assets/images/logo/logo-xanhpon.png",1,"img-fluid",2,"width","100px","height","100px"],[1,"m-b-0"],["nz-form","","nzLayout","vertical",1,"login-form",3,"formGroup","keydown.enter"],["type","text","formControlName","fullname","labelContent","H\u1ecd v\xe0 t\xean","required","",3,"labelHorizontal"],[1,"col-md-12",3,"content","required"],[1,"row"],[1,"col-md-6"],["nz-input","","formControlName","certificateNumber1","placeholder","S\u1ed1 CCHN",2,"margin-left","9px"],[1,"d-flex"],[2,"margin-right","9px","font-size","22px"],["nz-input","","formControlName","certificateNumber2","placeholder","K\xfd hi\u1ec7u",2,"margin-right","9px","text-transform","uppercase"],[2,"color","#808080","margin-left","30px"],["type","datepicker","formControlName","issueDate","labelContent","Ng\xe0y c\u1ea5p","required","",3,"labelHorizontal"],["type","datepicker","formControlName","birthDate","labelContent","Ng\xe0y sinh","required","",3,"labelHorizontal"],["formControlName","departmentId","required","",3,"labelHorizontal"],["formControlName","titleId","required","",3,"labelHorizontal"],["type","password","formControlName","newPassword","labelContent","M\u1eadt kh\u1ea9u","required","",3,"labelHorizontal"],["type","password","formControlName","confirmPassword","labelContent","X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u","required","",3,"labelHorizontal"],[1,"d-flex","align-items-center","justify-content-between","m-t-20"],[1,"font-size-13","text-muted"],[1,"small",3,"routerLink"],["nz-button","",1,"login-form-button",3,"nzType","nzLoading","click"],[1,"d-none","d-md-flex","p-h-40","justify-content-between"]],template:function(i,c){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"nz-card",6),t.TgZ(7,"div",7),t._UZ(8,"img",8),t.TgZ(9,"h2",9),t._uU(10,"\u0110\u0103ng k\xfd t\xe0i kho\u1ea3n"),t.qZA(),t.qZA(),t.TgZ(11,"form",10),t.NdJ("keydown.enter",function(U){return U.preventDefault()}),t._UZ(12,"app-input",11),t._UZ(13,"app-label-vertical",12),t.TgZ(14,"div",13),t.TgZ(15,"div",14),t.TgZ(16,"nz-form-item"),t.TgZ(17,"nz-form-control"),t._UZ(18,"input",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",14),t.TgZ(20,"nz-form-item"),t.TgZ(21,"nz-form-control"),t.TgZ(22,"div",16),t.TgZ(23,"span",17),t._uU(24,"/"),t.qZA(),t._UZ(25,"input",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"span",19),t._uU(27,"V\xed d\u1ee5: 123456/HNO-CCHN"),t.qZA(),t._UZ(28,"app-input",20),t._UZ(29,"app-input",21),t._UZ(30,"app-select-department",22),t._UZ(31,"app-select-title",23),t._UZ(32,"app-input",24),t._UZ(33,"app-input",25),t.TgZ(34,"div",26),t.TgZ(35,"span",27),t.TgZ(36,"a",28),t._uU(37,"\u0110\xe3 c\xf3 t\xe0i kho\u1ea3n?"),t.qZA(),t.qZA(),t.TgZ(38,"nz-form-item"),t.TgZ(39,"nz-form-control"),t.TgZ(40,"div"),t.TgZ(41,"button",29),t.NdJ("click",function(){return c.submitForm()}),t._uU(42,"\u0110\u0103ng k\xfd"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(43,"div",30),t.qZA(),t.qZA()),2&i&&(t.xp6(11),t.Q6J("formGroup",c.form),t.xp6(1),t.Q6J("labelHorizontal",!1),t.xp6(1),t.Q6J("content","S\u1ed1 ch\u1ee9ng ch\u1ec9 h\xe0nh ngh\u1ec1 (T\xean t\xe0i kho\u1ea3n)")("required",!0),t.xp6(15),t.Q6J("labelHorizontal",!1),t.xp6(1),t.Q6J("labelHorizontal",!1),t.xp6(1),t.Q6J("labelHorizontal",!1),t.xp6(1),t.Q6J("labelHorizontal",!1),t.xp6(1),t.Q6J("labelHorizontal",!1),t.xp6(1),t.Q6J("labelHorizontal",!1),t.xp6(3),t.Q6J("routerLink",t.DdM(13,O)),t.xp6(5),t.Q6J("nzType","primary")("nzLoading",c.loading))},directives:[Z.bd,u._Y,u.JL,_.Lr,u.sg,z.a,u.JJ,u.u,u.Q7,M.I,C.SK,_.Nx,C.t3,_.Fd,f.Zp,u.Fj,d._,p.W,r.yS,n.ix,l.dQ,m.w],styles:[""]}),s})(),P=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["authentication-root"]],decls:1,vars:0,template:function(i,c){1&i&&t._UZ(0,"router-outlet")},directives:[r.lC],encapsulation:2}),s})();var y=e(66630);function S(s,g){1&s&&t._UZ(0,"i",31)}function I(s,g){1&s&&t._UZ(0,"i",32)}const q=function(){return["/authentication/reset-password-1"]},N=function(){return["/authentication/sign-up"]},J=[{path:"",component:P,children:[{path:"login",component:(()=>{class s extends h.H{constructor(i,c,v){super(i),this.fb=c,this.authenticationService=v}ngOnInit(){this.loginForm=this.fb.group({username:[null,[u.kI.required]],password:[null,[u.kI.required]]})}submitForm(){for(const i in this.loginForm.controls)this.loginForm.controls[i].markAsDirty(),this.loginForm.controls[i].updateValueAndValidity();this.loginForm.valid&&(this.loading=!0,this.authenticationService.login(this.loginForm.value).toPromise().then(i=>{if(this.loading=!1,i.success){const c=i.data.user;this.tokenService.set({user:c,token:i.data.token}),this.router.navigateByUrl(c.isSuperAdmin?"/":"/client")}else this.message.error(i.message)}))}}return s.\u0275fac=function(i){return new(i||s)(t.Y36(t.zs3),t.Y36(u.qu),t.Y36(A.$))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-login"]],features:[t.qOj],decls:46,vars:9,consts:[[1,"container-fluid","p-h-0","p-v-20","h-100","bg",2,"background-image","url('assets/images/others/login-3.png')"],[1,"d-flex","flex-column","justify-content-between","h-100"],[1,"d-none","d-md-block"],[1,"container"],[1,"row","align-items-center"],[1,"col-md-7","col-lg-5","m-h-auto"],[1,"m-b-100","shadow-lg"],[1,"d-flex","align-items-center","justify-content-between","m-b-30"],["alt","","src","assets/images/logo/logo-xanhpon.png",1,"img-fluid",2,"width","100px","height","100px"],[1,"m-b-0"],["nz-form","","nzLayout","vertical",1,"login-form",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","userName"],["nzErrorTip","T\xean \u0111\u0103ng nh\u1eadp kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng!"],[3,"nzPrefix"],["type","text","nz-input","","formControlName","username","placeholder","T\xean \u0111\u0103ng nh\u1eadp"],[1,"relative"],["nzRequired","","nzFor","password"],["tabindex","-1",1,"float-right","font-size-13","text-muted",2,"position","absolute","right","0",3,"routerLink"],["nzErrorTip","M\u1eadt kh\u1ea9u kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng!"],["type","password","nz-input","","formControlName","password","placeholder","M\u1eadt kh\u1ea9u"],[1,"d-flex","align-items-center","justify-content-between"],[1,"font-size-13","text-muted"],[1,"small",3,"routerLink"],["nz-button","",1,"login-form-button",3,"nzType","nzLoading"],["prefixUser",""],["prefixLock",""],[1,"d-none","d-md-flex","p-h-40","justify-content-between"],[1,""],[1,"list-inline"],[1,"list-inline-item"],["href","",1,"text-dark","text-link"],["nz-icon","","nzType","user"],["nz-icon","","nzType","lock"]],template:function(i,c){if(1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"nz-card",6),t.TgZ(7,"div",7),t._UZ(8,"img",8),t.TgZ(9,"h2",9),t._uU(10,"\u0110\u0103ng nh\u1eadp"),t.qZA(),t.qZA(),t.TgZ(11,"form",10),t.NdJ("ngSubmit",function(){return c.submitForm()}),t.TgZ(12,"nz-form-item"),t.TgZ(13,"nz-form-label",11),t._uU(14,"T\xean \u0111\u0103ng nh\u1eadp"),t.qZA(),t.TgZ(15,"nz-form-control",12),t.TgZ(16,"nz-input-group",13),t._UZ(17,"input",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"nz-form-item",15),t.TgZ(19,"nz-form-label",16),t._uU(20,"M\u1eadt kh\u1ea9u"),t.qZA(),t.TgZ(21,"a",17),t._uU(22,"Qu\xean m\u1eadt kh\u1ea9u?"),t.qZA(),t.TgZ(23,"nz-form-control",18),t.TgZ(24,"nz-input-group",13),t._UZ(25,"input",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"nz-form-item"),t.TgZ(27,"nz-form-control"),t.TgZ(28,"div",20),t.TgZ(29,"span",21),t._uU(30,"B\u1ea1n ch\u01b0a c\xf3 t\xe0i kho\u1ea3n? "),t.TgZ(31,"a",22),t._uU(32," \u0110\u0103ng k\xfd"),t.qZA(),t.qZA(),t.TgZ(33,"button",23),t._uU(34,"\u0110\u0103ng nh\u1eadp"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(35,S,1,0,"ng-template",null,24,t.W1O),t.YNc(37,I,1,0,"ng-template",null,25,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",26),t._UZ(40,"span",27),t.TgZ(41,"ul",28),t.TgZ(42,"li",29),t._UZ(43,"a",30),t.qZA(),t.TgZ(44,"li",29),t._UZ(45,"a",30),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const v=t.MAs(36),U=t.MAs(38);t.xp6(11),t.Q6J("formGroup",c.loginForm),t.xp6(5),t.Q6J("nzPrefix",v),t.xp6(5),t.Q6J("routerLink",t.DdM(7,q)),t.xp6(3),t.Q6J("nzPrefix",U),t.xp6(7),t.Q6J("routerLink",t.DdM(8,N)),t.xp6(2),t.Q6J("nzType","primary")("nzLoading",c.loading)}},directives:[Z.bd,u._Y,u.JL,_.Lr,u.sg,C.SK,_.Nx,C.t3,_.iK,_.Fd,m.w,f.gB,f.ke,f.Zp,u.Fj,u.JJ,u.u,r.yS,n.ix,l.dQ,y.Ls],styles:[""]}),s})()},{path:"sign-up",component:L}]}];let F=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[r.Bz.forChild(J)],r.Bz]}),s})();var H=e(52079),B=e(32564);const R=[_.U5,f.o7,n.sL,Z.vh,H.Wr];let W=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[b.ez,a.m,u.UX,D.j,F,B.DepartmentModule,T.TitleModule,...R]]}),s})()},21454:(x,E,e)=>{e.d(E,{_:()=>d});var T=e(64762),D=e(92340),b=e(97013),a=e(44970),u=e(62342),o=e(37716),h=e(90665),t=e(19493),A=e(49206),Z=e(40228),_=e(40308),z=e(38583),M=e(4079);function C(p,r){if(1&p){const n=o.EpF();o.TgZ(0,"app-button-create",5),o.NdJ("onClick",function(){return o.CHM(n),o.oxw(2).goToCreate()}),o.qZA()}}function f(p,r){if(1&p){const n=o.EpF();o.TgZ(0,"div",2),o.TgZ(1,"app-button-base",3),o.NdJ("onClick",function(){return o.CHM(n),o.oxw().goToList()}),o._uU(2,"T\xecm ki\u1ebfm"),o.qZA(),o.YNc(3,C,1,0,"app-button-create",4),o.qZA()}if(2&p){const n=o.oxw();o.xp6(3),o.Q6J("ngIf",n.isSuperAdmin)}}let d=(()=>{class p extends b.H{constructor(n,l,m,O){super(n),this.ngControl=l,this.modalService=m,this.departmentService=O,this.labelContent="Khoa ph\xf2ng",this.span=4,this.required=!1,this.organizationId=D.N.INTERNAL_ORGANIZATION_ID,this.labelHorizontal=!0,this.selectMode="default",this.onChange=new o.vpe,this.listData=[],this.firstLoad=!0,null!=this.ngControl&&(this.ngControl.valueAccessor=this)}ngOnInit(){}ngOnChanges(n){(n.organizationId||this.organizationId)&&(this.organizationId?(this.fetchList(),this.firstLoad?this.firstLoad=!1:this.ngControl.control.reset()):(this.listData=[],this.ngControl.control.reset()))}writeValue(n){}registerOnChange(n){}registerOnTouched(n){}setDisabledState(n){}handleChange(n){this.onChange.emit(n)}fetchList(){const l=JSON.stringify({ListTextSearch:this.request.listTextSearch});this.departmentService.getList(1,1e3,this.request.sort,l,this.organizationId).toPromise().then(m=>{this.loading=!1,m&&m.success?this.listData=m.data.content:this.message.error(m.message)})}goToList(){this.modalService.openListModal(a.I).afterClose.toPromise().then(l=>(0,T.mG)(this,void 0,void 0,function*(){l&&(this.ngControl.control.setValue(l.id),this.onChange.emit(l))}))}goToCreate(){this.modalService.openCreateModal(u.s).afterClose.toPromise().then(l=>(0,T.mG)(this,void 0,void 0,function*(){l&&(this.listData=[...this.listData,l],this.ngControl.control.setValue(l.id),this.onChange.emit(l))}))}}return p.\u0275fac=function(n){return new(n||p)(o.Y36(o.zs3),o.Y36(h.a5,10),o.Y36(t.Z),o.Y36(A.n))},p.\u0275cmp=o.Xpm({type:p,selectors:[["app-select-department"]],inputs:{labelContent:"labelContent",span:"span",required:"required",organizationId:"organizationId",labelHorizontal:"labelHorizontal",selectMode:"selectMode"},outputs:{onChange:"onChange"},features:[o.qOj,o.TTD],decls:3,vars:8,consts:[["type","select","labelField","name",3,"selectMode","labelHorizontal","selectData","span","labelContent","formControl","required","footerSelectTemplate","onChange"],["footer",""],[1,"container","m-5"],["iconType","search",3,"onClick"],[3,"onClick",4,"ngIf"],[3,"onClick"]],template:function(n,l){if(1&n&&(o.TgZ(0,"app-input",0),o.NdJ("onChange",function(O){return l.handleChange(O)}),o.qZA(),o.YNc(1,f,4,1,"ng-template",null,1,o.W1O)),2&n){const m=o.MAs(2);o.Q6J("selectMode",l.selectMode)("labelHorizontal",l.labelHorizontal)("selectData",l.listData)("span",l.span)("labelContent",l.labelContent)("formControl",l.ngControl.control)("required",l.required)("footerSelectTemplate",m)}},directives:[Z.a,h.JJ,h.oH,h.Q7,_.f,z.O5,M.E],styles:[""]}),p})()},65354:(x,E,e)=>{e.d(E,{W:()=>f});var T=e(64762),D=e(97013),b=e(89847),a=e(37716),u=e(48606),o=e(90665),h=e(19493),t=e(90978),A=e(40228),Z=e(40308),_=e(38583),z=e(4079);function M(d,p){if(1&d){const r=a.EpF();a.TgZ(0,"app-button-create",5),a.NdJ("onClick",function(){return a.CHM(r),a.oxw(2).goToCreate()}),a.qZA()}}function C(d,p){if(1&d){const r=a.EpF();a.TgZ(0,"div",2),a.TgZ(1,"app-button-base",3),a.NdJ("onClick",function(){return a.CHM(r),a.oxw().goToList()}),a._uU(2,"T\xecm ki\u1ebfm"),a.qZA(),a.YNc(3,M,1,0,"app-button-create",4),a.qZA()}if(2&d){const r=a.oxw();a.xp6(3),a.Q6J("ngIf",r.isSuperAdmin)}}let f=(()=>{class d extends D.H{constructor(r,n,l,m){super(r),this.ngControl=n,this.modalService=l,this.titleService=m,this.labelContent="Ch\u1ee9c danh",this.span=4,this.required=!1,this.labelHorizontal=!0,this.onChange=new a.vpe,this.listData=[],this.loading=!1,null!=this.ngControl&&(this.ngControl.valueAccessor=this)}ngOnInit(){this.fetchList()}writeValue(r){}registerOnChange(r){}registerOnTouched(r){}setDisabledState(r){}handleChange(r){this.onChange.emit(r)}fetchList(){this.titleService.getList().toPromise().then(r=>{this.loading=!1,r&&r.success?this.listData=r.data.content:this.message.error(r.message)})}goToList(){this.modalService.openListModal(u.G).afterClose.toPromise().then(n=>(0,T.mG)(this,void 0,void 0,function*(){n&&(this.ngControl.control.setValue(n.id),this.listData.find(l=>l.id==n.id)||(this.listData=[...this.listData,n]))}))}goToCreate(){this.modalService.openCreateModal(b.O).afterClose.toPromise().then(n=>(0,T.mG)(this,void 0,void 0,function*(){n&&(this.listData=[...this.listData,n],this.ngControl.control.setValue(n.id),this.onChange.emit(n))}))}}return d.\u0275fac=function(r){return new(r||d)(a.Y36(a.zs3),a.Y36(o.a5,10),a.Y36(h.Z),a.Y36(t.y))},d.\u0275cmp=a.Xpm({type:d,selectors:[["app-select-title"]],inputs:{labelContent:"labelContent",span:"span",required:"required",labelHorizontal:"labelHorizontal"},outputs:{onChange:"onChange"},features:[a.qOj],decls:3,vars:8,consts:[["type","select","labelField","name",3,"labelHorizontal","selectData","span","labelContent","formControl","required","footerSelectTemplate","loading","onChange"],["footer",""],[1,"container","m-5"],["iconType","search",3,"onClick"],[3,"onClick",4,"ngIf"],[3,"onClick"]],template:function(r,n){if(1&r&&(a.TgZ(0,"app-input",0),a.NdJ("onChange",function(m){return n.handleChange(m)}),a.qZA(),a.YNc(1,C,4,1,"ng-template",null,1,a.W1O)),2&r){const l=a.MAs(2);a.Q6J("labelHorizontal",n.labelHorizontal)("selectData",n.listData)("span",n.span)("labelContent",n.labelContent)("formControl",n.ngControl.control)("required",n.required)("footerSelectTemplate",l)("loading",n.loading)}},directives:[A.a,o.JJ,o.oH,o.Q7,Z.f,_.O5,z.E],styles:[""]}),d})()}}]);